<!doctype html><html lang=zh-cn dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Docker ä»€ä¹ˆæ˜¯ Docker Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æˆ– Windows æ“ä½œç³»ç»Ÿçš„æœºå™¨ä¸Šï¼Œ"><title>Docker</title><link rel=canonical href=https://petrichor.net.cn/p/docker/><link rel=stylesheet href=/scss/style.min.76274d13e4a672e562b6f1f60b2aaad6fa1292c307ce28e0aa2e3e3d6d9d2618.css><meta property="og:title" content="Docker"><meta property="og:description" content="Docker ä»€ä¹ˆæ˜¯ Docker Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æˆ– Windows æ“ä½œç³»ç»Ÿçš„æœºå™¨ä¸Šï¼Œ"><meta property="og:url" content="https://petrichor.net.cn/p/docker/"><meta property="og:site_name" content="çš„å•Šè¾¾"><meta property="og:type" content="article"><meta property="article:section" content="Post"><meta property="article:tag" content="Docker"><meta property="article:published_time" content="2021-10-08T11:24:42+08:00"><meta property="article:modified_time" content="2021-10-08T11:24:42+08:00"><meta name=twitter:title content="Docker"><meta name=twitter:description content="Docker ä»€ä¹ˆæ˜¯ Docker Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æˆ– Windows æ“ä½œç³»ç»Ÿçš„æœºå™¨ä¸Šï¼Œ"><link rel="shortcut icon" href=/dwd.svg></head><body class=article-page><script>(function(){const e="StackColorScheme";localStorage.getItem(e)||localStorage.setItem(e,"auto")})()</script><script>(function(){const t="StackColorScheme",e=localStorage.getItem(t),n=window.matchMedia("(prefers-color-scheme: dark)").matches===!0;e=="dark"||e==="auto"&&n?document.documentElement.dataset.scheme="dark":document.documentElement.dataset.scheme="light"})()</script><div class="container main-container flex on-phone--column extended"><aside class="sidebar left-sidebar sticky"><button class="hamburger hamburger--spin" type=button id=toggle-menu aria-label=åˆ‡æ¢èœå•>
<span class=hamburger-box><span class=hamburger-inner></span></span></button><header><figure class=site-avatar><a href=/><img src=/img/avatar_hu9462b85ad07859eff2cf1bad472a7853_60669_300x0_resize_box_3.png width=300 height=300 class=site-logo loading=lazy alt=Avatar></a>
<span class=emoji>ğŸ¥</span></figure><div class=site-meta><h1 class=site-name><a href=/>çš„å•Šè¾¾</a></h1><h2 class=site-description></h2></div></header><ol class=social-menu><li><a href=https://github.com/p3ddd target=_blank title=GitHub rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M9 19c-4.3 1.4-4.3-2.5-6-3m12 5v-3.5c0-1 .1-1.4-.5-2 2.8-.3 5.5-1.4 5.5-6a4.6 4.6.0 00-1.3-3.2 4.2 4.2.0 00-.1-3.2s-1.1-.3-3.5 1.3a12.3 12.3.0 00-6.2.0C6.5 2.8 5.4 3.1 5.4 3.1a4.2 4.2.0 00-.1 3.2A4.6 4.6.0 004 9.5c0 4.6 2.7 5.7 5.5 6-.6.6-.6 1.2-.5 2V21"/></svg></a></li><li><a href=mailto:dong.wenda@outlook.com target=_blank title=Email rel=me><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-mail" width="44" height="44" viewBox="0 0 24 24" stroke-width="1.5" stroke="#2c3e50" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M3 7a2 2 0 012-2h14a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2V7z"/><path d="M3 7l9 6 9-6"/></svg></a></li></ol><ol class=menu id=main-menu><li><a href=/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><polyline points="5 12 3 12 12 3 21 12 19 12"/><path d="M5 12v7a2 2 0 002 2h10a2 2 0 002-2v-7"/><path d="M9 21v-6a2 2 0 012-2h2a2 2 0 012 2v6"/></svg><span>Home</span></a></li><li><a href=/archives/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><rect x="3" y="4" width="18" height="4" rx="2"/><path d="M5 8v10a2 2 0 002 2h10a2 2 0 002-2V8"/><line x1="10" y1="12" x2="14" y2="12"/></svg><span>Archives</span></a></li><li><a href=/tags/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg><span>Tags</span></a></li><li><a href=/search/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="10" cy="10" r="7"/><line x1="21" y1="21" x2="15" y2="15"/></svg><span>Search</span></a></li><li><a href=/links/><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M10 14a3.5 3.5.0 005 0l4-4a3.5 3.5.0 00-5-5l-.5.5"/><path d="M14 10a3.5 3.5.0 00-5 0l-4 4a3.5 3.5.0 005 5l.5-.5"/></svg><span>Links</span></a></li><div class=menu-bottom-section><li id=dark-mode-toggle><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="8" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="16" cy="12" r="2"/><rect x="2" y="6" width="20" height="12" rx="6"/></svg><span>æš—è‰²æ¨¡å¼</span></li></div></ol></aside><aside class="sidebar right-sidebar sticky"><section class="widget archives"><div class=widget-icon><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><line x1="5" y1="9" x2="19" y2="9"/><line x1="5" y1="15" x2="19" y2="15"/><line x1="11" y1="4" x2="7" y2="20"/><line x1="17" y1="4" x2="13" y2="20"/></svg></div><h2 class="widget-title section-title">ç›®å½•</h2><div class=widget--toc><nav id=TableOfContents><ol><li><a href=#docker>Docker</a><ol><li><a href=#ä»€ä¹ˆæ˜¯-docker>ä»€ä¹ˆæ˜¯ Docker</a></li></ol></li><li><a href=#å®‰è£…>å®‰è£…</a><ol><li><a href=#åˆ é™¤æ—§ç‰ˆæœ¬>åˆ é™¤æ—§ç‰ˆæœ¬</a></li><li><a href=#apt-å®‰è£…>apt å®‰è£…</a></li><li><a href=#è„šæœ¬ä¸€é”®å®‰è£…>è„šæœ¬ä¸€é”®å®‰è£…</a></li></ol></li><li><a href=#ä½¿ç”¨>ä½¿ç”¨</a><ol><li><a href=#åŸºæœ¬å‘½ä»¤>åŸºæœ¬å‘½ä»¤</a></li><li><a href=#é•œåƒç›¸å…³>é•œåƒç›¸å…³</a></li><li><a href=#å®¹å™¨ç›¸å…³>å®¹å™¨ç›¸å…³</a></li></ol></li><li><a href=#dockerfile>Dockerfile</a></li><li><a href=#docker-compose>Docker Compose</a></li><li><a href=#å®¹å™¨å¤‡ä»½>å®¹å™¨å¤‡ä»½</a><ol><li><a href=#å¤‡ä»½>å¤‡ä»½</a></li><li><a href=#æ¢å¤>æ¢å¤</a></li></ol></li><li><a href=#portainer-å¯è§†åŒ–>portainer å¯è§†åŒ–</a></li><li><a href=#æ³¨æ„>æ³¨æ„</a><ol><li><a href=#got-permission-denied>Got permission denied</a></li></ol></li><li><a href=#reference>Reference</a></li></ol></nav></div></section></aside><main class="main full-width"><article class=main-article><header class=article-header><div class=article-details><div class=article-title-wrapper><h2 class=article-title><a href=/p/docker/>Docker</a></h2></div><footer class=article-time><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11.795 21H5a2 2 0 01-2-2V7a2 2 0 012-2h12a2 2 0 012 2v4"/><circle cx="18" cy="18" r="4"/><path d="M15 3v4"/><path d="M7 3v4"/><path d="M3 11h16"/><path d="M18 16.496V18l1 1"/></svg><time class=article-time--published>Oct 08, 2021</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><polyline points="12 7 12 12 15 15"/></svg><time class=article-time--reading>é˜…è¯»æ—¶é•¿: 7 åˆ†é’Ÿ</time></div><div><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><path d="M11 3l9 9a1.5 1.5.0 010 2l-6 6a1.5 1.5.0 01-2 0L3 11V7a4 4 0 014-4h4"/><circle cx="9" cy="9" r="2"/></svg><a href=/tags/docker/>#Docker</a></div></footer></div></header><section class=article-content><h2 id=docker>Docker</h2><h3 id=ä»€ä¹ˆæ˜¯-docker>ä»€ä¹ˆæ˜¯ Docker</h3><p>Docker æ˜¯ä¸€ä¸ªå¼€æºçš„åº”ç”¨å®¹å™¨å¼•æ“ï¼Œè®©å¼€å‘è€…å¯ä»¥æ‰“åŒ…ä»–ä»¬çš„åº”ç”¨ä»¥åŠä¾èµ–åŒ…åˆ°ä¸€ä¸ªå¯ç§»æ¤çš„å®¹å™¨ä¸­ï¼Œç„¶åå‘å¸ƒåˆ°ä»»ä½•æµè¡Œçš„ Linux æˆ– Windows æ“ä½œç³»ç»Ÿçš„æœºå™¨ä¸Šï¼Œä¹Ÿå¯ä»¥å®ç°è™šæ‹ŸåŒ–ï¼Œå®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ä¹‹é—´ä¸ä¼šæœ‰ä»»ä½•æ¥å£ã€‚</p><h2 id=å®‰è£…>å®‰è£…</h2><p><a class=link href=https://docs.docker.com/engine/install/ubuntu/ target=_blank rel=noopener>å®˜æ–¹æ–‡æ¡£ - Install Docker Engine on Ubuntu</a></p><h3 id=åˆ é™¤æ—§ç‰ˆæœ¬>åˆ é™¤æ—§ç‰ˆæœ¬</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=k>for</span> pkg in docker.io docker-doc docker-compose podman-docker containerd runc<span class=p>;</span> <span class=k>do</span> sudo apt-get remove <span class=nv>$pkg</span><span class=p>;</span> <span class=k>done</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=apt-å®‰è£…>apt å®‰è£…</h3><p>è®¾ç½® Docker çš„ apt å­˜å‚¨åº“</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># æ·»åŠ  Docker å®˜æ–¹ GPG key:</span>
</span></span><span class=line><span class=cl>sudo apt-get update
</span></span><span class=line><span class=cl>sudo apt-get install ca-certificates curl gnupg
</span></span><span class=line><span class=cl>sudo install -m <span class=m>0755</span> -d /etc/apt/keyrings
</span></span><span class=line><span class=cl>curl -fsSL https://download.docker.com/linux/ubuntu/gpg <span class=p>|</span> sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
</span></span><span class=line><span class=cl>sudo chmod a+r /etc/apt/keyrings/docker.gpg
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ·»åŠ  apt æº:</span>
</span></span><span class=line><span class=cl><span class=nb>echo</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  <span class=s2>&#34;deb [arch=&#34;</span><span class=k>$(</span>dpkg --print-architecture<span class=k>)</span><span class=s2>&#34; signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
</span></span></span><span class=line><span class=cl><span class=s2>  &#34;</span><span class=k>$(</span>. /etc/os-release <span class=o>&amp;&amp;</span> <span class=nb>echo</span> <span class=s2>&#34;</span><span class=nv>$VERSION_CODENAME</span><span class=s2>&#34;</span><span class=k>)</span><span class=s2>&#34; stable&#34;</span> <span class=p>|</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>  sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ›´æ–°</span>
</span></span><span class=line><span class=cl>sudo apt-get update
</span></span></code></pre></td></tr></table></div></div><p>å®‰è£…</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
</span></span></code></pre></td></tr></table></div></div><p>ä¸‹è½½ hello-world é•œåƒéªŒè¯</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>sudo docker run hello-world
</span></span></code></pre></td></tr></table></div></div><h3 id=è„šæœ¬ä¸€é”®å®‰è£…>è„šæœ¬ä¸€é”®å®‰è£…</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>curl -fsSL https://get.docker.com -o get-docker.sh
</span></span><span class=line><span class=cl>sudo sh get-docker.sh
</span></span></code></pre></td></tr></table></div></div><p>å°†å½“å‰ç”¨æˆ·åŠ å…¥ docker ç»„ï¼š <a class=link href=#got-permission-denied>#Got permission denied</a></p><h2 id=ä½¿ç”¨>ä½¿ç”¨</h2><h3 id=åŸºæœ¬å‘½ä»¤>åŸºæœ¬å‘½ä»¤</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># æ˜¾ç¤º Docker ç‰ˆæœ¬ä¿¡æ¯</span>
</span></span><span class=line><span class=cl>sudo docker version
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ˜¾ç¤ºæ•´ä¸ªç³»ç»Ÿçš„ä¿¡æ¯</span>
</span></span><span class=line><span class=cl>sudo docker info
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># å‘½ä»¤å¸®åŠ©</span>
</span></span><span class=line><span class=cl>sudo docker <span class=nb>help</span>
</span></span><span class=line><span class=cl>sudo docker COMMAND --help
</span></span></code></pre></td></tr></table></div></div><details><summary><strong>docker å‘½ä»¤å¸®åŠ©</strong></summary>
```
Usage: docker [OPTIONS] COMMAND
A self-sufficient runtime for containers
Options:
â€‹ --config string Location of client config files (default "/home/ubuntu/.docker")
-c, --context string Name of the context to use to connect to the daemon (overrides DOCKER_HOST env var and default context set with "docker context use")
-D, --debug Enable debug mode
-H, --host list Daemon socket(s) to connect to
-l, --log-level string Set the logging level ("debug"|"info"|"warn"|"error"|"fatal") (default "info")
â€‹ --tls Use TLS; implied by --tlsverify
â€‹ --tlscacert string Trust certs signed only by this CA (default "/home/ubuntu/.docker/ca.pem")
â€‹ --tlscert string Path to TLS certificate file (default "/home/ubuntu/.docker/cert.pem")
â€‹ --tlskey string Path to TLS key file (default "/home/ubuntu/.docker/key.pem")
â€‹ --tlsverify Use TLS and verify the remote
â€‹ -v, --version Print version information and quit
Management Commands:
app* Docker App (Docker Inc., v0.9.1-beta3)
builder Manage builds
buildx* Build with BuildKit (Docker Inc., v0.5.1-docker)
config Manage Docker configs
container Manage containers
context Manage contexts
image Manage images
manifest Manage Docker image manifests and manifest lists
network Manage networks
node Manage Swarm nodes
plugin Manage plugins
scan* Docker Scan (Docker Inc., v0.7.0)
secret Manage Docker secrets
service Manage services
stack Manage Docker stacks
swarm Manage Swarm
system Manage Docker
trust Manage trust on Docker images
volume Manage volumes
Commands:
attach Attach local standard input, output, and error streams to a running container
build Build an image from a Dockerfile
commit Create a new image from a container's changes
cp Copy files/folders between a container and the local filesystem
create Create a new container
diff Inspect changes to files or directories on a container's filesystem
events Get real time events from the server
exec Run a command in a running container
export Export a container's filesystem as a tar archive
history Show the history of an image
images List images
import Import the contents from a tarball to create a filesystem image
info Display system-wide information
inspect Return low-level information on Docker objects
kill Kill one or more running containers
load Load an image from a tar archive or STDIN
login Log in to a Docker registry
logout Log out from a Docker registry
logs Fetch the logs of a container
pause Pause all processes within one or more containers
port List port mappings or a specific mapping for the container
ps List containers
pull Pull an image or a repository from a registry
push Push an image or a repository to a registry
rename Rename a container
restart Restart one or more containers
rm Remove one or more containers
rmi Remove one or more images
run Run a command in a new container
save Save one or more images to a tar archive (streamed to STDOUT by default)
search Search the Docker Hub for images
start Start one or more stopped containers
stats Display a live stream of container(s) resource usage statistics
stop Stop one or more running containers
tag Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE
top Display the running processes of a container
unpause Unpause all processes within one or more containers
update Update configuration of one or more containers
version Show the Docker version information
wait Block until one or more containers stop, then print their exit codes
Run 'docker COMMAND --help' for more information on a command.
To get more help with docker, check out our guides at https://docs.docker.com/go/guides/
```</details><h3 id=é•œåƒç›¸å…³>é•œåƒç›¸å…³</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker images --help
</span></span></code></pre></td></tr></table></div></div><details><summary><strong>docker images å‘½ä»¤å¸®åŠ©</strong></summary>
```
Usage: docker images [OPTIONS] [REPOSITORY[:TAG]]
List images
Options:
-a, --all Show all images (default hides intermediate images)
--digests Show digests
-f, --filter filter Filter output based on conditions provided
--format string Pretty-print images using a Go template
--no-trunc Don't truncate output
-q, --quiet Only show image IDs
```</details><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># æŸ¥æ‰¾é•œåƒ</span>
</span></span><span class=line><span class=cl>docker search golang
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æ‹‰å–é•œåƒ</span>
</span></span><span class=line><span class=cl>docker pull golang
</span></span><span class=line><span class=cl>docker pull golang:latest <span class=c1># æŒ‡å®šç‰ˆæœ¬</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># æŸ¥çœ‹å·²å®‰è£…é•œåƒ</span>
</span></span><span class=line><span class=cl>docker images
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ é™¤é•œåƒ</span>
</span></span><span class=line><span class=cl>docker rmi golang <span class=c1># é€šè¿‡é•œåƒå</span>
</span></span><span class=line><span class=cl>docker rmi 0ac33e5f5afa <span class=c1># é€šè¿‡é•œåƒ ID</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># åˆ é™¤å…¨éƒ¨é•œåƒ</span>
</span></span><span class=line><span class=cl>docker rmi <span class=k>$(</span>docker images -qa<span class=k>)</span>
</span></span><span class=line><span class=cl><span class=c1># å‚æ•° q(quiet)ï¼šåªæ˜¾ç¤ºé•œåƒ ID</span>
</span></span><span class=line><span class=cl><span class=c1># å‚æ•° a(all)ï¼šæ˜¾ç¤ºæ‰€æœ‰é•œåƒ(åŒ…æ‹¬ä¸­é—´é•œåƒ)</span>
</span></span></code></pre></td></tr></table></div></div><h3 id=å®¹å™¨ç›¸å…³>å®¹å™¨ç›¸å…³</h3><p><strong>docker run - åœ¨æ–°å®¹å™¨ä¸­è¿è¡Œ</strong></p><p>ä»¥äº¤äº’æ¨¡å¼åœ¨åå°å¯åŠ¨ä¸€ä¸ªåä¸º <code>grafana</code> çš„å®¹å™¨ï¼Œå¹¶åˆ†é… ttyï¼Œä½¿ç”¨å®¿ä¸»æœºç½‘ç»œï¼Œæ°¸è¿œä¼šé‡å¯ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker run -itd --net<span class=o>=</span>host --restart<span class=o>=</span>always --name<span class=o>=</span>grafana grafana/grafana
</span></span></code></pre></td></tr></table></div></div><details><summary><strong>docker run å…·ä½“é€‰é¡¹</strong></summary>
| é€‰é¡¹ | è¯´æ˜ |
| ----------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| -d, --detach=false | æŒ‡å®šå®¹å™¨è¿è¡Œäºå‰å°è¿˜æ˜¯åå°ï¼Œé»˜è®¤ä¸º falseã€‚ |
| -i, --interactive=false | æ‰“å¼€ STDINï¼Œç”¨äºæ§åˆ¶å°äº¤äº’ã€‚ |
| -t, --tty=false | åˆ†é… tty è®¾å¤‡ï¼Œå¯ä»¥æ”¯æŒç»ˆç«¯ç™»å½•ï¼Œé»˜è®¤ä¸º falseã€‚ |
| -u, --user="" | æŒ‡å®šå®¹å™¨çš„ç”¨æˆ·ã€‚ |
| -a, --attach=[] | ç™»å½•å®¹å™¨ï¼ˆå¿…é¡»æ˜¯ä»¥ docker run -d å¯åŠ¨çš„å®¹å™¨ï¼‰ã€‚ |
| -w, --workdir="" | æŒ‡å®šå®¹å™¨çš„å·¥ä½œç›®å½•ã€‚ |
| -c, --cpu-shares=0 | è®¾ç½®å®¹å™¨ CPU æƒé‡ï¼Œåœ¨ CPU å…±äº«åœºæ™¯ä½¿ç”¨ã€‚ |
| -e, --env=[] | æŒ‡å®šç¯å¢ƒå˜é‡ï¼Œå®¹å™¨ä¸­å¯ä»¥ä½¿ç”¨è¯¥ç¯å¢ƒå˜é‡ã€‚ |
| -m, --memory="" | æŒ‡å®šå®¹å™¨çš„å†…å­˜ä¸Šé™ã€‚ |
| -P, --publish-all=false | æŒ‡å®šå®¹å™¨æš´éœ²çš„ç«¯å£ã€‚ |
| -p, --publish=[] | æŒ‡å®šå®¹å™¨æš´éœ²çš„ç«¯å£ã€‚ |
| -h, --hostname="" | æŒ‡å®šå®¹å™¨çš„ä¸»æœºåã€‚ |
| -v, --volume=[] | ç»™å®¹å™¨æŒ‚è½½å­˜å‚¨å·ï¼ŒæŒ‚è½½åˆ°å®¹å™¨çš„æŸä¸ªç›®å½•ã€‚ |
| â€“volumes-from=[] | ç»™å®¹å™¨æŒ‚è½½å…¶ä»–å®¹å™¨ä¸Šçš„å·ï¼ŒæŒ‚è½½åˆ°å®¹å™¨çš„æŸä¸ªç›®å½•ã€‚ |
| â€“cap-add=[] | æ·»åŠ æƒé™ã€‚ |
| â€“cap-drop=[] | åˆ é™¤æƒé™ã€‚ |
| â€“cidfile="" | è¿è¡Œå®¹å™¨åï¼Œåœ¨æŒ‡å®šæ–‡ä»¶ä¸­å†™å…¥å®¹å™¨ PID å€¼ï¼Œä¸€ç§å…¸å‹çš„ç›‘æ§ç³»ç»Ÿç”¨æ³•ã€‚ |
| â€“cpuset="" | è®¾ç½®å®¹å™¨å¯ä»¥ä½¿ç”¨å“ªäº› CPUï¼Œæ­¤å‚æ•°å¯ä»¥ç”¨æ¥å®¹å™¨ç‹¬å  CPUã€‚ |
| â€“device=[] | æ·»åŠ ä¸»æœºè®¾å¤‡ç»™å®¹å™¨ï¼Œç›¸å½“äºè®¾å¤‡ç›´é€šã€‚ |
| â€“dns=[] | æŒ‡å®šå®¹å™¨çš„ dns æœåŠ¡å™¨ã€‚ |
| â€“dns-search=[] | æŒ‡å®šå®¹å™¨çš„ dns æœç´¢åŸŸåï¼Œå†™å…¥åˆ°å®¹å™¨çš„ /etc/resolv.conf æ–‡ä»¶ã€‚ |
| â€“entrypoint="" | è¦†ç›– image çš„å…¥å£ç‚¹ã€‚ |
| â€“env-file=[] | æŒ‡å®šç¯å¢ƒå˜é‡æ–‡ä»¶ï¼Œæ–‡ä»¶æ ¼å¼ä¸ºæ¯è¡Œä¸€ä¸ªç¯å¢ƒå˜é‡ã€‚ |
| â€“expose=[] | æŒ‡å®šå®¹å™¨æš´éœ²çš„ç«¯å£ï¼Œå³ä¿®æ”¹é•œåƒçš„æš´éœ²ç«¯å£ã€‚ |
| â€“link=[] | æŒ‡å®šå®¹å™¨é—´çš„å…³è”ï¼Œä½¿ç”¨å…¶ä»–å®¹å™¨çš„ IPã€env ç­‰ä¿¡æ¯ã€‚ |
| â€“lxc-conf=[] | æŒ‡å®šå®¹å™¨çš„é…ç½®æ–‡ä»¶ï¼Œåªæœ‰åœ¨æŒ‡å®š --exec-driver=lxc æ—¶ä½¿ç”¨ã€‚ |
| â€“name="" | æŒ‡å®šå®¹å™¨åå­—ï¼Œåç»­å¯ä»¥é€šè¿‡åå­—è¿›è¡Œå®¹å™¨ç®¡ç†ï¼Œlinks ç‰¹æ€§éœ€è¦ä½¿ç”¨åå­—ã€‚ |
| â€“net=â€œbridgeâ€ | å™¨ç½‘ç»œè®¾ç½®ï¼š 1. bridge ä½¿ç”¨ docker daemon æŒ‡å®šçš„ç½‘æ¡¥ã€‚ 2. host //å®¹å™¨ä½¿ç”¨ä¸»æœºçš„ç½‘ç»œã€‚ 3. container:NAME_or_ID >//ä½¿ç”¨å…¶ä»–å®¹å™¨çš„ç½‘è·¯ï¼Œå…±äº« IP å’Œ PORT ç­‰ç½‘ç»œèµ„æºã€‚ 4. none å®¹å™¨ä½¿ç”¨è‡ªå·±çš„ç½‘ç»œï¼ˆç±»ä¼¼â€“net=bridgeï¼‰ï¼Œä½†æ˜¯ä¸è¿›è¡Œé…ç½®ã€‚ |
| â€“privileged=false | æŒ‡å®šå®¹å™¨æ˜¯å¦ä¸ºç‰¹æƒå®¹å™¨ï¼Œç‰¹æƒå®¹å™¨æ‹¥æœ‰æ‰€æœ‰çš„ capabilitiesã€‚ |
| â€“restart=â€œnoâ€ | æŒ‡å®šå®¹å™¨åœæ­¢åçš„é‡å¯ç­–ç•¥: (1) noï¼Œå®¹å™¨é€€å‡ºæ—¶ä¸é‡å¯ (2) on-failureï¼Œå®¹å™¨æ•…éšœé€€å‡ºï¼ˆè¿”å›å€¼éé›¶ï¼‰æ—¶é‡å¯ (3) on-failure:3ï¼ŒåŒä¸Šï¼Œæœ€å¤šé‡å¯ 3 æ¬¡ (4) alwaysï¼Œå®¹å™¨é€€å‡ºæ—¶æ€»æ˜¯é‡å¯ |
| â€“rm=false | æŒ‡å®šå®¹å™¨åœæ­¢åè‡ªåŠ¨åˆ é™¤å®¹å™¨(ä¸æ”¯æŒä»¥ docker run -d å¯åŠ¨çš„å®¹å™¨)ã€‚ |
| â€“sig-proxy=true | è®¾ç½®ç”±ä»£ç†æ¥å—å¹¶å¤„ç†ä¿¡å·ï¼Œä½†æ˜¯ SIGCHLDã€SIGSTOP å’Œ SIGKILL ä¸èƒ½è¢«ä»£ç†ã€‚ |</details><h2 id=dockerfile>Dockerfile</h2><p><strong>ä»€ä¹ˆæ˜¯ Dockerfileï¼Ÿ</strong></p><p>{% cq %}Dockerfile æ˜¯ä¸€ä¸ªç”¨æ¥æ„å»ºé•œåƒçš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ–‡æœ¬å†…å®¹åŒ…å«äº†ä¸€æ¡æ¡æ„å»ºé•œåƒæ‰€éœ€çš„æŒ‡ä»¤å’Œè¯´æ˜ã€‚{% endcq %}</p><p>{% note caution caution %}
Dockerfile çš„æŒ‡ä»¤æ¯æ‰§è¡Œä¸€æ¬¡éƒ½ä¼šåœ¨ docker ä¸Šæ–°å»ºä¸€å±‚ã€‚æ‰€ä»¥è¿‡å¤šæ— æ„ä¹‰çš„å±‚ï¼Œä¼šé€ æˆé•œåƒè†¨èƒ€è¿‡å¤§ã€‚
{% endnote %}</p><h2 id=docker-compose>Docker Compose</h2><blockquote><p>Compose æ˜¯ç”¨äºå®šä¹‰å’Œè¿è¡Œå¤šå®¹å™¨ Docker åº”ç”¨ç¨‹åºçš„å·¥å…·ã€‚é€šè¿‡ Composeï¼Œæ‚¨å¯ä»¥ä½¿ç”¨ YML æ–‡ä»¶æ¥é…ç½®åº”ç”¨ç¨‹åºéœ€è¦çš„æ‰€æœ‰æœåŠ¡ã€‚ç„¶åï¼Œä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œå°±å¯ä»¥ä» YML æ–‡ä»¶é…ç½®ä¸­åˆ›å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡ã€‚</p></blockquote><p>Compose ä½¿ç”¨æœ‰ä¸‰ä¸ªæ­¥éª¤ï¼š</p><ul><li>ä½¿ç”¨ <code>Dockerfile</code> å®šä¹‰åº”ç”¨ç¨‹åºçš„ç¯å¢ƒ</li><li>ä½¿ç”¨ <code>docker-compose.yml</code> å®šä¹‰æ„æˆåº”ç”¨ç¨‹åºçš„æœåŠ¡ï¼Œè¿™æ ·ä»–ä»¬å¯ä»¥åœ¨éš”ç¦»ç¯å¢ƒä¸­ä¸€èµ·è¿è¡Œ</li><li>æœ€åï¼Œæ‰§è¡Œ <code>docker-compose up</code> å‘½ä»¤æ¥å¯åŠ¨å¹¶è¿è¡Œæ•´ä¸ªåº”ç”¨ç¨‹åº</li></ul><p>çœ‹ä¸€ä¸ª <code>docker-compose.yml</code> æ–‡ä»¶ç¤ºä¾‹</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-yaml data-lang=yaml><span class=line><span class=cl><span class=nt>version</span><span class=p>:</span><span class=w> </span><span class=s1>&#39;3&#39;</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>services</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>web</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  	</span><span class=nt>container_name</span><span class=p>:</span><span class=w> </span><span class=l>dockerdev</span><span class=w> </span><span class=c># å®¹å™¨å</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>build</span><span class=p>:</span><span class=w> </span><span class=l>.</span><span class=w> </span><span class=c># åœ¨æœ¬ç›®å½•æ„å»º</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>ports</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    	</span>- <span class=s2>&#34;15000:5000&#34;</span><span class=w> </span><span class=c># å°†å®¹å™¨å†…çš„ 5000 ç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœºçš„ 15000 ç«¯å£</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>environment</span><span class=p>:</span><span class=w> </span><span class=c># ç¯å¢ƒå˜é‡</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    	</span><span class=nt>ACCESS_KEY</span><span class=p>:</span><span class=w> </span><span class=l>admin</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>volumes</span><span class=p>:</span><span class=w> </span><span class=c># æŒ‚è½½æ•°æ®å·ï¼ˆå†’å·å‰ä¸ºå®¿ä¸»æœºç›®å½•ï¼Œåä¸ºå®¹å™¨å†…ç›®å½•ï¼‰</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    	</span>- <span class=l>.:/code</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    	</span>- <span class=l>logvolume01:/var/log</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>links</span><span class=p>:</span><span class=w> </span><span class=c># é“¾æ¥å…¶ä»–å®¹å™¨</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    	</span>- <span class=l>redis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>redis</span><span class=p>:</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>    </span><span class=nt>image</span><span class=p>:</span><span class=w> </span><span class=l>redis</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w></span><span class=nt>volumes</span><span class=p>:</span><span class=w> </span><span class=c># æ•°æ®å·</span><span class=w>
</span></span></span><span class=line><span class=cl><span class=w>  </span><span class=nt>logvolume01</span><span class=p>:</span><span class=w> </span>{}<span class=w>
</span></span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker-compose up
</span></span><span class=line><span class=cl>docker-compose up -d <span class=c1># åå°å¯åŠ¨</span>
</span></span></code></pre></td></tr></table></div></div><h2 id=å®¹å™¨å¤‡ä»½>å®¹å™¨å¤‡ä»½</h2><h3 id=å¤‡ä»½>å¤‡ä»½</h3><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker ps -a
</span></span></code></pre></td></tr></table></div></div><p>å¤‡ä»½ grafana å®¹å™¨ï¼Œå®¹å™¨åä¸º grafanaï¼Œå®¹å™¨ id ä¸º ab8adb9ae93dï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ï¼š</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker commit -p ab8adb9ae93d grafana-backup
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker images
</span></span></code></pre></td></tr></table></div></div><p>æ­¤æ—¶å·²ç»æœ‰äº†ä¸€ä¸ªåä¸º grafana-backup çš„é•œåƒã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker save grafana-backup &gt; /home/ubuntu/Download/grafana-backup.tar
</span></span></code></pre></td></tr></table></div></div><h3 id=æ¢å¤>æ¢å¤</h3><ul><li><p>å°†å¤‡ä»½æ–‡ä»¶ä¸Šä¼ åˆ°éœ€è¦ä½¿ç”¨çš„æœåŠ¡å™¨</p></li><li><p>å¯¼å…¥</p></li></ul><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker load &lt; /home/ubuntu/Download/grafana-backup.tar
</span></span><span class=line><span class=cl>docker images
</span></span></code></pre></td></tr></table></div></div><p>å¯ä»¥çœ‹åˆ°ä¸€ä¸ªåä¸º grafana-backup çš„é•œåƒï¼Œå¯¼å…¥æˆåŠŸã€‚</p><h2 id=portainer-å¯è§†åŒ–>portainer å¯è§†åŒ–</h2><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker pull portainer/portainer-ce
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker volume create portainer_data
</span></span></code></pre></td></tr></table></div></div><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>docker run -d -p 8000:8000 -p 9000:9000 <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	--name<span class=o>=</span>portainer --restart<span class=o>=</span>always <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	-v /var/run/docker.sock:/var/run/docker.sock <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	-v portainer_data:/data <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>	portainer/portainer-ce
</span></span></code></pre></td></tr></table></div></div><h2 id=æ³¨æ„>æ³¨æ„</h2><h3 id=got-permission-denied>Got permission denied</h3><blockquote><p>Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get <a class=link href=http://%2Fvar%2Frun%2Fdocker.sock/v1.24/containers/json target=_blank rel=noopener>http://%2Fvar%2Frun%2Fdocker.sock/v1.24/containers/json</a>: dial unix /var/run/docker.sock: connect: permission denied</p></blockquote><p>docker è¿›ç¨‹ä½¿ç”¨ Unix Socket è€Œä¸æ˜¯ TCP ç«¯å£ã€‚è€Œé»˜è®¤æƒ…å†µä¸‹ï¼ŒUnix socket å±äº root ç”¨æˆ·ï¼Œéœ€è¦ root æƒé™æ‰èƒ½è®¿é—®ã€‚</p><blockquote><p><p>Manage Docker as a non-root user</p><p>The Docker daemon binds to a Unix socket, not a TCP port. By default it&rsquo;s the root user that owns the Unix socket, and other users can only access it using sudo. The Docker daemon always runs as the root user.</p><p>If you don&rsquo;t want to preface the docker command with sudo, create a Unix group called docker and add users to it. When the Docker daemon starts, it creates a Unix socket accessible by members of the docker group. On some Linux distributions, the system automatically creates this group when installing Docker Engine using a package manager. In that case, there is no need for you to manually create the group.</p></p><span class=cite><span>â€• </span><span>docker docs, </span><a href=https://docs.docker.com/engine/install/linux-postinstall/#manage-docker-as-a-non-root-user><cite>Linux post-installation steps for Docker Engine</cite></a></span></blockquote><p>é€šè¿‡ä¸‹é¢å‡ æ­¥æ“ä½œï¼Œå¯ä»¥å°†å½“å‰ç”¨æˆ·åŠ å…¥ docker ç»„ï¼Œä»¥åå†ä½¿ç”¨ docker å°±ä¸éœ€è¦è¾“å…¥ sudo äº†ã€‚</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl><span class=c1># å°†å½“å‰ç”¨æˆ·åŠ å…¥ docker ç»„</span>
</span></span><span class=line><span class=cl>sudo gpasswd -a <span class=si>${</span><span class=nv>USER</span><span class=si>}</span> docker
</span></span><span class=line><span class=cl><span class=c1># æ›´æ–° docker ç»„</span>
</span></span><span class=line><span class=cl>newgrp docker
</span></span><span class=line><span class=cl><span class=c1># é‡å¯ docker æœåŠ¡</span>
</span></span><span class=line><span class=cl>sudo systemctl restart docker
</span></span></code></pre></td></tr></table></div></div><h2 id=reference>Reference</h2><ul><li><p>Got permission denied | <a class=link href=https://www.cnblogs.com/Li-JT/p/13994704.html target=_blank rel=noopener>https://www.cnblogs.com/Li-JT/p/13994704.html</a></p></li><li><p><a class=link href=https://www.runoob.com/docker target=_blank rel=noopener>https://www.runoob.com/docker</a></p></li><li><p>dockerå¤‡ä»½å®¹å™¨åˆ°æœ¬åœ°ï¼ˆä»¥åŠæ¢å¤ï¼‰ | <a class=link href=https://blog.csdn.net/qq_20042935/article/details/106495071 target=_blank rel=noopener>https://blog.csdn.net/qq_20042935/article/details/106495071</a></p></li></ul></section><footer class=article-footer><section class=article-tags><a href=/tags/docker/>Docker</a></section><section class=article-copyright><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentcolor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z"/><circle cx="12" cy="12" r="9"/><path d="M14.5 9a3.5 4 0 100 6"/></svg><span>Licensed under CC BY-NC-SA 4.0</span></section></footer></article><script src=//cdn.jsdelivr.net/npm/twikoo@1.6.20/dist/twikoo.all.min.js></script><div id=tcomment></div><style>.twikoo{background-color:var(--card-background);border-radius:var(--card-border-radius);box-shadow:var(--shadow-l1);padding:var(--card-padding)}:root[data-scheme=dark]{--twikoo-body-text-color-main:rgba(255, 255, 255, 0.9);--twikoo-body-text-color:rgba(255, 255, 255, 0.7)}.twikoo .el-input-group__prepend,.twikoo .tk-action-icon,.twikoo .tk-time,.twikoo .tk-comments-count{color:var(--twikoo-body-text-color)}.twikoo .el-input__inner,.twikoo .el-textarea__inner,.twikoo .tk-preview-container,.twikoo .tk-content,.twikoo .tk-nick,.twikoo .tk-send{color:var(--twikoo-body-text-color-main)}.twikoo .el-button{color:var(--twikoo-body-text-color)!important}.OwO .OwO-body{background-color:var(--body-background)!important;color:var(--body-text-color)!important}</style><script>twikoo.init({envId:"https://comment.petrichor.net.cn",el:"#tcomment"})</script><footer class=site-footer><section class=copyright>&copy;
2020 -
2023 çš„å•Šè¾¾</section><section class=powerby>Built with <a href=https://gohugo.io/ target=_blank rel=noopener>Hugo</a><br>ä¸»é¢˜ <b><a href=https://github.com/CaiJimmy/hugo-theme-stack target=_blank rel=noopener data-version=3.20.0>Stack</a></b> ç”± <a href=https://jimmycai.com target=_blank rel=noopener>Jimmy</a> è®¾è®¡</section></footer><div class=pswp tabindex=-1 role=dialog aria-hidden=true><div class=pswp__bg></div><div class=pswp__scroll-wrap><div class=pswp__container><div class=pswp__item></div><div class=pswp__item></div><div class=pswp__item></div></div><div class="pswp__ui pswp__ui--hidden"><div class=pswp__top-bar><div class=pswp__counter></div><button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
<button class="pswp__button pswp__button--share" title=Share></button>
<button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
<button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button><div class=pswp__preloader><div class=pswp__preloader__icn><div class=pswp__preloader__cut><div class=pswp__preloader__donut></div></div></div></div></div><div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap"><div class=pswp__share-tooltip></div></div><button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)"></button>
<button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)"></button><div class=pswp__caption><div class=pswp__caption__center></div></div></div></div></div><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo=" crossorigin=anonymous defer></script><script src=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU=" crossorigin=anonymous defer></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css crossorigin=anonymous><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css crossorigin=anonymous></main></div><script src=https://cdn.jsdelivr.net/npm/node-vibrant@3.1.6/dist/vibrant.min.js integrity="sha256-awcR2jno4kI5X0zL8ex0vi2z+KMkF24hUW8WePSA9HM=" crossorigin=anonymous></script><script type=text/javascript src=/ts/main.js defer></script>
<script>(function(){const e=document.createElement("link");e.href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap",e.type="text/css",e.rel="stylesheet",document.head.appendChild(e)})()</script></body></html>