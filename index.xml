<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>的啊达</title><link>https://petrichor.net.cn/</link><description>Recent content on 的啊达</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><lastBuildDate>Fri, 22 Sep 2023 14:36:51 +0800</lastBuildDate><atom:link href="https://petrichor.net.cn/index.xml" rel="self" type="application/rss+xml"/><item><title>解决 VS Code 关闭以后项目文件夹仍被占用</title><link>https://petrichor.net.cn/p/vscode-the-folder-is-occupied/</link><pubDate>Fri, 22 Sep 2023 14:36:51 +0800</pubDate><guid>https://petrichor.net.cn/p/vscode-the-folder-is-occupied/</guid><description>&lt;p>Windows 下关了 VS Code 以后有时会发现项目文件夹仍然被占用，无法移动也无法重命名。&lt;/p>
&lt;ol>
&lt;li>打开资源管理器，在性能页面打开&lt;strong>资源监视器&lt;/strong>（Win10 在下方，Win11 在右上角三个点），或者也可以直接搜索。&lt;/li>
&lt;li>点击 CPU 一栏，在&lt;strong>关联的句柄&lt;/strong>后面的框里输入被占用的文件夹的名字，回车搜索。&lt;/li>
&lt;/ol>
&lt;p>我这里发现文件夹被 git 占用了，右键结束进程就好了。&lt;/p></description></item><item><title>在笔记本上跑一下大模型</title><link>https://petrichor.net.cn/p/chinese-llama-alpaca-2/</link><pubDate>Sun, 20 Aug 2023 12:08:49 +0800</pubDate><guid>https://petrichor.net.cn/p/chinese-llama-alpaca-2/</guid><description>&lt;p>我的笔记本：&lt;/p>
&lt;ul>
&lt;li>OS: Windows 11 家庭中文版 22H2&lt;/li>
&lt;li>CPU: Intel(R) Core(TM) i5-1035G7 CPU @ 1.20GHz 1.50 GHz&lt;/li>
&lt;li>GPU: MX250&lt;/li>
&lt;li>RAM: 16.0 GB&lt;/li>
&lt;/ul>
&lt;h2 id="简介">简介&lt;/h2>
&lt;p>LLaMA(Large Language Model Meta AI) 是 Meta 发布的大语言模型。2023年7月，Meta 公司发布了人工智能模型 LLaMA-2 的开源商用版本，意味着大模型应用进入了“免费时代”，初创公司也能够以低廉的价格来创建类似 ChatGPT 这样的聊天机器人。&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/p>
&lt;p>LLaMA-Alpaca-2 &lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup> 基于 Meta 发布的可商用大模型 Llama-2 开发，是中文 LLaMA &amp;amp; Alpaca 大模型的第二期项目，开源了中文 LLaMA-2 基座模型和 Alpaca-2 指令精调大模型。&lt;/p>
&lt;p>这些模型在原版 Llama-2 的基础上扩充并优化了中文词表，使用了大规模中文数据进行增量预训练，进一步提升了中文基础语义和指令理解能力，相比一代相关模型获得了显著性能提升。&lt;/p>
&lt;p>本文选择了最小的 7B 版本。&lt;/p>
&lt;h2 id="下载模型">下载模型&lt;/h2>
&lt;p>到项目的 Github 仓库上找到 &lt;a class="link" href="https://github.com/ymcui/Chinese-LLaMA-Alpaca-2#%e5%ae%8c%e6%95%b4%e6%a8%a1%e5%9e%8b%e4%b8%8b%e8%bd%bd" target="_blank" rel="noopener"
>完整模型下载链接&lt;/a>，选择合适的模型。&lt;/p>
&lt;p>我这里选择的是 Chinese-Alpaca-2-7B 指令模型，模型大小 12.9 GB，适用场景为指令理解：问答、写作、聊天、交互等。&lt;/p>
&lt;h2 id="部署">部署&lt;/h2>
&lt;h3 id="llamacpp-llamacpp">llama.cpp &lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>&lt;/h3>
&lt;p>Github 上的介绍如下：&lt;/p>
&lt;blockquote>
&lt;p>The main goal of llama.cpp is to run the LLaMA model using 4-bit integer quantization on a MacBook&lt;/p>
&lt;/blockquote>
&lt;p>在 Windows 上编译需要使用 CMake，第一次编译失败了，这里我们可以直接下载 &lt;a class="link" href="https://github.com/ggerganov/llama.cpp/releases" target="_blank" rel="noopener"
>Release&lt;/a>。&lt;!-- raw HTML omitted -->&lt;/p>
&lt;p>使用 llama.cpp 对模型进行量化 &lt;sup id="fnref:4">&lt;a href="#fn:4" class="footnote-ref" role="doc-noteref">4&lt;/a>&lt;/sup>，量化之后模型大小为 3.68G，精度降低但是内存要求小了很多。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">python3 convert.py --outtype f16 &amp;lt;你的hf模型目录&amp;gt;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 生成一个 ggml 格式的 bin 文件
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">quantize.exe &amp;lt;需要使用的f16/f32模型地址&amp;gt; &amp;lt;生成的q4模型地址&amp;gt; q4_0
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 llama.cpp 加载模型：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl"># 基本运行
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">main -m &amp;lt;q4模型bin文件路径&amp;gt; -p 你的prompt
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"># 交互问答
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">main -m &amp;lt;q4模型bin文件路径&amp;gt; -ins
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>到这里已经能正常使用了，接下来介绍另一个工具。&lt;/p>
&lt;h3 id="text-generation-webui">text-generation-webui&lt;/h3>
&lt;p>text-generation-webui &lt;sup id="fnref:5">&lt;a href="#fn:5" class="footnote-ref" role="doc-noteref">5&lt;/a>&lt;/sup> 是一个可以运行各种大模型的网页版部署工具。&lt;/p>
&lt;p>在打开的网页中，依次选择 &lt;code>Chat setting&lt;/code> -&amp;gt; &lt;code>Instruction template&lt;/code>，在 &lt;code>Instruction template&lt;/code> 中下拉选择 &lt;code>Llama-v2&lt;/code>，并将 Context 输入框中的 &lt;code>Answer the questions.&lt;/code> 提示语替换为 &lt;code>You are a helpful assistant. 你是一个乐于助人的助手。&lt;/code>，最后回到 Text generation 界面，在 &lt;code>input&lt;/code> 输入框中输入你的指令，即可与 chinese-alpaca-2 对话了。&lt;/p>
&lt;h2 id="最后">最后&lt;/h2>
&lt;p>一开始没有进行量化就跑了一下，风扇瞬间响起来了，紧接着鼠标开始变卡了，我当时是开着任务管理器的，切出来一看内存已经满了，应该是爆内存了。赶紧 Ctrl+C 把项目停下来，内存占用又下来了。&lt;/p>
&lt;p>打开我的电脑一看，C 盘就这一会儿的功夫已经少了十几个 G，变成了刺眼的红色，还好在重启之后又恢复了。&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a class="link" href="https://baike.baidu.com/item/LLaMA/62812215" target="_blank" rel="noopener"
>https://baike.baidu.com/item/LLaMA/62812215&lt;/a>&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>&lt;a class="link" href="https://github.com/ymcui/Chinese-LLaMA-Alpaca-2" target="_blank" rel="noopener"
>https://github.com/ymcui/Chinese-LLaMA-Alpaca-2&lt;/a>&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;a class="link" href="https://github.com/ggerganov/llama.cpp" target="_blank" rel="noopener"
>https://github.com/ggerganov/llama.cpp&lt;/a>&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:4">
&lt;p>&lt;a class="link" href="https://zhuanlan.zhihu.com/p/634120727" target="_blank" rel="noopener"
>https://zhuanlan.zhihu.com/p/634120727&lt;/a>&amp;#160;&lt;a href="#fnref:4" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:5">
&lt;p>&lt;a class="link" href="https://github.com/oobabooga/text-generation-webui" target="_blank" rel="noopener"
>https://github.com/oobabooga/text-generation-webui&lt;/a>&amp;#160;&lt;a href="#fnref:5" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>如何让 F1 不再打开帮助页面</title><link>https://petrichor.net.cn/p/stop-f1-opening-browser/</link><pubDate>Fri, 16 Sep 2022 16:12:18 +0800</pubDate><guid>https://petrichor.net.cn/p/stop-f1-opening-browser/</guid><description>&lt;p>在 Windows 中，按
&lt;kbd class="kbd-display">F1&lt;/kbd> 会使用浏览器打开帮助页面，而我的电脑
&lt;kbd class="kbd-display">F1&lt;/kbd> -
&lt;kbd class="kbd-display">F12&lt;/kbd> 默认是功能键，如果不小心按到
&lt;kbd class="kbd-display">F1&lt;/kbd> 就会打开浏览器，很烦。现在找到一个办法，可以把这个功能关掉。&lt;/p>
&lt;h2 id="方法">方法&lt;/h2>
&lt;p>使用管理员权限运行这个脚本：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">@echo off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">taskkill /f /im HelpPane.exe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">takeown /f %WinDir%\HelpPane.exe
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">icacls %WinDir%\HelpPane.exe /deny Everyone:(X)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>来源：&lt;a class="link" href="https://answers.microsoft.com/en-us/windows/forum/all/how-do-i-stop-f1-opening-a-browser-window-on-how/7f68f9b8-9d87-43a5-9a79-db87702254b5" target="_blank" rel="noopener"
>https://answers.microsoft.com/en-us/windows/forum/all/how-do-i-stop-f1-opening-a-browser-window-on-how/7f68f9b8-9d87-43a5-9a79-db87702254b5&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>输出&lt;/p>
&lt;blockquote>
&lt;p>成功: 已终止进程 &amp;ldquo;HelpPane.exe&amp;rdquo;，其 PID 为 5600。&lt;/p>
&lt;p>成功: 此文件(或文件夹): &amp;ldquo;C:\Windows\HelpPane.exe&amp;rdquo; 现在由用户 &amp;ldquo;？？\用户名&amp;rdquo; 所有。&lt;/p>
&lt;p>已处理的文件: C:\Windows\HelpPane.exe
已成功处理 1 个文件; 处理 0 个文件时失败&lt;/p>
&lt;/blockquote>
&lt;h2 id="命令详解">命令详解&lt;/h2>
&lt;h3 id="taskkillhttpsdocsmicrosoftcomzh-cnwindows-serveradministrationwindows-commandstaskkill">&lt;a class="link" href="https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/taskkill" target="_blank" rel="noopener"
>taskkill&lt;/a>&lt;/h3>
&lt;blockquote>
&lt;p>适用范围：Windows Server 2022、Windows Server 2019、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012&lt;/p>
&lt;/blockquote>
&lt;p>结束一个或多个任务或进程。 可以通过进程 ID 或图像名称结束进程。 您可以使用 &lt;a class="link" href="https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/tasklist" target="_blank" rel="noopener"
>tasklist 命令&lt;/a> 命令来确定进程 ID (PID) 以结束进程。&lt;/p>
&lt;blockquote>
&lt;p>备注：此命令替换 &lt;strong>kill&lt;/strong> 工具。&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">taskkill &lt;span class="o">[&lt;/span>/s &amp;lt;computer&amp;gt; &lt;span class="o">[&lt;/span>/u &lt;span class="o">[&lt;/span>&amp;lt;domain&amp;gt;&lt;span class="se">\]&lt;/span>&amp;lt;username&amp;gt; &lt;span class="o">[&lt;/span>/p &lt;span class="o">[&lt;/span>&amp;lt;password&amp;gt;&lt;span class="o">]]]]&lt;/span> &lt;span class="o">{[&lt;/span>/fi &amp;lt;filter&amp;gt;&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>...&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>/pid &amp;lt;processID&amp;gt; &lt;span class="p">|&lt;/span> /im &amp;lt;imagename&amp;gt;&lt;span class="o">]}&lt;/span> &lt;span class="o">[&lt;/span>/f&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>/t&lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="takeownhttpsdocsmicrosoftcomzh-cnwindows-serveradministrationwindows-commandstakeown">&lt;a class="link" href="https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/takeown" target="_blank" rel="noopener"
>takeown&lt;/a>&lt;/h3>
&lt;p>使管理员作为文件的所有者，恢复对之前被拒文件的访问权限。 此命令通常用于批处理文件。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">takeown &lt;span class="o">[&lt;/span>/s &amp;lt;computer&amp;gt; &lt;span class="o">[&lt;/span>/u &lt;span class="o">[&lt;/span>&amp;lt;domain&amp;gt;&lt;span class="se">\]&lt;/span>&amp;lt;username&amp;gt; &lt;span class="o">[&lt;/span>/p &lt;span class="o">[&lt;/span>&amp;lt;password&amp;gt;&lt;span class="o">]]]]&lt;/span> /f &amp;lt;filename&amp;gt; &lt;span class="o">[&lt;/span>/a&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>/r &lt;span class="o">[&lt;/span>/d &lt;span class="o">{&lt;/span>Y&lt;span class="p">|&lt;/span>N&lt;span class="o">}]]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="icaclshttpsdocsmicrosoftcomzh-cnwindows-serveradministrationwindows-commandsicacls">&lt;a class="link" href="https://docs.microsoft.com/zh-cn/windows-server/administration/windows-commands/icacls" target="_blank" rel="noopener"
>icacls&lt;/a>&lt;/h3>
&lt;p>显示或修改指定文件上的随机访问控制列表 (DACL)，并将存储的 DACL 应用于指定目录中的文件。&lt;/p>
&lt;blockquote>
&lt;p>备注：此命令替换已弃用 的 &lt;a class="link" href="https://learn.microsoft.com/zh-cn/windows-server/administration/windows-commands/cacls" target="_blank" rel="noopener"
>cacls 命令&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">icacls &amp;lt;filename&amp;gt; &lt;span class="o">[&lt;/span>/grant&lt;span class="o">[&lt;/span>:r&lt;span class="o">]&lt;/span> &amp;lt;sid&amp;gt;:&amp;lt;perm&amp;gt;&lt;span class="o">[&lt;/span>...&lt;span class="o">]]&lt;/span> &lt;span class="o">[&lt;/span>/deny &amp;lt;sid&amp;gt;:&amp;lt;perm&amp;gt;&lt;span class="o">[&lt;/span>...&lt;span class="o">]]&lt;/span> &lt;span class="o">[&lt;/span>/remove&lt;span class="o">[&lt;/span>:g&lt;span class="p">|&lt;/span>:d&lt;span class="o">]]&lt;/span> &amp;lt;sid&amp;gt;&lt;span class="o">[&lt;/span>...&lt;span class="o">]]&lt;/span> &lt;span class="o">[&lt;/span>/t&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>/c&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>/l&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>/q&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>/setintegritylevel &amp;lt;Level&amp;gt;:&amp;lt;policy&amp;gt;&lt;span class="o">[&lt;/span>...&lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">icacls &amp;lt;directory&amp;gt; &lt;span class="o">[&lt;/span>/substitute &amp;lt;sidold&amp;gt; &amp;lt;sidnew&amp;gt; &lt;span class="o">[&lt;/span>...&lt;span class="o">]]&lt;/span> &lt;span class="o">[&lt;/span>/restore &amp;lt;aclfile&amp;gt; &lt;span class="o">[&lt;/span>/c&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>/l&lt;span class="o">]&lt;/span> &lt;span class="o">[&lt;/span>/q&lt;span class="o">]]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>HTTP 中的 Content-Type</title><link>https://petrichor.net.cn/p/http-content-type/</link><pubDate>Fri, 06 May 2022 20:15:31 +0800</pubDate><guid>https://petrichor.net.cn/p/http-content-type/</guid><description>&lt;h2 id="http-content-type-对照表">HTTP content-type 对照表&lt;/h2>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">文件扩展名&lt;/th>
&lt;th style="text-align:left">Content-Type(Mime-Type)&lt;/th>
&lt;th style="text-align:left">文件扩展名&lt;/th>
&lt;th style="text-align:left">Content-Type(Mime-Type)&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">.*（ 二进制流，不知道下载文件类型）&lt;/td>
&lt;td style="text-align:left">application/octet-stream&lt;/td>
&lt;td style="text-align:left">.tif&lt;/td>
&lt;td style="text-align:left">image/tiff&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.001&lt;/td>
&lt;td style="text-align:left">application/x-001&lt;/td>
&lt;td style="text-align:left">.301&lt;/td>
&lt;td style="text-align:left">application/x-301&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.323&lt;/td>
&lt;td style="text-align:left">text/h323&lt;/td>
&lt;td style="text-align:left">.906&lt;/td>
&lt;td style="text-align:left">application/x-906&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.907&lt;/td>
&lt;td style="text-align:left">drawing/907&lt;/td>
&lt;td style="text-align:left">.a11&lt;/td>
&lt;td style="text-align:left">application/x-a11&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.acp&lt;/td>
&lt;td style="text-align:left">audio/x-mei-aac&lt;/td>
&lt;td style="text-align:left">.ai&lt;/td>
&lt;td style="text-align:left">application/postscript&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.aif&lt;/td>
&lt;td style="text-align:left">audio/aiff&lt;/td>
&lt;td style="text-align:left">.aifc&lt;/td>
&lt;td style="text-align:left">audio/aiff&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.aiff&lt;/td>
&lt;td style="text-align:left">audio/aiff&lt;/td>
&lt;td style="text-align:left">.anv&lt;/td>
&lt;td style="text-align:left">application/x-anv&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.asa&lt;/td>
&lt;td style="text-align:left">text/asa&lt;/td>
&lt;td style="text-align:left">.asf&lt;/td>
&lt;td style="text-align:left">video/x-ms-asf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.asp&lt;/td>
&lt;td style="text-align:left">text/asp&lt;/td>
&lt;td style="text-align:left">.asx&lt;/td>
&lt;td style="text-align:left">video/x-ms-asf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.au&lt;/td>
&lt;td style="text-align:left">audio/basic&lt;/td>
&lt;td style="text-align:left">.avi&lt;/td>
&lt;td style="text-align:left">video/avi&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.awf&lt;/td>
&lt;td style="text-align:left">application/vnd.adobe.workflow&lt;/td>
&lt;td style="text-align:left">.biz&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.bmp&lt;/td>
&lt;td style="text-align:left">application/x-bmp&lt;/td>
&lt;td style="text-align:left">.bot&lt;/td>
&lt;td style="text-align:left">application/x-bot&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.c4t&lt;/td>
&lt;td style="text-align:left">application/x-c4t&lt;/td>
&lt;td style="text-align:left">.c90&lt;/td>
&lt;td style="text-align:left">application/x-c90&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.cal&lt;/td>
&lt;td style="text-align:left">application/x-cals&lt;/td>
&lt;td style="text-align:left">.cat&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-pki.seccat&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.cdf&lt;/td>
&lt;td style="text-align:left">application/x-netcdf&lt;/td>
&lt;td style="text-align:left">.cdr&lt;/td>
&lt;td style="text-align:left">application/x-cdr&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.cel&lt;/td>
&lt;td style="text-align:left">application/x-cel&lt;/td>
&lt;td style="text-align:left">.cer&lt;/td>
&lt;td style="text-align:left">application/x-x509-ca-cert&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.cg4&lt;/td>
&lt;td style="text-align:left">application/x-g4&lt;/td>
&lt;td style="text-align:left">.cgm&lt;/td>
&lt;td style="text-align:left">application/x-cgm&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.cit&lt;/td>
&lt;td style="text-align:left">application/x-cit&lt;/td>
&lt;td style="text-align:left">.class&lt;/td>
&lt;td style="text-align:left">java/*&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.cml&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;td style="text-align:left">.cmp&lt;/td>
&lt;td style="text-align:left">application/x-cmp&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.cmx&lt;/td>
&lt;td style="text-align:left">application/x-cmx&lt;/td>
&lt;td style="text-align:left">.cot&lt;/td>
&lt;td style="text-align:left">application/x-cot&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.crl&lt;/td>
&lt;td style="text-align:left">application/pkix-crl&lt;/td>
&lt;td style="text-align:left">.crt&lt;/td>
&lt;td style="text-align:left">application/x-x509-ca-cert&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.csi&lt;/td>
&lt;td style="text-align:left">application/x-csi&lt;/td>
&lt;td style="text-align:left">.css&lt;/td>
&lt;td style="text-align:left">text/css&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.cut&lt;/td>
&lt;td style="text-align:left">application/x-cut&lt;/td>
&lt;td style="text-align:left">.dbf&lt;/td>
&lt;td style="text-align:left">application/x-dbf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.dbm&lt;/td>
&lt;td style="text-align:left">application/x-dbm&lt;/td>
&lt;td style="text-align:left">.dbx&lt;/td>
&lt;td style="text-align:left">application/x-dbx&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.dcd&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;td style="text-align:left">.dcx&lt;/td>
&lt;td style="text-align:left">application/x-dcx&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.der&lt;/td>
&lt;td style="text-align:left">application/x-x509-ca-cert&lt;/td>
&lt;td style="text-align:left">.dgn&lt;/td>
&lt;td style="text-align:left">application/x-dgn&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.dib&lt;/td>
&lt;td style="text-align:left">application/x-dib&lt;/td>
&lt;td style="text-align:left">.dll&lt;/td>
&lt;td style="text-align:left">application/x-msdownload&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.doc&lt;/td>
&lt;td style="text-align:left">application/msword&lt;/td>
&lt;td style="text-align:left">.dot&lt;/td>
&lt;td style="text-align:left">application/msword&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.drw&lt;/td>
&lt;td style="text-align:left">application/x-drw&lt;/td>
&lt;td style="text-align:left">.dtd&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.dwf&lt;/td>
&lt;td style="text-align:left">Model/vnd.dwf&lt;/td>
&lt;td style="text-align:left">.dwf&lt;/td>
&lt;td style="text-align:left">application/x-dwf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.dwg&lt;/td>
&lt;td style="text-align:left">application/x-dwg&lt;/td>
&lt;td style="text-align:left">.dxb&lt;/td>
&lt;td style="text-align:left">application/x-dxb&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.dxf&lt;/td>
&lt;td style="text-align:left">application/x-dxf&lt;/td>
&lt;td style="text-align:left">.edn&lt;/td>
&lt;td style="text-align:left">application/vnd.adobe.edn&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.emf&lt;/td>
&lt;td style="text-align:left">application/x-emf&lt;/td>
&lt;td style="text-align:left">.eml&lt;/td>
&lt;td style="text-align:left">message/rfc822&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.ent&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;td style="text-align:left">.epi&lt;/td>
&lt;td style="text-align:left">application/x-epi&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.eps&lt;/td>
&lt;td style="text-align:left">application/x-ps&lt;/td>
&lt;td style="text-align:left">.eps&lt;/td>
&lt;td style="text-align:left">application/postscript&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.etd&lt;/td>
&lt;td style="text-align:left">application/x-ebx&lt;/td>
&lt;td style="text-align:left">.exe&lt;/td>
&lt;td style="text-align:left">application/x-msdownload&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.fax&lt;/td>
&lt;td style="text-align:left">image/fax&lt;/td>
&lt;td style="text-align:left">.fdf&lt;/td>
&lt;td style="text-align:left">application/vnd.fdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.fif&lt;/td>
&lt;td style="text-align:left">application/fractals&lt;/td>
&lt;td style="text-align:left">.fo&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.frm&lt;/td>
&lt;td style="text-align:left">application/x-frm&lt;/td>
&lt;td style="text-align:left">.g4&lt;/td>
&lt;td style="text-align:left">application/x-g4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.gbr&lt;/td>
&lt;td style="text-align:left">application/x-gbr&lt;/td>
&lt;td style="text-align:left">.&lt;/td>
&lt;td style="text-align:left">application/x-&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.gif&lt;/td>
&lt;td style="text-align:left">image/gif&lt;/td>
&lt;td style="text-align:left">.gl2&lt;/td>
&lt;td style="text-align:left">application/x-gl2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.gp4&lt;/td>
&lt;td style="text-align:left">application/x-gp4&lt;/td>
&lt;td style="text-align:left">.hgl&lt;/td>
&lt;td style="text-align:left">application/x-hgl&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.hmr&lt;/td>
&lt;td style="text-align:left">application/x-hmr&lt;/td>
&lt;td style="text-align:left">.hpg&lt;/td>
&lt;td style="text-align:left">application/x-hpgl&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.hpl&lt;/td>
&lt;td style="text-align:left">application/x-hpl&lt;/td>
&lt;td style="text-align:left">.hqx&lt;/td>
&lt;td style="text-align:left">application/mac-binhex40&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.hrf&lt;/td>
&lt;td style="text-align:left">application/x-hrf&lt;/td>
&lt;td style="text-align:left">.hta&lt;/td>
&lt;td style="text-align:left">application/hta&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.htc&lt;/td>
&lt;td style="text-align:left">text/x-component&lt;/td>
&lt;td style="text-align:left">.htm&lt;/td>
&lt;td style="text-align:left">text/html&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.html&lt;/td>
&lt;td style="text-align:left">text/html&lt;/td>
&lt;td style="text-align:left">.htt&lt;/td>
&lt;td style="text-align:left">text/webviewhtml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.htx&lt;/td>
&lt;td style="text-align:left">text/html&lt;/td>
&lt;td style="text-align:left">.icb&lt;/td>
&lt;td style="text-align:left">application/x-icb&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.ico&lt;/td>
&lt;td style="text-align:left">image/x-icon&lt;/td>
&lt;td style="text-align:left">.ico&lt;/td>
&lt;td style="text-align:left">application/x-ico&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.iff&lt;/td>
&lt;td style="text-align:left">application/x-iff&lt;/td>
&lt;td style="text-align:left">.ig4&lt;/td>
&lt;td style="text-align:left">application/x-g4&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.igs&lt;/td>
&lt;td style="text-align:left">application/x-igs&lt;/td>
&lt;td style="text-align:left">.iii&lt;/td>
&lt;td style="text-align:left">application/x-iphone&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.img&lt;/td>
&lt;td style="text-align:left">application/x-img&lt;/td>
&lt;td style="text-align:left">.ins&lt;/td>
&lt;td style="text-align:left">application/x-internet-signup&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.isp&lt;/td>
&lt;td style="text-align:left">application/x-internet-signup&lt;/td>
&lt;td style="text-align:left">.IVF&lt;/td>
&lt;td style="text-align:left">video/x-ivf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.java&lt;/td>
&lt;td style="text-align:left">java/*&lt;/td>
&lt;td style="text-align:left">.jfif&lt;/td>
&lt;td style="text-align:left">image/jpeg&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.jpe&lt;/td>
&lt;td style="text-align:left">image/jpeg&lt;/td>
&lt;td style="text-align:left">.jpe&lt;/td>
&lt;td style="text-align:left">application/x-jpe&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.jpeg&lt;/td>
&lt;td style="text-align:left">image/jpeg&lt;/td>
&lt;td style="text-align:left">.jpg&lt;/td>
&lt;td style="text-align:left">image/jpeg&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.jpg&lt;/td>
&lt;td style="text-align:left">application/x-jpg&lt;/td>
&lt;td style="text-align:left">.js&lt;/td>
&lt;td style="text-align:left">application/x-javascript&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.jsp&lt;/td>
&lt;td style="text-align:left">text/html&lt;/td>
&lt;td style="text-align:left">.la1&lt;/td>
&lt;td style="text-align:left">audio/x-liquid-file&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.lar&lt;/td>
&lt;td style="text-align:left">application/x-laplayer-reg&lt;/td>
&lt;td style="text-align:left">.latex&lt;/td>
&lt;td style="text-align:left">application/x-latex&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.lavs&lt;/td>
&lt;td style="text-align:left">audio/x-liquid-secure&lt;/td>
&lt;td style="text-align:left">.lbm&lt;/td>
&lt;td style="text-align:left">application/x-lbm&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.lmsff&lt;/td>
&lt;td style="text-align:left">audio/x-la-lms&lt;/td>
&lt;td style="text-align:left">.ls&lt;/td>
&lt;td style="text-align:left">application/x-javascript&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.ltr&lt;/td>
&lt;td style="text-align:left">application/x-ltr&lt;/td>
&lt;td style="text-align:left">.m1v&lt;/td>
&lt;td style="text-align:left">video/x-mpeg&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.m2v&lt;/td>
&lt;td style="text-align:left">video/x-mpeg&lt;/td>
&lt;td style="text-align:left">.m3u&lt;/td>
&lt;td style="text-align:left">audio/mpegurl&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.m4e&lt;/td>
&lt;td style="text-align:left">video/mpeg4&lt;/td>
&lt;td style="text-align:left">.mac&lt;/td>
&lt;td style="text-align:left">application/x-mac&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.man&lt;/td>
&lt;td style="text-align:left">application/x-troff-man&lt;/td>
&lt;td style="text-align:left">.math&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mdb&lt;/td>
&lt;td style="text-align:left">application/msaccess&lt;/td>
&lt;td style="text-align:left">.mdb&lt;/td>
&lt;td style="text-align:left">application/x-mdb&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mfp&lt;/td>
&lt;td style="text-align:left">application/x-shockwave-flash&lt;/td>
&lt;td style="text-align:left">.mht&lt;/td>
&lt;td style="text-align:left">message/rfc822&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mhtml&lt;/td>
&lt;td style="text-align:left">message/rfc822&lt;/td>
&lt;td style="text-align:left">.mi&lt;/td>
&lt;td style="text-align:left">application/x-mi&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mid&lt;/td>
&lt;td style="text-align:left">audio/mid&lt;/td>
&lt;td style="text-align:left">.midi&lt;/td>
&lt;td style="text-align:left">audio/mid&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mil&lt;/td>
&lt;td style="text-align:left">application/x-mil&lt;/td>
&lt;td style="text-align:left">.mml&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mnd&lt;/td>
&lt;td style="text-align:left">audio/x-musicnet-download&lt;/td>
&lt;td style="text-align:left">.mns&lt;/td>
&lt;td style="text-align:left">audio/x-musicnet-stream&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mocha&lt;/td>
&lt;td style="text-align:left">application/x-javascript&lt;/td>
&lt;td style="text-align:left">.movie&lt;/td>
&lt;td style="text-align:left">video/x-sgi-movie&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mp1&lt;/td>
&lt;td style="text-align:left">audio/mp1&lt;/td>
&lt;td style="text-align:left">.mp2&lt;/td>
&lt;td style="text-align:left">audio/mp2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mp2v&lt;/td>
&lt;td style="text-align:left">video/mpeg&lt;/td>
&lt;td style="text-align:left">.mp3&lt;/td>
&lt;td style="text-align:left">audio/mp3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mp4&lt;/td>
&lt;td style="text-align:left">video/mpeg4&lt;/td>
&lt;td style="text-align:left">.mpa&lt;/td>
&lt;td style="text-align:left">video/x-mpg&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mpd&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-project&lt;/td>
&lt;td style="text-align:left">.mpe&lt;/td>
&lt;td style="text-align:left">video/x-mpeg&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mpeg&lt;/td>
&lt;td style="text-align:left">video/mpg&lt;/td>
&lt;td style="text-align:left">.mpg&lt;/td>
&lt;td style="text-align:left">video/mpg&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mpga&lt;/td>
&lt;td style="text-align:left">audio/rn-mpeg&lt;/td>
&lt;td style="text-align:left">.mpp&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-project&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mps&lt;/td>
&lt;td style="text-align:left">video/x-mpeg&lt;/td>
&lt;td style="text-align:left">.mpt&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-project&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mpv&lt;/td>
&lt;td style="text-align:left">video/mpg&lt;/td>
&lt;td style="text-align:left">.mpv2&lt;/td>
&lt;td style="text-align:left">video/mpeg&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mpw&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-project&lt;/td>
&lt;td style="text-align:left">.mpx&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-project&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.mtx&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;td style="text-align:left">.mxp&lt;/td>
&lt;td style="text-align:left">application/x-mmxp&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.net&lt;/td>
&lt;td style="text-align:left">image/pnetvue&lt;/td>
&lt;td style="text-align:left">.nrf&lt;/td>
&lt;td style="text-align:left">application/x-nrf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.nws&lt;/td>
&lt;td style="text-align:left">message/rfc822&lt;/td>
&lt;td style="text-align:left">.odc&lt;/td>
&lt;td style="text-align:left">text/x-ms-odc&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.out&lt;/td>
&lt;td style="text-align:left">application/x-out&lt;/td>
&lt;td style="text-align:left">.p10&lt;/td>
&lt;td style="text-align:left">application/pkcs10&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.p12&lt;/td>
&lt;td style="text-align:left">application/x-pkcs12&lt;/td>
&lt;td style="text-align:left">.p7b&lt;/td>
&lt;td style="text-align:left">application/x-pkcs7-certificates&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.p7c&lt;/td>
&lt;td style="text-align:left">application/pkcs7-mime&lt;/td>
&lt;td style="text-align:left">.p7m&lt;/td>
&lt;td style="text-align:left">application/pkcs7-mime&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.p7r&lt;/td>
&lt;td style="text-align:left">application/x-pkcs7-certreqresp&lt;/td>
&lt;td style="text-align:left">.p7s&lt;/td>
&lt;td style="text-align:left">application/pkcs7-signature&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.pc5&lt;/td>
&lt;td style="text-align:left">application/x-pc5&lt;/td>
&lt;td style="text-align:left">.pci&lt;/td>
&lt;td style="text-align:left">application/x-pci&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.pcl&lt;/td>
&lt;td style="text-align:left">application/x-pcl&lt;/td>
&lt;td style="text-align:left">.pcx&lt;/td>
&lt;td style="text-align:left">application/x-pcx&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.pdf&lt;/td>
&lt;td style="text-align:left">application/pdf&lt;/td>
&lt;td style="text-align:left">.pdf&lt;/td>
&lt;td style="text-align:left">application/pdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.pdx&lt;/td>
&lt;td style="text-align:left">application/vnd.adobe.pdx&lt;/td>
&lt;td style="text-align:left">.pfx&lt;/td>
&lt;td style="text-align:left">application/x-pkcs12&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.pgl&lt;/td>
&lt;td style="text-align:left">application/x-pgl&lt;/td>
&lt;td style="text-align:left">.pic&lt;/td>
&lt;td style="text-align:left">application/x-pic&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.pko&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-pki.pko&lt;/td>
&lt;td style="text-align:left">.pl&lt;/td>
&lt;td style="text-align:left">application/x-perl&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.plg&lt;/td>
&lt;td style="text-align:left">text/html&lt;/td>
&lt;td style="text-align:left">.pls&lt;/td>
&lt;td style="text-align:left">audio/scpls&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.plt&lt;/td>
&lt;td style="text-align:left">application/x-plt&lt;/td>
&lt;td style="text-align:left">.png&lt;/td>
&lt;td style="text-align:left">image/png&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.png&lt;/td>
&lt;td style="text-align:left">application/x-png&lt;/td>
&lt;td style="text-align:left">.pot&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-powerpoint&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.ppa&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-powerpoint&lt;/td>
&lt;td style="text-align:left">.ppm&lt;/td>
&lt;td style="text-align:left">application/x-ppm&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.pps&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-powerpoint&lt;/td>
&lt;td style="text-align:left">.ppt&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-powerpoint&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.ppt&lt;/td>
&lt;td style="text-align:left">application/x-ppt&lt;/td>
&lt;td style="text-align:left">.pr&lt;/td>
&lt;td style="text-align:left">application/x-pr&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.prf&lt;/td>
&lt;td style="text-align:left">application/pics-rules&lt;/td>
&lt;td style="text-align:left">.prn&lt;/td>
&lt;td style="text-align:left">application/x-prn&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.prt&lt;/td>
&lt;td style="text-align:left">application/x-prt&lt;/td>
&lt;td style="text-align:left">.ps&lt;/td>
&lt;td style="text-align:left">application/x-ps&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.ps&lt;/td>
&lt;td style="text-align:left">application/postscript&lt;/td>
&lt;td style="text-align:left">.ptn&lt;/td>
&lt;td style="text-align:left">application/x-ptn&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.pwz&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-powerpoint&lt;/td>
&lt;td style="text-align:left">.r3t&lt;/td>
&lt;td style="text-align:left">text/vnd.rn-realtext3d&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.ra&lt;/td>
&lt;td style="text-align:left">audio/vnd.rn-realaudio&lt;/td>
&lt;td style="text-align:left">.ram&lt;/td>
&lt;td style="text-align:left">audio/x-pn-realaudio&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.ras&lt;/td>
&lt;td style="text-align:left">application/x-ras&lt;/td>
&lt;td style="text-align:left">.rat&lt;/td>
&lt;td style="text-align:left">application/rat-file&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.rdf&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;td style="text-align:left">.rec&lt;/td>
&lt;td style="text-align:left">application/vnd.rn-recording&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.red&lt;/td>
&lt;td style="text-align:left">application/x-red&lt;/td>
&lt;td style="text-align:left">.rgb&lt;/td>
&lt;td style="text-align:left">application/x-rgb&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.rjs&lt;/td>
&lt;td style="text-align:left">application/vnd.rn-realsystem-rjs&lt;/td>
&lt;td style="text-align:left">.rjt&lt;/td>
&lt;td style="text-align:left">application/vnd.rn-realsystem-rjt&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.rlc&lt;/td>
&lt;td style="text-align:left">application/x-rlc&lt;/td>
&lt;td style="text-align:left">.rle&lt;/td>
&lt;td style="text-align:left">application/x-rle&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.rm&lt;/td>
&lt;td style="text-align:left">application/vnd.rn-realmedia&lt;/td>
&lt;td style="text-align:left">.rmf&lt;/td>
&lt;td style="text-align:left">application/vnd.adobe.rmf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.rmi&lt;/td>
&lt;td style="text-align:left">audio/mid&lt;/td>
&lt;td style="text-align:left">.rmj&lt;/td>
&lt;td style="text-align:left">application/vnd.rn-realsystem-rmj&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.rmm&lt;/td>
&lt;td style="text-align:left">audio/x-pn-realaudio&lt;/td>
&lt;td style="text-align:left">.rmp&lt;/td>
&lt;td style="text-align:left">application/vnd.rn-rn_music_package&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.rms&lt;/td>
&lt;td style="text-align:left">application/vnd.rn-realmedia-secure&lt;/td>
&lt;td style="text-align:left">.rmvb&lt;/td>
&lt;td style="text-align:left">application/vnd.rn-realmedia-vbr&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.rmx&lt;/td>
&lt;td style="text-align:left">application/vnd.rn-realsystem-rmx&lt;/td>
&lt;td style="text-align:left">.rnx&lt;/td>
&lt;td style="text-align:left">application/vnd.rn-realplayer&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.rp&lt;/td>
&lt;td style="text-align:left">image/vnd.rn-realpix&lt;/td>
&lt;td style="text-align:left">.rpm&lt;/td>
&lt;td style="text-align:left">audio/x-pn-realaudio-plugin&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.rsml&lt;/td>
&lt;td style="text-align:left">application/vnd.rn-rsml&lt;/td>
&lt;td style="text-align:left">.rt&lt;/td>
&lt;td style="text-align:left">text/vnd.rn-realtext&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.rtf&lt;/td>
&lt;td style="text-align:left">application/msword&lt;/td>
&lt;td style="text-align:left">.rtf&lt;/td>
&lt;td style="text-align:left">application/x-rtf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.rv&lt;/td>
&lt;td style="text-align:left">video/vnd.rn-realvideo&lt;/td>
&lt;td style="text-align:left">.sam&lt;/td>
&lt;td style="text-align:left">application/x-sam&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.sat&lt;/td>
&lt;td style="text-align:left">application/x-sat&lt;/td>
&lt;td style="text-align:left">.sdp&lt;/td>
&lt;td style="text-align:left">application/sdp&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.sdw&lt;/td>
&lt;td style="text-align:left">application/x-sdw&lt;/td>
&lt;td style="text-align:left">.sit&lt;/td>
&lt;td style="text-align:left">application/x-stuffit&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.slb&lt;/td>
&lt;td style="text-align:left">application/x-slb&lt;/td>
&lt;td style="text-align:left">.sld&lt;/td>
&lt;td style="text-align:left">application/x-sld&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.slk&lt;/td>
&lt;td style="text-align:left">drawing/x-slk&lt;/td>
&lt;td style="text-align:left">.smi&lt;/td>
&lt;td style="text-align:left">application/smil&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.smil&lt;/td>
&lt;td style="text-align:left">application/smil&lt;/td>
&lt;td style="text-align:left">.smk&lt;/td>
&lt;td style="text-align:left">application/x-smk&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.snd&lt;/td>
&lt;td style="text-align:left">audio/basic&lt;/td>
&lt;td style="text-align:left">.sol&lt;/td>
&lt;td style="text-align:left">text/plain&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.sor&lt;/td>
&lt;td style="text-align:left">text/plain&lt;/td>
&lt;td style="text-align:left">.spc&lt;/td>
&lt;td style="text-align:left">application/x-pkcs7-certificates&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.spl&lt;/td>
&lt;td style="text-align:left">application/futuresplash&lt;/td>
&lt;td style="text-align:left">.spp&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.ssm&lt;/td>
&lt;td style="text-align:left">application/streamingmedia&lt;/td>
&lt;td style="text-align:left">.sst&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-pki.certstore&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.stl&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-pki.stl&lt;/td>
&lt;td style="text-align:left">.stm&lt;/td>
&lt;td style="text-align:left">text/html&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.sty&lt;/td>
&lt;td style="text-align:left">application/x-sty&lt;/td>
&lt;td style="text-align:left">.svg&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.swf&lt;/td>
&lt;td style="text-align:left">application/x-shockwave-flash&lt;/td>
&lt;td style="text-align:left">.tdf&lt;/td>
&lt;td style="text-align:left">application/x-tdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.tg4&lt;/td>
&lt;td style="text-align:left">application/x-tg4&lt;/td>
&lt;td style="text-align:left">.tga&lt;/td>
&lt;td style="text-align:left">application/x-tga&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.tif&lt;/td>
&lt;td style="text-align:left">image/tiff&lt;/td>
&lt;td style="text-align:left">.tif&lt;/td>
&lt;td style="text-align:left">application/x-tif&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.tiff&lt;/td>
&lt;td style="text-align:left">image/tiff&lt;/td>
&lt;td style="text-align:left">.tld&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.top&lt;/td>
&lt;td style="text-align:left">drawing/x-top&lt;/td>
&lt;td style="text-align:left">.torrent&lt;/td>
&lt;td style="text-align:left">application/x-bittorrent&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.tsd&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;td style="text-align:left">.txt&lt;/td>
&lt;td style="text-align:left">text/plain&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.uin&lt;/td>
&lt;td style="text-align:left">application/x-icq&lt;/td>
&lt;td style="text-align:left">.uls&lt;/td>
&lt;td style="text-align:left">text/iuls&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.vcf&lt;/td>
&lt;td style="text-align:left">text/x-vcard&lt;/td>
&lt;td style="text-align:left">.vda&lt;/td>
&lt;td style="text-align:left">application/x-vda&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.vdx&lt;/td>
&lt;td style="text-align:left">application/vnd.visio&lt;/td>
&lt;td style="text-align:left">.vml&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.vpg&lt;/td>
&lt;td style="text-align:left">application/x-vpeg005&lt;/td>
&lt;td style="text-align:left">.vsd&lt;/td>
&lt;td style="text-align:left">application/vnd.visio&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.vsd&lt;/td>
&lt;td style="text-align:left">application/x-vsd&lt;/td>
&lt;td style="text-align:left">.vss&lt;/td>
&lt;td style="text-align:left">application/vnd.visio&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.vst&lt;/td>
&lt;td style="text-align:left">application/vnd.visio&lt;/td>
&lt;td style="text-align:left">.vst&lt;/td>
&lt;td style="text-align:left">application/x-vst&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.vsw&lt;/td>
&lt;td style="text-align:left">application/vnd.visio&lt;/td>
&lt;td style="text-align:left">.vsx&lt;/td>
&lt;td style="text-align:left">application/vnd.visio&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.vtx&lt;/td>
&lt;td style="text-align:left">application/vnd.visio&lt;/td>
&lt;td style="text-align:left">.vxml&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.wav&lt;/td>
&lt;td style="text-align:left">audio/wav&lt;/td>
&lt;td style="text-align:left">.wax&lt;/td>
&lt;td style="text-align:left">audio/x-ms-wax&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.wb1&lt;/td>
&lt;td style="text-align:left">application/x-wb1&lt;/td>
&lt;td style="text-align:left">.wb2&lt;/td>
&lt;td style="text-align:left">application/x-wb2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.wb3&lt;/td>
&lt;td style="text-align:left">application/x-wb3&lt;/td>
&lt;td style="text-align:left">.wbmp&lt;/td>
&lt;td style="text-align:left">image/vnd.wap.wbmp&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.wiz&lt;/td>
&lt;td style="text-align:left">application/msword&lt;/td>
&lt;td style="text-align:left">.wk3&lt;/td>
&lt;td style="text-align:left">application/x-wk3&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.wk4&lt;/td>
&lt;td style="text-align:left">application/x-wk4&lt;/td>
&lt;td style="text-align:left">.wkq&lt;/td>
&lt;td style="text-align:left">application/x-wkq&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.wks&lt;/td>
&lt;td style="text-align:left">application/x-wks&lt;/td>
&lt;td style="text-align:left">.wm&lt;/td>
&lt;td style="text-align:left">video/x-ms-wm&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.wma&lt;/td>
&lt;td style="text-align:left">audio/x-ms-wma&lt;/td>
&lt;td style="text-align:left">.wmd&lt;/td>
&lt;td style="text-align:left">application/x-ms-wmd&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.wmf&lt;/td>
&lt;td style="text-align:left">application/x-wmf&lt;/td>
&lt;td style="text-align:left">.wml&lt;/td>
&lt;td style="text-align:left">text/vnd.wap.wml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.wmv&lt;/td>
&lt;td style="text-align:left">video/x-ms-wmv&lt;/td>
&lt;td style="text-align:left">.wmx&lt;/td>
&lt;td style="text-align:left">video/x-ms-wmx&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.wmz&lt;/td>
&lt;td style="text-align:left">application/x-ms-wmz&lt;/td>
&lt;td style="text-align:left">.wp6&lt;/td>
&lt;td style="text-align:left">application/x-wp6&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.wpd&lt;/td>
&lt;td style="text-align:left">application/x-wpd&lt;/td>
&lt;td style="text-align:left">.wpg&lt;/td>
&lt;td style="text-align:left">application/x-wpg&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.wpl&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-wpl&lt;/td>
&lt;td style="text-align:left">.wq1&lt;/td>
&lt;td style="text-align:left">application/x-wq1&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.wr1&lt;/td>
&lt;td style="text-align:left">application/x-wr1&lt;/td>
&lt;td style="text-align:left">.wri&lt;/td>
&lt;td style="text-align:left">application/x-wri&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.wrk&lt;/td>
&lt;td style="text-align:left">application/x-wrk&lt;/td>
&lt;td style="text-align:left">.ws&lt;/td>
&lt;td style="text-align:left">application/x-ws&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.ws2&lt;/td>
&lt;td style="text-align:left">application/x-ws&lt;/td>
&lt;td style="text-align:left">.wsc&lt;/td>
&lt;td style="text-align:left">text/scriptlet&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.wsdl&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;td style="text-align:left">.wvx&lt;/td>
&lt;td style="text-align:left">video/x-ms-wvx&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.xdp&lt;/td>
&lt;td style="text-align:left">application/vnd.adobe.xdp&lt;/td>
&lt;td style="text-align:left">.xdr&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.xfd&lt;/td>
&lt;td style="text-align:left">application/vnd.adobe.xfd&lt;/td>
&lt;td style="text-align:left">.xfdf&lt;/td>
&lt;td style="text-align:left">application/vnd.adobe.xfdf&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.xhtml&lt;/td>
&lt;td style="text-align:left">text/html&lt;/td>
&lt;td style="text-align:left">.xls&lt;/td>
&lt;td style="text-align:left">application/vnd.ms-excel&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.xls&lt;/td>
&lt;td style="text-align:left">application/x-xls&lt;/td>
&lt;td style="text-align:left">.xlw&lt;/td>
&lt;td style="text-align:left">application/x-xlw&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.xml&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;td style="text-align:left">.xpl&lt;/td>
&lt;td style="text-align:left">audio/scpls&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.xq&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;td style="text-align:left">.xql&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.xquery&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;td style="text-align:left">.xsd&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.xsl&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;td style="text-align:left">.xslt&lt;/td>
&lt;td style="text-align:left">text/xml&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.xwd&lt;/td>
&lt;td style="text-align:left">application/x-xwd&lt;/td>
&lt;td style="text-align:left">.x_b&lt;/td>
&lt;td style="text-align:left">application/x-x_b&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.sis&lt;/td>
&lt;td style="text-align:left">application/vnd.symbian.install&lt;/td>
&lt;td style="text-align:left">.sisx&lt;/td>
&lt;td style="text-align:left">application/vnd.symbian.install&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.x_t&lt;/td>
&lt;td style="text-align:left">application/x-x_t&lt;/td>
&lt;td style="text-align:left">.ipa&lt;/td>
&lt;td style="text-align:left">application/vnd.iphone&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.apk&lt;/td>
&lt;td style="text-align:left">application/vnd.android.package-archive&lt;/td>
&lt;td style="text-align:left">.xap&lt;/td>
&lt;td style="text-align:left">application/x-silverlight-app&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>SSH 与 Git 多账号配置</title><link>https://petrichor.net.cn/p/ssh-git-config/</link><pubDate>Sun, 01 May 2022 14:44:01 +0800</pubDate><guid>https://petrichor.net.cn/p/ssh-git-config/</guid><description>&lt;h2 id="ssh-配置多个账户">SSH 配置多个账户&lt;/h2>
&lt;p>当需要使用多个远程主机或 Git 账户时，使用 SSH 配置文件&lt;code>~/.ssh/config&lt;/code> 会很方便。&lt;/p>
&lt;h3 id="常用配置项">常用配置项&lt;/h3>
&lt;p>可以通过 &lt;code>man ssh_config&lt;/code> 命令来查看此配置文件的具体语法&lt;/p>
&lt;ul>
&lt;li>&lt;code>Host&lt;/code> 别名&lt;/li>
&lt;li>&lt;code>HostName&lt;/code> 主机名，IP 或域名&lt;/li>
&lt;li>&lt;code>Port&lt;/code> 端口，默认为 22&lt;/li>
&lt;li>&lt;code>User&lt;/code> 用户名&lt;/li>
&lt;li>&lt;code>IdentityFile&lt;/code> 密钥文件的路径，可以指定多个，会依次尝试&lt;/li>
&lt;li>&lt;code>IdentitiesOnly&lt;/code> 只接受 SSH Key 登录&lt;/li>
&lt;li>&lt;code>PreferredAuthentications&lt;/code> 强制使用 Public Key 验证&lt;/li>
&lt;/ul>
&lt;h3 id="转义符">转义符&lt;/h3>
&lt;ul>
&lt;li>&lt;code>%d&lt;/code> 本地用户目录&lt;/li>
&lt;li>&lt;code>%u&lt;/code> 本地用户名称&lt;/li>
&lt;li>&lt;code>%l&lt;/code> 本地主机名&lt;/li>
&lt;li>&lt;code>%h&lt;/code> 远程主机名&lt;/li>
&lt;li>&lt;code>%r&lt;/code> 远程用户名&lt;/li>
&lt;/ul>
&lt;h3 id="示例">示例&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Host myserver
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">HostName 12.34.56.78 # 服务器地址
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Port 22 # ssh 端口号
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User ubuntu # 用户名
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IdentityFile ~/.ssh/id_rsa
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IdentitiesOnly yes
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>配置好以后，就可以直接&lt;strong>使用别名登录远程主机&lt;/strong>了：&lt;code>ssh myserver&lt;/code> 。&lt;/p>
&lt;p>多个主机可以使用同一个密钥，也可以分别使用各自的密钥。若使用相同密钥，还可以通过使用转义符简化配置：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">Host github.com gitee.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">HostName %h
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">User git
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">IdentityFile ~/.ssh/id_rsa_git
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>验证：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">ssh -T git@github.com
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">ssh -T git@gitee.com
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="已经配置好-sshgit-clone-时仍然需要密码">已经配置好 ssh，git clone 时仍然需要密码&lt;/h2>
&lt;p>这通常会在我们使用 https 方式克隆时发生，使用 ssh 方式克隆即可，或者是配置一下缓存。默认是不缓存的，每一次连接都会询问你的用户名和密码，我们可以设置保存到硬盘或是内存。&lt;/p>
&lt;blockquote>
&lt;p>git-credential-cache - Helper to temporarily store passwords in memory 存储到内存&lt;/p>
&lt;p>git-credential-store - Helper to store credentials on disk 存储到硬盘&lt;/p>
&lt;/blockquote>
&lt;h3 id="临时缓存密码">临时缓存密码&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">git config --global credential.helper cache
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="保存密码">保存密码&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">git config credential.helper store
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="reference">Reference&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://git-scm.com/docs/git-credential-cache" target="_blank" rel="noopener"
>https://git-scm.com/docs/git-credential-cache&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://git-scm.com/docs/git-credential-store" target="_blank" rel="noopener"
>https://git-scm.com/docs/git-credential-store&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://p3terx.com/archives/ssh-configuration-file.html" target="_blank" rel="noopener"
>https://p3terx.com/archives/ssh-configuration-file.html&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://p3terx.com/archives/github-multiaccount-ssh-key-settings.html" target="_blank" rel="noopener"
>https://p3terx.com/archives/github-multiaccount-ssh-key-settings.html&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>『合集』Ubuntu 常用软件安装（持续更新中。。。）</title><link>https://petrichor.net.cn/p/ubuntu-prepare/</link><pubDate>Sat, 30 Apr 2022 16:59:02 +0800</pubDate><guid>https://petrichor.net.cn/p/ubuntu-prepare/</guid><description>&lt;img src="https://petrichor.net.cn/docker-ubuntu.png" alt="Featured image of post 『合集』Ubuntu 常用软件安装（持续更新中。。。）" />&lt;p>我的腾讯云服务器被我{% spoiler 不小心 %}换了 IP，加上之前用的是宝塔面板，现在不想用了，所以重装了系统，这次装的是 Ubuntu20.04 的 Docker 基础镜像，自带 Docker，腾讯云控制台也有对应的容器控制面板，很方便。这里记录一下服务器上各种常用软件的安装方法与过程。持续更新中。。。&lt;/p>
&lt;hr>
&lt;h2 id="oh-my-zsh">oh-my-zsh&lt;/h2>
&lt;h3 id="安装-zsh">安装 zsh&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt-get install zsh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>如果找不到，先 &lt;code>sudo apt update&lt;/code> 一下。&lt;/p>
&lt;p>{% note info zsh 配置文件加载顺序 %}&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">/etc/zshenv
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">~/.zshenv
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/zprofile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">~/.zprofile
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/zshrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">~/.zshrc
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/zlogin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">~/.zlogin
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">~/.zlogout
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">/etc/zlogout
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>{% endnote %}&lt;/p>
&lt;h3 id="安装-oh-my-zsh">安装 oh-my-zsh&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sh -c &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>curl -fsSL https://gitee.com/mirrors/oh-my-zsh/raw/master/tools/install.sh&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>中间会询问是否把 zsh 设为默认 sh ，这里选择是。&lt;/p>
&lt;p>如果不小心选择了否，可以通过 &lt;code>chsh -s $(which zsh)&lt;/code> 重新设置。&lt;/p>
&lt;h3 id="各种插件">各种插件&lt;/h3>
&lt;ul>
&lt;li>zsh-syntax-highlighting - 代码高亮&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">git clone https://github.com/zsh-users/zsh-syntax-highlighting.git &lt;span class="si">${&lt;/span>&lt;span class="nv">ZSH_CUSTOM&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="p">~/.oh-my-zsh/custom&lt;/span>&lt;span class="si">}&lt;/span>/plugins/zsh-syntax-highlighting
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>zsh-autosuggestions - 自动建议&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">git clone https://github.com/zsh-users/zsh-autosuggestions &lt;span class="si">${&lt;/span>&lt;span class="nv">ZSH_CUSTOM&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="p">~/.oh-my-zsh/custom&lt;/span>&lt;span class="si">}&lt;/span>/plugins/zsh-autosuggestions
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>zsh-completions - 自动补全&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">git clone https://github.com/zsh-users/zsh-completions &lt;span class="si">${&lt;/span>&lt;span class="nv">ZSH_CUSTOM&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="si">${&lt;/span>&lt;span class="nv">ZSH&lt;/span>&lt;span class="k">:-&lt;/span>&lt;span class="p">~/.oh-my-zsh&lt;/span>&lt;span class="si">}&lt;/span>&lt;span class="p">/custom&lt;/span>&lt;span class="si">}&lt;/span>/plugins/zsh-completions
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="配置">配置&lt;/h3>
&lt;p>在 &lt;code>~/.zshrc&lt;/code> 中配置 &lt;code>plugins=(git sudo z zsh-syntax-highlighting zsh-autosuggestions zsh-completions)&lt;/code> 。&lt;/p>
&lt;p>&lt;code>source ~/.zshrc&lt;/code> 应用修改后的配置。&lt;/p>
&lt;h2 id="git">Git&lt;/h2>
&lt;p>镜像已经内置。&lt;/p>
&lt;h2 id="mongodb">MongoDB&lt;/h2>
&lt;h3 id="安装">安装&lt;/h3>
&lt;ul>
&lt;li>Import the public key used by the package management system&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">wget -qO - https://www.mongodb.org/static/pgp/server-5.0.asc &lt;span class="p">|&lt;/span> sudo apt-key add -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>The operation should respond with an &lt;code>OK&lt;/code>.&lt;/p>
&lt;ul>
&lt;li>Create a list file for MongoDB&lt;/li>
&lt;/ul>
&lt;p>Create the list file &lt;code>/etc/apt/sources.list.d/mongodb-org-5.0.list&lt;/code> for your version of Ubuntu.&lt;/p>
&lt;p>Click on the appropriate tab for your version of Ubuntu. If you are unsure of what Ubuntu version the host is running, open a terminal or shell on the host and execute &lt;code>lsb_release -dc&lt;/code>.&lt;/p>
&lt;p>The following instruction is for &lt;strong>Ubuntu 20.04 (Focal)&lt;/strong>.&lt;/p>
&lt;p>Create the &lt;code>/etc/apt/sources.list.d/mongodb-org-5.0.list&lt;/code> file for Ubuntu 20.04 (Focal):&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu focal/mongodb-org/5.0 multiverse&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo tee /etc/apt/sources.list.d/mongodb-org-5.0.list
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>Reload local package database&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt-get update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>Install the MongoDB packages&lt;/li>
&lt;/ul>
&lt;p>To install the latest stable version, issue the following&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt-get install -y mongodb-org
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>&lt;strong>Optional&lt;/strong>. Although you can specify any available version of MongoDB, &lt;code>apt-get&lt;/code> will upgrade the packages when a newer version becomes available. To prevent unintended upgrades, you can pin the package at the currently installed version:&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;mongodb-org hold&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo dpkg --set-selections
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;mongodb-org-database hold&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo dpkg --set-selections
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;mongodb-org-server hold&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo dpkg --set-selections
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;mongodb-org-shell hold&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo dpkg --set-selections
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;mongodb-org-mongos hold&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo dpkg --set-selections
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;mongodb-org-tools hold&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo dpkg --set-selections
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="启动">启动&lt;/h3>
&lt;p>启动服务&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo systemctl start mongod
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>开机自启动服务&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> mongod
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>systemctl 启动失败&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">sudo chown mongodb:mongodb /tmp/mongodb-27017.sock
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="配置-1">配置&lt;/h3>
&lt;h4 id="进入-mongo-命令行">进入 mongo 命令行&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">mongo
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="使用-admin-数据库在-mongo-命令行中">使用 admin 数据库（在 mongo 命令行中）&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">use admin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="查找所有用户在-mongo-命令行中">查找所有用户（在 mongo 命令行中）&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">db.system.users.find()
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="查看数据库角色在-mongo-命令行中">查看数据库角色（在 mongo 命令行中）&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">show roles
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>1.数据库用户角色：read、readWrite;
2.数据库管理角色：dbAdmin、dbOwner、userAdmin；
3.集群管理角色：clusterAdmin、clusterManager、clusterMonitor、hostManager；
4.备份恢复角色：backup、restore
5.所有数据库角色：readAnyDatabase、readWriteAnyDatabase、userAdminAnyDatabase、dbAdminAnyDatabase
6.超级用户角色：root&lt;/p>
&lt;/blockquote>
&lt;p>角色说明&lt;/p>
&lt;blockquote>
&lt;p>read：允许用户读取指定数据库；
readAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的读权限；
readWrite：允许用户读写指定数据库；
readWriteAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的读写权限；
dbAdmin：允许用户在指定数据库中执行管理函数，如索引创建、删除，查看统计或访问system.profile；
dbAdminAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的dbAdmin权限；
clusterAdmin：只在admin数据库中可用，赋予用户所有分片和复制集相关函数的管理权限；
userAdmin：允许用户向system.users集合写入，可以找指定数据库里创建、删除和管理用户；
userAdminAnyDatabase：只在admin数据库中可用，赋予用户所有数据库的userAdmin权限；
root：只在admin数据库中可用。超级账号，超级权限。&lt;/p>
&lt;/blockquote>
&lt;h4 id="查看用户在-mongo-命令行中">查看用户（在 mongo 命令行中）&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">show users
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="创建用户在-mongo-命令行中">创建用户（在 mongo 命令行中）&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">db.createUser({user:&amp;#34;admin&amp;#34;,pwd:&amp;#34;123456&amp;#34;,roles:[&amp;#34;root&amp;#34;]})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">db.createUser({user:&amp;#34;admin&amp;#34;,pwd:&amp;#34;123456&amp;#34;,roles:[{role:&amp;#34;root&amp;#34;,db:&amp;#34;admin&amp;#34; }]})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">db.createUser({user:&amp;#34;test&amp;#34;,pwd:&amp;#34;test&amp;#34;,roles:[{role:&amp;#34;userAdminAnyDatabase&amp;#34;,db:&amp;#34;admin&amp;#34;}]})
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">db.createUser({user:&amp;#34;gin&amp;#34;,pwd:&amp;#34;gin&amp;#34;,roles:[{role:&amp;#34;dbOwner&amp;#34;,db:&amp;#34;gin&amp;#34;}]})
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>{% note caution caution %}&lt;/p>
&lt;p>创建用户时，要切换到目标数据库再创建用户，不然创建的用户还是属于 admin&lt;/p>
&lt;p>{% endnote %}&lt;/p>
&lt;h4 id="登录在-mongo-命令行中">登录（在 mongo 命令行中）&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">db.auth(&amp;#39;admin&amp;#39;,&amp;#39;password&amp;#39;)
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="注意">注意&lt;/h3>
&lt;ul>
&lt;li>安装失败，多试几次 &lt;code>sudo apt update&lt;/code>&lt;/li>
&lt;/ul>
&lt;p>{% fold %}&lt;/p>
&lt;blockquote>
&lt;p>Err:6 &lt;a class="link" href="https://repo.mongodb.org/apt/ubuntu" target="_blank" rel="noopener"
>https://repo.mongodb.org/apt/ubuntu&lt;/a> focal/mongodb-org/5.0 Release&lt;/p>
&lt;p>Could not wait for server fd - select (11: Resource temporarily unavailable) [IP: 13.35.49.55 443]&lt;/p>
&lt;p>Err:7 &lt;a class="link" href="https://download.docker.com/linux/ubuntu" target="_blank" rel="noopener"
>https://download.docker.com/linux/ubuntu&lt;/a> focal Release&lt;/p>
&lt;p>Could not wait for server fd - select (11: Resource temporarily unavailable) [IP: 13.249.170.87 443]&lt;/p>
&lt;p>Reading package lists&amp;hellip; Done&lt;/p>
&lt;p>E: The repository &amp;lsquo;&lt;a class="link" href="https://repo.mongodb.org/apt/ubuntu" target="_blank" rel="noopener"
>https://repo.mongodb.org/apt/ubuntu&lt;/a> focal/mongodb-org/5.0 Release&amp;rsquo; does not have a Release file.&lt;/p>
&lt;p>N: Updating from such a repository can&amp;rsquo;t be done securely, and is therefore disabled by default.&lt;/p>
&lt;p>N: See apt-secure(8) manpage for repository creation and user configuration details.&lt;/p>
&lt;p>E: The repository &amp;lsquo;&lt;a class="link" href="https://download.docker.com/linux/ubuntu" target="_blank" rel="noopener"
>https://download.docker.com/linux/ubuntu&lt;/a> focal Release&amp;rsquo; no longer has a Release file.&lt;/p>
&lt;p>N: Updating from such a repository can&amp;rsquo;t be done securely, and is therefore disabled by default.&lt;/p>
&lt;p>N: See apt-secure(8) manpage for repository creation and user configuration details.&lt;/p>
&lt;/blockquote>
&lt;p>{% endfold %}&lt;/p>
&lt;h2 id="mysql-server">Mysql Server&lt;/h2>
&lt;h3 id="安装-1">安装&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt install mysql-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="进入-mysql-命令行">进入 mysql 命令行&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">mysql -uroot
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>设置密码&lt;/p>
&lt;p>set password for root@localhost = &amp;lsquo;123456&amp;rsquo;;&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">CREATE DATABASE IF NOT EXISTS lskypro;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CREATE USER &amp;#39;lskypro&amp;#39;@&amp;#39;%&amp;#39; IDENTIFIED BY &amp;#39;123456&amp;#39;;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GRANT ALL PRIVILEGES ON lskypro.* TO &amp;#39;lskypro&amp;#39;@&amp;#39;%&amp;#39; WITH GRANT OPTION;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">flush privileges;
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="redis">Redis&lt;/h2>
&lt;p>直接使用 apt 安装&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt install redis-server
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 redis-cli 验证&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">redis-cli
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>redis-cli 内设置密码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">config set requirepass 123456
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>命令行指定的密码，重启后无效，想要永久生效则修改配置文件 &lt;code>/etc/redis/redis.conf&lt;/code> ，在 requirepass 后添加密码。&lt;/p>
&lt;p>如果想设置远程访问， &lt;code>sudo vim /etc/redis/redis.conf&lt;/code> ，需要将 &lt;code>bind 127.0.0.1 ::1&lt;/code> 注释掉并且没有设置访问密码，然后将 Protected-mode 设置为 no 。&lt;/p>
&lt;p>{% note info Redis Protected-mode %}&lt;/p>
&lt;p>Protected-mode 是为了禁止公网访问redis cache，加强redis安全的。&lt;/p>
&lt;p>它启用的条件，有两个：
1） 没有bind IP
2） 没有设置访问密码&lt;/p>
&lt;p>{% endnote %}&lt;/p>
&lt;h2 id="golang">Golang&lt;/h2>
&lt;p>在官网或其他网站如：&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://studygolang.com/dl" target="_blank" rel="noopener"
>https://studygolang.com/dl&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://golang.google.cn/dl/" target="_blank" rel="noopener"
>https://golang.google.cn/dl/&lt;/a>&lt;/li>
&lt;/ul>
&lt;h3 id="下载压缩包">下载压缩包&lt;/h3>
&lt;p>如 &lt;a class="link" href="https://studygolang.com/dl/golang/go1.18.1.linux-amd64.tar.gz" target="_blank" rel="noopener"
>&lt;strong>go1.18.1.linux-amd64.tar.gz&lt;/strong>&lt;/a> , 上传至服务器，然后解压缩：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo tar -zxf go1.18.1.linux-amd64.tar.gz -C /usr/local
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="设置环境变量">设置环境变量&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="na">export GOROOT&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">/usr/local/go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">export GOPATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">/home/ubuntu/go&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">export PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">$GOROOT/bin:$GOPATH/bin:$PATH&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">export GO111MODULE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">on&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">export GOPROXY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">https://goproxy.cn,direct&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">export CGO_ENABLED&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">export GOOS&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">linux&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">export GOARCH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">amd64&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>➜ ~ go version
go version go1.18.1 linux/amd64&lt;/p>
&lt;/blockquote>
&lt;h2 id="nodejs">Node.js&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo curl -sL https://deb.nodesource.com/setup_14.x &lt;span class="p">|&lt;/span> sudo -E bash -
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>## Run &lt;code>**sudo apt-get install -y nodejs**&lt;/code> to install Node.js 14.x and npm&lt;/p>
&lt;p>## You may also need development tools to build native addons:&lt;/p>
&lt;p>​ sudo apt-get install gcc g++ make&lt;/p>
&lt;p>## To install the Yarn package manager, run:&lt;/p>
&lt;p>​ curl -sL &lt;a class="link" href="https://dl.yarnpkg.com/debian/pubkey.gpg" target="_blank" rel="noopener"
>https://dl.yarnpkg.com/debian/pubkey.gpg&lt;/a> | gpg &amp;ndash;dearmor | sudo tee /usr/share/keyrings/yarnkey.gpg &amp;gt;/dev/null&lt;/p>
&lt;p>​ echo &amp;ldquo;deb [signed-by=/usr/share/keyrings/yarnkey.gpg] &lt;a class="link" href="https://dl.yarnpkg.com/debian" target="_blank" rel="noopener"
>https://dl.yarnpkg.com/debian&lt;/a> stable main&amp;rdquo; | sudo tee /etc/apt/sources.list.d/yarn.list&lt;/p>
&lt;p>​ sudo apt-get update &amp;amp;&amp;amp; sudo apt-get install yarn&lt;/p>
&lt;/blockquote>
&lt;h3 id="换清华源已过期">换清华源（已过期）&lt;/h3>
&lt;p>清华源已经将 NodeSource 去掉，下面[使用 n 替代](#使用 n 安装)。&lt;/p>
&lt;p>编辑 &lt;code>/etc/apt/sources.list.d/nodesource.list&lt;/code> ， 把 &lt;code>https://deb.nodesource.com/node/&lt;/code> 替换为 &lt;code>https://mirrors.tuna.tsinghua.edu.cn/nodesource/node/&lt;/code> 即可。&lt;/p>
&lt;p>这里是 &lt;code>https://deb.nodesource.com/node_14.x&lt;/code> ，改为 &lt;code>https://mirrors.tuna.tsinghua.edu.cn/nodesource/deb_14.x&lt;/code> 。&lt;/p>
&lt;h3 id="换源后安装">换源后安装（×）&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install nodejs
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="使用-n-安装">使用 n 安装&lt;/h3>
&lt;p>首先要安装 npm，然后用 npm 安装 n，这里先随意下载一个版本。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt install nodejs npm
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>&lt;strong>➜&lt;/strong> &lt;strong>~&lt;/strong> npm -v&lt;/p>
&lt;p>6.14.4&lt;/p>
&lt;p>&lt;strong>➜&lt;/strong> &lt;strong>~&lt;/strong> node -v&lt;/p>
&lt;p>v10.19.0&lt;/p>
&lt;/blockquote>
&lt;p>然后安装 n&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">npm install -g n
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用 n 切换版本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 设定环境变量（~/.zshrc）&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">export&lt;/span> &lt;span class="nv">NODE_MIRROR&lt;/span>&lt;span class="o">=&lt;/span>https://mirrors.tuna.tsinghua.edu.cn/nodejs-release/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 然后正常使用 n 即可&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo n stable
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>&lt;strong>➜&lt;/strong> &lt;strong>~&lt;/strong> node -v&lt;/p>
&lt;p>v16.15.0&lt;/p>
&lt;p>&lt;strong>➜&lt;/strong> &lt;strong>~&lt;/strong> npm -v&lt;/p>
&lt;p>8.5.5&lt;/p>
&lt;/blockquote>
&lt;h3 id="npm-换源">npm 换源&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">npm config &lt;span class="nb">set&lt;/span> registry &lt;span class="s2">&amp;#34;https://registry.npm.taobao.org&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="注意-1">注意&lt;/h3>
&lt;blockquote>
&lt;p>Err:5 &lt;a class="link" href="https://mirrors.tuna.tsinghua.edu.cn/nodesource/deb_14.x" target="_blank" rel="noopener"
>https://mirrors.tuna.tsinghua.edu.cn/nodesource/deb_14.x&lt;/a> focal Release&lt;/p>
&lt;p>Certificate verification failed: The certificate is NOT trusted. The certificate chain uses expired certificate. Could not handshake: Error in the certificate v&lt;/p>
&lt;p>erification. [IP: 101.6.15.130 443]&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt install ca-certificates --reinstall
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="nginx">Nginx&lt;/h2>
&lt;p>直接 apt 安装就可以。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt install nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo systemctl start nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> nginx
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="docker">Docker&lt;/h2>
&lt;p>这次安装的镜像是 docker 基础镜像，内置了 docker，不再记录。&lt;/p>
&lt;p>可以查看另一篇文章：&lt;a class="link" href="https://petrichor.net.cn/articles/docker" >Docker&lt;/a>&lt;/p>
&lt;h2 id="grafana">Grafana&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo docker run -d --net&lt;span class="o">=&lt;/span>host --restart&lt;span class="o">=&lt;/span>always --name&lt;span class="o">=&lt;/span>grafana grafana/grafana
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="showdoc">ShowDoc&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo docker run -d --name showdoc --user&lt;span class="o">=&lt;/span>root --privileged&lt;span class="o">=&lt;/span>&lt;span class="nb">true&lt;/span> -p 4999:80 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-v /data/showdoc/html:/var/www/html/ star7th/showdoc
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="minio">MinIO&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo docker run -itd --name minio &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-p 9000:9000 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-p 19000:19000 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-d --restart&lt;span class="o">=&lt;/span>always &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-e &lt;span class="s2">&amp;#34;MINIO_ROOT_USER=admin&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-e &lt;span class="s2">&amp;#34;MINIO_ROOT_PASSWORD=123456&amp;#34;&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-v /data/minio:/data &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>-v /etc/minio:/root/.minio &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>minio/minio server /data &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span>--console-address &lt;span class="s1">&amp;#39;0.0.0.0:19000&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="cloudreve">Cloudreve&lt;/h2>
&lt;h2 id="lsky-pro-2">Lsky Pro 2&lt;/h2>
&lt;p>如果要访问宿主机的 Mysql ，可以在 mysql 配置文件(&lt;code>/etc/mysql/mysql.conf.d/mysqld.cnf&lt;/code>)中设置 bind-address 为 0.0.0.0(允许所有 IP 访问)，然后 &lt;code>docker network inspect lskypro_default&lt;/code> ，查看容器 IP，在服务器的防火墙中开放此 IP 对 3306 的访问权限。&lt;/p>
&lt;h2 id="emqx">EMQX&lt;/h2>
&lt;h2 id="prometheus">Prometheus&lt;/h2>
&lt;h2 id="portainer">Portainer&lt;/h2>
&lt;h2 id="frp">frp&lt;/h2>
&lt;h2 id="ctop">ctop&lt;/h2>
&lt;blockquote>
&lt;p>Top-like interface for container metrics&lt;/p>
&lt;p>&lt;code>ctop&lt;/code> provides a concise and condensed overview of real-time metrics for multiple containers:&lt;/p>
&lt;p>&lt;a class="link" href="https://github.com/bcicen/ctop/raw/master/_docs/img/grid.gif" target="_blank" rel="noopener"
>https://github.com/bcicen/ctop/raw/master/_docs/img/grid.gif&lt;/a>&lt;/p>
&lt;p>as well as a &lt;a class="link" href="https://github.com/bcicen/ctop/blob/master/_docs/single.md" target="_blank" rel="noopener"
>single container view&lt;/a> for inspecting a specific container.&lt;/p>
&lt;p>&lt;code>ctop&lt;/code> comes with built-in support for Docker and runC; connectors for other container and cluster systems are planned for future releases.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>安装&lt;/strong>&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;deb http://packages.azlux.fr/debian/ buster main&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo tee /etc/apt/sources.list.d/azlux.list
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">wget -qO - https://azlux.fr/repo.gpg.key &lt;span class="p">|&lt;/span> sudo apt-key add -
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt install docker-ctop
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="未完待续">未完待续。。。&lt;/h2>
&lt;h2 id="reference">Reference&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.mongodb.com/docs/manual/tutorial/install-mongodb-on-ubuntu/" target="_blank" rel="noopener"
>https://www.mongodb.com/docs/manual/tutorial/install-mongodb-on-ubuntu/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://computingforgeeks.com/how-to-install-mongodb-database-on-ubuntu/" target="_blank" rel="noopener"
>https://computingforgeeks.com/how-to-install-mongodb-database-on-ubuntu/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://developer.aliyun.com/article/760687" target="_blank" rel="noopener"
>如何在 Ubuntu 20.04 上安装 Node.js 和 npm&lt;/a>&lt;/li>
&lt;li>（已过期）&lt;a class="link" href="https://mirror.tuna.tsinghua.edu.cn/help/nodesource/" target="_blank" rel="noopener"
>https://mirror.tuna.tsinghua.edu.cn/help/nodesource/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://mirror.tuna.tsinghua.edu.cn/help/nodejs-release/" target="_blank" rel="noopener"
>https://mirror.tuna.tsinghua.edu.cn/help/nodejs-release/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Go Benchmark</title><link>https://petrichor.net.cn/p/go-benchmark/</link><pubDate>Sat, 30 Apr 2022 10:05:56 +0800</pubDate><guid>https://petrichor.net.cn/p/go-benchmark/</guid><description>&lt;p>安装&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">go install github.com/cnlh/benchmark@latest
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>测试程序&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;github.com/gin-gonic/gin&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">New&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">GET&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;/ping&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">ctx&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">gin&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Context&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">ctx&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">String&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">200&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;pong&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">})&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">r&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Run&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;:8000&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&amp;gt; benchmark.exe -c &lt;span class="m">3000&lt;/span> -n &lt;span class="m">100000&lt;/span> http://127.0.0.1:8000/ping
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Running &lt;span class="m">100000&lt;/span> &lt;span class="nb">test&lt;/span> @ 127.0.0.1:8000 by &lt;span class="m">3000&lt;/span> connections
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Request as following format:
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">GET /ping HTTP/1.1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Host: 127.0.0.1:8000
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Requests/sec: 44579.28
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Transfer/sec: 7.25MB
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Error&lt;span class="o">(&lt;/span>s&lt;span class="o">)&lt;/span> : &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Percentage of the requests served within a certain &lt;span class="nb">time&lt;/span> &lt;span class="o">(&lt;/span>ms&lt;span class="o">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 50% &lt;span class="m">4&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 65% &lt;span class="m">6&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 75% &lt;span class="m">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 80% &lt;span class="m">8&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 90% &lt;span class="m">11&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 95% &lt;span class="m">14&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 98% &lt;span class="m">24&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 99% &lt;span class="m">128&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> 100% &lt;span class="m">833&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>常用 shell 脚本</title><link>https://petrichor.net.cn/p/shell-scripts/</link><pubDate>Tue, 19 Apr 2022 15:55:42 +0800</pubDate><guid>https://petrichor.net.cn/p/shell-scripts/</guid><description>&lt;p>记录常用 shell 脚本。&lt;/p>
&lt;h3 id="idsh">id.sh&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="k">$(&lt;/span>sudo lsof -i:7091&lt;span class="p">|&lt;/span>grep main&lt;span class="p">|&lt;/span>awk &lt;span class="s1">&amp;#39;NR==1{print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="startsh">start.sh&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo nohup go run ./main.go &amp;gt;&amp;gt; web.log 2&amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="p">&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="k">$(&lt;/span>sudo lsof -i:7091&lt;span class="p">|&lt;/span>grep main&lt;span class="p">|&lt;/span>awk &lt;span class="s1">&amp;#39;NR==1{print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="stopsh">stop.sh&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 先过滤出 7091 端口，用 grep 过滤出 main，同时用 awk 过滤出第二行的数据&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>sudo lsof -i:7091&lt;span class="p">|&lt;/span>grep main&lt;span class="p">|&lt;/span>awk &lt;span class="s1">&amp;#39;NR==1{print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> ! &lt;span class="si">${&lt;/span>&lt;span class="nv">id&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;项目未启动!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">kill&lt;/span> -9 &lt;span class="nv">$id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;项目已关闭!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="restartsh">restart.sh&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nv">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>sudo lsof -i:7091&lt;span class="p">|&lt;/span>grep main&lt;span class="p">|&lt;/span>awk &lt;span class="s1">&amp;#39;NR==1{print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> ! &lt;span class="si">${&lt;/span>&lt;span class="nv">id&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;项目未启动!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo &lt;span class="nb">kill&lt;/span> -9 &lt;span class="nv">$id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;项目已关闭!&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo chmod +x ./main
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo nohup ./main &amp;gt;&amp;gt; web.log 2&amp;gt;&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="m">1&lt;/span> &lt;span class="p">&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="k">$(&lt;/span>sudo lsof -i:7091&lt;span class="p">|&lt;/span>grep main&lt;span class="p">|&lt;/span>awk &lt;span class="s1">&amp;#39;NR==1{print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="egg-serversh">egg-server.sh&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> /opt/egg-server&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">pid&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>ps -ef &lt;span class="p">|&lt;/span> grep &lt;span class="s2">&amp;#34;egg&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> grep -v grep &lt;span class="p">|&lt;/span> awk &lt;span class="s1">&amp;#39;{print $2}&amp;#39;&lt;/span> &lt;span class="p">|&lt;/span>tail -n &lt;span class="m">3&lt;/span> &lt;span class="p">|&lt;/span> head -n 1&lt;span class="k">)&lt;/span>&lt;span class="p">;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">kill&lt;/span> &lt;span class="si">${&lt;/span>&lt;span class="nv">pid&lt;/span>&lt;span class="si">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo git pull origin master
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo npm i
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">nohup npm run dev &lt;span class="p">&amp;amp;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">exit&lt;/span> &lt;span class="m">0&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>Wsl2</title><link>https://petrichor.net.cn/p/wsl2/</link><pubDate>Tue, 12 Apr 2022 22:00:47 +0800</pubDate><guid>https://petrichor.net.cn/p/wsl2/</guid><description>&lt;p>如何安装&lt;code>适用于 Linux 的 Windows 子系统&lt;/code>。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">wsl --install
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>正在安装: 虚拟机平台
已安装 虚拟机平台。
正在安装: 适用于 Linux 的 Windows 子系统
已安装 适用于 Linux 的 Windows 子系统。
正在下载: WSL 内核
[============= 22.8% ]&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">dism&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">exe&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">online&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="nb">enable-feature&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">featurename&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="nb">Microsoft-Windows&lt;/span>&lt;span class="n">-Subsystem-Linux&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">all&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">norestart&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>部署映像服务和管理工具
版本: 10.0.22000.1&lt;/p>
&lt;p>映像版本: 10.0.22000.556&lt;/p>
&lt;p>启用一个或多个功能
[==========================100.0%==========================]
操作成功完成。&lt;/p>
&lt;/blockquote>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-powershell" data-lang="powershell">&lt;span class="line">&lt;span class="cl">&lt;span class="n">dism&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="py">exe&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">online&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="nb">enable-feature&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">featurename&lt;/span>&lt;span class="err">:&lt;/span>&lt;span class="n">VirtualMachinePlatform&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">all&lt;/span> &lt;span class="p">/&lt;/span>&lt;span class="n">norestart&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>部署映像服务和管理工具
版本: 10.0.22000.1&lt;/p>
&lt;p>映像版本: 10.0.22000.556&lt;/p>
&lt;p>启用一个或多个功能
[==========================100.0%==========================]
操作成功完成。&lt;/p>
&lt;/blockquote>
&lt;p>指定要安装的子系统的版本&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">wsl --install -d Ubuntu
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;hr>
&lt;p>参考链接&lt;/p>
&lt;ul>
&lt;li>&lt;a class="link" href="https://ruihusky.github.io/ruihusky/posts/2020-12-11_wsl2-net-config/" target="_blank" rel="noopener"
>https://ruihusky.github.io/ruihusky/posts/2020-12-11_wsl2-net-config/&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://logi.im/script/achieving-access-to-files-and-resources-on-the-network-between-win10-and-wsl2.html" target="_blank" rel="noopener"
>https://logi.im/script/achieving-access-to-files-and-resources-on-the-network-between-win10-and-wsl2.html&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://hangzhi.github.io/2021/06/24/wsl2GolandThanosDev/" target="_blank" rel="noopener"
>https://hangzhi.github.io/2021/06/24/wsl2GolandThanosDev/&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>使用 Drone CI 自动部署 Go 应用</title><link>https://petrichor.net.cn/p/drone-gitea-golang/</link><pubDate>Fri, 08 Apr 2022 15:16:18 +0800</pubDate><guid>https://petrichor.net.cn/p/drone-gitea-golang/</guid><description>&lt;p>本文将记录如何使用 Drone 自动部署 Go 应用。&lt;/p>
&lt;h2 id="介绍">介绍&lt;/h2>
&lt;h3 id="drone-ci">Drone CI&lt;/h3>
&lt;p>官网介绍：&lt;/p>
&lt;blockquote>
&lt;p>Automate Software Build and Testing&lt;/p>
&lt;p>Drone is a &lt;strong>self-service Continuous Delivery platform&lt;/strong> for busy development teams.&lt;/p>
&lt;/blockquote>
&lt;h3 id="gitea">Gitea&lt;/h3>
&lt;p>官网介绍：&lt;/p>
&lt;blockquote>
&lt;p>Gitea 是一个自己托管的Git服务程序。他和GitHub, Bitbucket or Gitlab等比较类似。他是从 Gogs 发展而来，不过我们已经Fork并且命名为Gitea。&lt;/p>
&lt;p>Gitea的首要目标是创建一个极易安装，运行非常快速，安装和使用体验良好的自建 Git 服务。我们采用Go作为后端语言，这使我们只要生成一个可执行程序即可。并且他还支持跨平台，支持 Linux, macOS 和 Windows 以及各种架构，除了x86，amd64，还包括 ARM 和 PowerPC。&lt;/p>
&lt;/blockquote>
&lt;h3 id="自动部署流程">自动部署流程&lt;/h3>
&lt;ol>
&lt;li>项目中写入 .drone.yml 配置文件，push 到 gitea 中&lt;/li>
&lt;li>gitea 通过钩子函数告诉 drone&lt;/li>
&lt;li>drone 读取配置文件，通过 drone-runner-* 部署项目&lt;/li>
&lt;/ol>
&lt;h2 id="安装">安装&lt;/h2>
&lt;h3 id="安装-drone-server-和-drone-runner-docker">安装 drone-server 和 drone-runner-docker&lt;/h3>
&lt;p>这里使用 &lt;code>docker-compose&lt;/code> 安装。&lt;/p>
&lt;p>在 &lt;code>docker-compose&lt;/code> 所在目录使用 &lt;code>docker-compose up -d&lt;/code> 安装。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;span class="lnt">51
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;3&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 容器名称&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">drone-server&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 构建所使用的镜像&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">drone/drone:1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 映射容器内80端口到宿主机的7079端口&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">7079&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">80&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 映射容器内/data目录到宿主机的/data/drone目录&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">/data/drone:/data&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 容器随docker自动启动&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Gitea 服务器地址&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">DRONE_GITEA_SERVER=http://ip:port&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Gitea OAuth2客户端ID&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">DRONE_GITEA_CLIENT_ID=XXX&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Gitea OAuth2客户端密钥&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">DRONE_GITEA_CLIENT_SECRET=yyy&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c">#- DRONE_GIT_ALWAYS_AUTH=&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># drone的共享密钥&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">DRONE_RPC_SECRET=drone_rpc_secret&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># drone的主机名&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">DRONE_SERVER_HOST=ip:port&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 外部协议方案&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">DRONE_SERVER_PROTO=http&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 创建管理员账户，这里对应为gitea的用户名&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">DRONE_USER_CREATE=username:admin,admin:true&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">drone-runner-docker&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">drone/drone-runner-docker:1&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="m">7080&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="m">3000&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">depends_on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">drone-server&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">/var/run/docker.sock:/var/run/docker.sock&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 用于连接到Drone服务器的协议。该值必须是http或https。&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">DRONE_RPC_PROTO=http&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 用于连接到Drone服务器的主机名&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">DRONE_RPC_HOST=ip:port&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># Drone服务器进行身份验证的共享密钥，和上面设置一样&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">DRONE_RPC_SECRET=drone_rpc_secret&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># 限制运行程序可以执行的并发管道数。运行程序默认情况下执行2个并发管道。&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">DRONE_RUNNER_CAPACITY=2&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># docker runner 名称&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">DRONE_RUNNER_NAME=drone-runner&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="安装-drone-runner-exec">安装 drone-runner-exec&lt;/h3>
&lt;h4 id="下载">下载&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">curl -L https://github.com/drone-runners/drone-runner-exec/releases/latest/download/drone_runner_exec_linux_amd64.tar.gz &lt;span class="p">|&lt;/span> tar zx
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo install -t /usr/local/bin drone-runner-exec
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="配置">配置&lt;/h4>
&lt;p>配置文件为 &lt;code>/etc/drone-runner-exec/config&lt;/code> ，需要手动创建并写入一下内容。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-ini" data-lang="ini">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 用于连接到Drone服务器的协议。该值必须是http或https&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DRONE_RPC_PROTO&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">http&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 用于连接到Drone服务器的主机名&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DRONE_RPC_HOST&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">ip:port&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># Drone服务器进行身份验证的共享密钥，和上面设置一样&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DRONE_RPC_SECRET&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">drone_rpc_secret&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># log 存储目录，需要自行建立&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DRONE_LOG_FILE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">/opt/drone/drone-runner-exec/log.txt&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 限制运行程序可以执行的并发管道数。运行程序默认情况下执行2个并发管道&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># limits the number of concurrent pipelines that a runner can execute&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DRONE_RUNNER_CAPACITY&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">2&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DRONE_RUNNER_NAME&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">drone-runner-exec&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DRONE_RUNNER_PATH&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">/bin:/usr/local/go/bin:/usr/local/bin:/usr/bin:/usr/sbin:/sbin # sets the PATH variable for all pipeline steps&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 日志追踪&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="na">DRONE_TRACE&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="s">true&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="启动">启动&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">drone-runner-exec service install
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">drone-runner-exec service start
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">tail /opt/drone/drone-runner-exec/log.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>&lt;strong>➜&lt;/strong> &lt;strong>drone-runner-exec&lt;/strong> drone-runner-exec service install&lt;/p>
&lt;p>read configuration /home/ubuntu/.drone-runner-exec/config&lt;/p>
&lt;p>installing service drone-runner-exec&lt;/p>
&lt;p>drone-runner-exec: error: cannot read configuration, try &amp;ndash;help&lt;/p>
&lt;p>&amp;hellip;&lt;/p>
&lt;/blockquote>
&lt;h2 id="项目配置文件-droneyml">项目配置文件 .drone.yml&lt;/h2>
&lt;h3 id="在宿主机执行命令编译并运行">在宿主机执行命令，编译并运行&lt;/h3>
&lt;p>如果项目根目录中有 &lt;code>.drone.yml&lt;/code> 文件，drone 就可以读取文件中的内容，从而进行自动部署。&lt;/p>
&lt;p>示例：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;span class="lnt">36
&lt;/span>&lt;span class="lnt">37
&lt;/span>&lt;span class="lnt">38
&lt;/span>&lt;span class="lnt">39
&lt;/span>&lt;span class="lnt">40
&lt;/span>&lt;span class="lnt">41
&lt;/span>&lt;span class="lnt">42
&lt;/span>&lt;span class="lnt">43
&lt;/span>&lt;span class="lnt">44
&lt;/span>&lt;span class="lnt">45
&lt;/span>&lt;span class="lnt">46
&lt;/span>&lt;span class="lnt">47
&lt;/span>&lt;span class="lnt">48
&lt;/span>&lt;span class="lnt">49
&lt;/span>&lt;span class="lnt">50
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">kind&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">pipeline&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 对象类型，有 pipeline、secret 和 signature 等类型&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">type&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">exec&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 流水线类型，有 docker、kubernetes、exec、ssh 等类型&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">drone-golang-example&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">platform&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">os&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">linux&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">arch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">amd64&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">steps&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">test &amp;amp; build&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">GOOS&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">linux&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">GOARCH&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">amd64&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">CGO_ENABLED&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">0&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">commands&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">whoami&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">echo &amp;#34;==== test ====&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">go test&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">echo &amp;#34;==== build ====&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">go build -o server&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">copy&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">commands&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">cp -rf ./server /opt/drone-golang-example/server&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">chown ubuntu:ubuntu /opt/drone-golang-example/server&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">chmod 755 /opt/drone-golang-example/server&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">stop&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">commands&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">sh scripts/stop.sh&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">run&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">commands&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">echo &amp;#34;==== run ====&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">cd /opt/drone-golang-example&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">nohup ./server 2&amp;gt;&amp;amp;1 &amp;gt; web.log &amp;amp;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">echo &amp;#34;running&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">notify&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">commands&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">echo &amp;#34;failure&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">when&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">status&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">failure&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">trigger&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">branch&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">main&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">event&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">push&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>其中 &lt;code>stop.sh&lt;/code> 内容为：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#! /bin/sh
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># NR==1 第一行&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># print $2 输出第二个参数&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nv">id&lt;/span>&lt;span class="o">=&lt;/span>&lt;span class="k">$(&lt;/span>sudo lsof -i:7007&lt;span class="p">|&lt;/span>grep drone-golang-example&lt;span class="p">|&lt;/span>awk &lt;span class="s1">&amp;#39;NR==1{print $2}&amp;#39;&lt;/span>&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">if&lt;/span> &lt;span class="o">[&lt;/span> ! &lt;span class="si">${&lt;/span>&lt;span class="nv">id&lt;/span>&lt;span class="si">}&lt;/span> &lt;span class="o">]&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">then&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;项目未启动&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">else&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> sudo &lt;span class="nb">kill&lt;/span> -9 &lt;span class="nv">$id&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="在-docker-中运行">在 Docker 中运行&lt;/h3>
&lt;p>TODO&lt;/p>
&lt;h2 id="注意">注意&lt;/h2>
&lt;h3 id="pending">Pending&lt;/h3>
&lt;p>没有对应的 runner，需要哪个就安装哪个，对应 &lt;code>.drone.yml&lt;/code> 中的 type，本文需要安装 &lt;a class="link" href="#drone-runner-exec" >⬆️drone-runner-exec&lt;/a> 。&lt;/p>
&lt;h3 id="fatal-could-not-read-username-for-httpipport-terminal-prompts-disabled">fatal: could not read Username for &lt;code>'http://ip:port'&lt;/code>: terminal prompts disabled&lt;/h3>
&lt;p>需要用户名等，这里发现仓库设置为了私有，改为公开，不再报此错误。&lt;/p>
&lt;p>若需要使用私有仓库，参考一下&lt;a class="link" href="https://www.codenong.com/cs106797930/" target="_blank" rel="noopener"
>这篇文章&lt;/a>。&lt;/p>
&lt;h3 id="command-not-found">command not found&lt;/h3>
&lt;p>如：&lt;/p>
&lt;ul>
&lt;li>go: command not found&lt;/li>
&lt;li>scripts/stop.sh: line 3: grep: command not found&lt;/li>
&lt;/ul>
&lt;p>在配置文件中修改配置项 &lt;code>DRONE_RUNNER_PATH&lt;/code> ，需要的命令在哪个路径就加什么。&lt;/p>
&lt;p>或者也可以将 &lt;code>.drone.yml&lt;/code> 中的 go 改为绝对路径，比如我这里是 &lt;code>/usr/local/go/bin/go&lt;/code> (不推荐)。&lt;/p>
&lt;h3 id="no-such-process">No such process&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>旧：脚本使用 ps 查找进程&lt;/p>
&lt;p>第一次运行时，并没有已经运行的进程去停止，可以先把 &lt;code>.drone.yml&lt;/code> 中 stop 这一步去掉。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>新：脚本使用 lsof 查找进程&lt;/p>
&lt;p>未启动会输出项目未启动。&lt;/p>
&lt;/li>
&lt;/ul>
&lt;h3 id="某一阶段run一直显示-running-不停止">某一阶段(run)一直显示 Running 不停止&lt;/h3>
&lt;p>。。。&lt;/p>
&lt;h2 id="reference">Reference&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://fix.moe/post/start-drone-ci" target="_blank" rel="noopener"
>https://fix.moe/post/start-drone-ci&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://docs.drone.io" target="_blank" rel="noopener"
>https://docs.drone.io&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>npm 与 yarn 更改默认目录并换源</title><link>https://petrichor.net.cn/p/node-config/</link><pubDate>Thu, 31 Mar 2022 11:21:59 +0800</pubDate><guid>https://petrichor.net.cn/p/node-config/</guid><description>&lt;p>npm 与 yarn 配置。&lt;/p>
&lt;h2 id="更改默认目录">更改默认目录&lt;/h2>
&lt;p>npm 缓存默认在 C 盘，这会占用 C 盘大量空间，咱们把它改为其他目录。&lt;/p>
&lt;h3 id="删除缓存">删除缓存&lt;/h3>
&lt;p>在修改之前，先把之前的缓存删除。当然也可以找到对应的文件夹&lt;strong>手动删除&lt;/strong>。&lt;/p>
&lt;p>npm 缓存默认使用 &lt;code>~\AppData\Local\npm-cache\_cacache&lt;/code> 目录。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">npm cache verify
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>Cache verified and compressed (~\AppData\Local\npm-cache_cacache)
Content verified: 123 (6009783 bytes)
Index entries: 123
Finished in 1.58s&lt;/p>
&lt;/blockquote>
&lt;p>使用以下命令清空缓存。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">npm cache clean --force
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以看到，缓存目录已经发生了变化，&lt;code>_cacache&lt;/code> 目录已经没了。它会报一个警告，可以不用管。&lt;/p>
&lt;blockquote>
&lt;p>npm WARN using &amp;ndash;force Recommended protections disabled.&lt;/p>
&lt;/blockquote>
&lt;h3 id="全局配置">全局配置&lt;/h3>
&lt;p>我这里 Node.js 安装路径是 &lt;code>D:\Software\nodejs&lt;/code> 。&lt;/p>
&lt;h4 id="设置-npmyarn-包全局下载路径">设置 npm、yarn 包全局下载路径&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">npm config &lt;span class="nb">set&lt;/span> prefix &lt;span class="s2">&amp;#34;D:\Software\nodejs\node_global&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">yarn config &lt;span class="nb">set&lt;/span> prefix &lt;span class="s2">&amp;#34;D:\Software\Yarn\global&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h4 id="设置-npmyarn-缓存路径">设置 npm、yarn 缓存路径&lt;/h4>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">npm config &lt;span class="nb">set&lt;/span> cache &lt;span class="s2">&amp;#34;D:\Software\nodejs\node_cache&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">yarn config &lt;span class="nb">set&lt;/span> cache-folder &lt;span class="s2">&amp;#34;D:\Software\Yarn\cache&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>下载一下试一试，&lt;code> npm install hexo-cli -g&lt;/code> ，发现报错。&lt;/p>
&lt;blockquote>
&lt;p>npm ERR! code EPERM
npm ERR! syscall mkdir
npm ERR! path D:\Software\nodejs\node_cache_cacache
npm ERR! errno EPERM
npm ERR! FetchError: Invalid response body while trying to fetch &lt;a class="link" href="https://registry.npmjs.org/hexo-cli" target="_blank" rel="noopener"
>https://registry.npmjs.org/hexo-cli&lt;/a>: EPERM: operation not permitted, mkdir &amp;lsquo;D:\Software\nodejs\node_cache_cacache&amp;rsquo;&lt;/p>
&lt;/blockquote>
&lt;p>权限问题，把以上两个文件夹设置为可以修改与写入即可。&lt;/p>
&lt;h3 id="修改环境变量">修改环境变量&lt;/h3>
&lt;p>最后记得把 npm 的环境变量改一下，改成 &lt;code>node_global&lt;/code> 这个路径。&lt;/p>
&lt;h2 id="换源">换源&lt;/h2>
&lt;p>改为淘宝源。&lt;/p>
&lt;h3 id="npm-换源">npm 换源&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">npm config &lt;span class="nb">set&lt;/span> registry https://registry.npm.taobao.org
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="yarn-换源">yarn 换源&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">yarn config &lt;span class="nb">set&lt;/span> registry https://registry.npm.taobao.org/
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="reference">Reference&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.cnblogs.com/hellomrr/p/13237653.html" target="_blank" rel="noopener"
>https://www.cnblogs.com/hellomrr/p/13237653.html&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Archives</title><link>https://petrichor.net.cn/archives/</link><pubDate>Sun, 06 Mar 2022 00:00:00 +0000</pubDate><guid>https://petrichor.net.cn/archives/</guid><description/></item><item><title>『Go』静态文件嵌入</title><link>https://petrichor.net.cn/p/go-embed-gin/</link><pubDate>Wed, 02 Mar 2022 16:04:50 +0800</pubDate><guid>https://petrichor.net.cn/p/go-embed-gin/</guid><description>&lt;p>若未设置 live 参数，则直接调用嵌入的文件；&lt;/p>
&lt;p>若设置了 live，调用外部文件，这样只修改这些静态文件不需要重新编译。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//go:embed static
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">Static&lt;/span> &lt;span class="nx">embed&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">FS&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">GetFileSystem&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">FileSystem&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Args&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">&amp;gt;&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Args&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="o">==&lt;/span> &lt;span class="s">&amp;#34;live&amp;#34;&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;using live mode&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">FS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">os&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">DirFS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;static&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">log&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;using embed mode&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fsys&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">fs&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Sub&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">Static&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;static&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">if&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">!=&lt;/span> &lt;span class="kc">nil&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nb">panic&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">err&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">http&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">FS&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">fsys&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>限流算法</title><link>https://petrichor.net.cn/p/rate-limiting/</link><pubDate>Sat, 05 Feb 2022 09:12:20 +0800</pubDate><guid>https://petrichor.net.cn/p/rate-limiting/</guid><description>&lt;p>限流是高并发服务中非常有效和常用的解决方案，用来限制请求速率，避免服务过载。&lt;/p>
&lt;p>常见的限流算法有很多种，如固定时间窗口、滑动时间窗口、漏桶、令牌桶等。&lt;/p>
&lt;h2 id="固定时间窗口算法">固定时间窗口算法&lt;/h2>
&lt;p>这是一种比较简单的限流算法，一定时间内，对请求进行&lt;strong>计数&lt;/strong>，达到&lt;strong>阈值&lt;/strong>则暂不接受请求，时间到达临界值则&lt;strong>重新计数&lt;/strong>。&lt;/p>
&lt;p>比如我们要限制一分钟接受请求 60 次，从第一次收到请求起开始计时，在接下来的一分钟内，每收到一个请求计数就 +1 ，超过限制的 60 次后就开始拒绝请求，直到一分钟计时结束，重新开始计数。&lt;/p>
&lt;p>这种算法优点是&lt;strong>简单&lt;/strong>，缺点也很明显，我们没办法控制接收到的请求是&lt;strong>按时间均匀分布&lt;/strong>的。&lt;/p>
&lt;p>如果第一分钟的前半分钟只收到了 10 次请求，后半分钟收到了 50 次；第二分钟反过来，前半分钟收到了 50 次，后半分钟收到了 10 次。很明显，中间的两个半分钟（也就是一分钟）内一共收到了 100 次请求，超出了限制，这不是我们想要的。&lt;/p>
&lt;p>还有一种情况，前十秒我们收到的请求数达到了最大数，后面五十秒的请求就只能全部拒绝，这种现象也叫**“突刺现象”**。&lt;/p>
&lt;p>{% note info 突刺现象 %}&lt;/p>
&lt;p>指在&lt;strong>一定时间内的一小段时间内就用完了所有资源，后面大部分时间中无资源可用&lt;/strong>。&lt;/p>
&lt;p>{% endnote %}&lt;/p>
&lt;h2 id="滑动时间窗口算法sliding-window">滑动时间窗口算法(Sliding Window)&lt;/h2>
&lt;p>针对固定时间算法会在临界点存在瞬间大流量冲击的场景，滑动时间窗口计数器算法应运而生。&lt;/p>
&lt;p>学过计算机网络的同学，应该都记得滑动时间窗口协议。这个协议是 TCP 协议的一种应用，用于网络数据传输时的流量控制，以避免拥塞的发生。这里的滑动时间窗口算法原理类似，只是应用场景不同。&lt;/p>
&lt;p>它将时间窗口划分为更小的时间片段，每过一个时间片段，我们的时间窗口就会往右滑动一格，每个时间片段都有独立的计数器。我们在计算整个时间窗口内的请求总数时会累加所有的时间片段内的计数器。时间窗口划分的越细，那么滑动窗口的滚动就越平滑，限流的统计就会越精确。&lt;/p>
&lt;h2 id="漏桶算法leaky-bucket">漏桶算法(Leaky Bucket)&lt;/h2>
&lt;p>漏桶算法控制输出速率而不管输入数据的突发性，当输入空闲的时候，该算法不执行任何动作。&lt;/p>
&lt;p>就像一个漏水的桶，系统收到的请求就是流入桶里的水，处理请求就是让水从下面流出来，在这里输出的速率是恒定的。漏桶算法通过控制流量输出速率，平滑网络上的突发流量，实现流量整形，以保证网络服务的稳定。&lt;/p>
&lt;h2 id="令牌桶算法token-bucket">令牌桶算法(Token Bucket)&lt;/h2>
&lt;p>系统以一定的速度向令牌桶中放置令牌，当接收到请求时，向令牌桶中申请令牌，如果能够申请到，请求正常进行，反之不响应请求。典型情况下，令牌桶算法用来控制发送到网络上的数据的数目，并允许突发数据的发送。&lt;/p>
&lt;p>其实 golang 标准库中就有限流算法的实现，即 &lt;code>golang.org/x/time/rate&lt;/code> 库，该限流器就是基于令牌桶实现的。&lt;/p>
&lt;h2 id="reference">Reference&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://baike.baidu.com/item/%e6%bc%8f%e6%a1%b6%e7%ae%97%e6%b3%95/8455361" target="_blank" rel="noopener"
>漏桶算法 | 百度百科&lt;/a>&lt;/li>
&lt;li>&lt;a class="link" href="https://baike.baidu.com/item/%e4%bb%a4%e7%89%8c%e6%a1%b6%e7%ae%97%e6%b3%95" target="_blank" rel="noopener"
>令牌桶算法 | 百度百科&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>journalctl - 查看日志</title><link>https://petrichor.net.cn/p/journalctl/</link><pubDate>Fri, 04 Feb 2022 16:57:57 +0800</pubDate><guid>https://petrichor.net.cn/p/journalctl/</guid><description>&lt;p>Systemd 统一管理所有 Unit 的启动日志。带来的好处就是可以只用 journalctl 一个命令，查看到所有日志（内核日志和应用日志）。&lt;/p>
&lt;blockquote>
&lt;p>&lt;a class="link" href="https://www.linuxcool.com/journalctl" target="_blank" rel="noopener"
>https://www.linuxcool.com/journalctl&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>&lt;strong>语法格式：&lt;/strong> journalctl [参数]&lt;/p>
&lt;p>&lt;strong>常用参数：&lt;/strong>&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>-k&lt;/th>
&lt;th style="text-align:left">查看内核日志&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>-b&lt;/td>
&lt;td style="text-align:left">查看系统本次启动的日志&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-u&lt;/td>
&lt;td style="text-align:left">查看指定服务的日志&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-n&lt;/td>
&lt;td style="text-align:left">指定日志条数&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>-f&lt;/td>
&lt;td style="text-align:left">追踪日志&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&amp;ndash;disk-usage&lt;/td>
&lt;td style="text-align:left">查看当前日志占用磁盘的空间的总大小&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;p>&lt;strong>参考实例&lt;/strong>&lt;/p>
&lt;p>查看所有日志：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@linux ~]# journalctl
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看内核日志：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@linux ~]# journalctl -k
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看系统本次启动的日志：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@linux ~]# journalctl -b
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看httpd的日志：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@linux ~]# journalctl -u httpd
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>查看最近发生的20条日志：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@linux ~]# journalctl -n 20
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>追踪日志：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">[root@linux ~]# journalctl -f
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div></description></item><item><title>『Go』一些有意思的代码写法</title><link>https://petrichor.net.cn/p/go-some-interesting-code/</link><pubDate>Wed, 02 Feb 2022 14:59:25 +0800</pubDate><guid>https://petrichor.net.cn/p/go-some-interesting-code/</guid><description>&lt;h2 id="函数的不定参">函数的不定参&lt;/h2>
&lt;p>新亮笔记、gRPC、kratos、&lt;a class="link" href="https://github.com/schollz/progressbar" target="_blank" rel="noopener"
>progressbar&lt;/a> 等项目都大量用到了这个写法。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;span class="lnt">19
&lt;/span>&lt;span class="lnt">20
&lt;/span>&lt;span class="lnt">21
&lt;/span>&lt;span class="lnt">22
&lt;/span>&lt;span class="lnt">23
&lt;/span>&lt;span class="lnt">24
&lt;/span>&lt;span class="lnt">25
&lt;/span>&lt;span class="lnt">26
&lt;/span>&lt;span class="lnt">27
&lt;/span>&lt;span class="lnt">28
&lt;/span>&lt;span class="lnt">29
&lt;/span>&lt;span class="lnt">30
&lt;/span>&lt;span class="lnt">31
&lt;/span>&lt;span class="lnt">32
&lt;/span>&lt;span class="lnt">33
&lt;/span>&lt;span class="lnt">34
&lt;/span>&lt;span class="lnt">35
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Logger&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Option&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">option&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">option&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">level&lt;/span> &lt;span class="nx">Level&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fields&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">file&lt;/span> &lt;span class="nx">io&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">Writer&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">timeLayout&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">disableConsole&lt;/span> &lt;span class="kt">bool&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">NewLogger&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">opts&lt;/span> &lt;span class="o">...&lt;/span>&lt;span class="nx">Option&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">Logger&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">error&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">logger&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nb">new&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">option&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">for&lt;/span> &lt;span class="nx">_&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">f&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="k">range&lt;/span> &lt;span class="nx">opts&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">f&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">opt&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">// ...
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nx">logger&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nx">XXX&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nx">logger&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kc">nil&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">WithErrorLevel&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="nx">Option&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">opt&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">option&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">level&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">ErrorLevel&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">WithField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">value&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="nx">Option&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="kd">func&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">opt&lt;/span> &lt;span class="o">*&lt;/span>&lt;span class="nx">option&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">opt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">fields&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="nx">key&lt;/span>&lt;span class="p">]&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nx">value&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>使用&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nx">logger&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="nx">err&lt;/span> &lt;span class="o">:=&lt;/span> &lt;span class="nf">NewLogger&lt;/span>&lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">WithField&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;key&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="s">&amp;#34;value&amp;#34;&lt;/span>&lt;span class="p">),&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这样写有一个好处，后续新增其他参数时，也很方便配置。&lt;/p>
&lt;h2 id="接口相关">接口相关&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="nx">Student&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">student&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="c1">// 一
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">Student&lt;/span> &lt;span class="kd">interface&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nf">i&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="c1">// 二
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nf">Study&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">type&lt;/span> &lt;span class="nx">student&lt;/span> &lt;span class="kd">struct&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">Name&lt;/span> &lt;span class="kt">string&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="第一种">第一种&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">var&lt;/span> &lt;span class="nx">_&lt;/span> &lt;span class="nx">Student&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="p">(&lt;/span>&lt;span class="o">*&lt;/span>&lt;span class="nx">student&lt;/span>&lt;span class="p">)(&lt;/span>&lt;span class="kc">nil&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>强制 &lt;code>*student&lt;/code> 去实现 &lt;code>Student&lt;/code> 接口，编译器会进行检查。&lt;/p>
&lt;p>如果没有实现呢，编译器就会报错：&lt;/p>
&lt;blockquote>
&lt;p>panic: runtime error: invalid memory address or nil pointer dereference&lt;/p>
&lt;/blockquote>
&lt;p>如果去掉那一行强制检查，就不会报错了。&lt;/p>
&lt;h3 id="第二种">第二种&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="nf">i&lt;/span>&lt;span class="p">()&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这也是一种很巧妙的写法，强制 &lt;code>Student&lt;/code> 接口中的方法只能在本包中实现，因为有这个首字母小写的方法，其他包是不能实现的。这里的方法名只要是首字母小写就可以。&lt;/p></description></item><item><title>Webp Bat</title><link>https://petrichor.net.cn/p/webp-bat/</link><pubDate>Sun, 26 Dec 2021 23:00:39 +0800</pubDate><guid>https://petrichor.net.cn/p/webp-bat/</guid><description>&lt;h2 id="遍历指定文件夹下的所有-png-文件并转换为-webp-格式">遍历&lt;strong>指定文件夹&lt;/strong>下的所有 &lt;code>.png&lt;/code> 文件，并转换为 &lt;code>.webp&lt;/code> 格式&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">@echo off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">for %%a in (D:\Blog\source\assets\*.png)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> do (cwebp.exe -q 80 %%a -o %%~na.webp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pause
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="遍历当前目录所有子文件夹下的所有-png-文件并转换为-webp-格式">遍历当前目录&lt;strong>所有子文件夹&lt;/strong>下的所有 &lt;code>.png&lt;/code> 文件，并转换为 &lt;code>.webp&lt;/code> 格式&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;span class="line">&lt;span class="cl">@echo off
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">set DIR=&amp;#34;%cd%&amp;#34;
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">echo DIR=%DIR%
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">for /d %%d in (*) do (
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> echo %%d
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> for %%a in (%%d\*.png) do (cwebp.exe -q 80 %%a -o %%d\%%~na.webp)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">)
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">pause
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;blockquote>
&lt;p>其中 &lt;strong>&lt;code>%%~na&lt;/code>&lt;/strong> 是取 &lt;strong>&lt;code>%%a&lt;/code>&lt;/strong> 这个文件的&lt;strong>文件名&lt;/strong>（去掉路径且不带后缀）&lt;/p>
&lt;/blockquote>
&lt;p>本来是用 &lt;code>gulp-webp&lt;/code> 的，结果一直报错而且乱码，找不到原因，只能手动转了（破案了，这个库我下载之后找不到对应的二进制文件，把原先下载的复制过去就好了）。&lt;/p></description></item><item><title>『Go』const常量与内联函数</title><link>https://petrichor.net.cn/p/go-const-inline/</link><pubDate>Fri, 12 Nov 2021 14:03:19 +0800</pubDate><guid>https://petrichor.net.cn/p/go-const-inline/</guid><description>&lt;p>我想定义一个像这样的常量：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="nx">Code&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="kd">map&lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="kt">string&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="kd">interface&lt;/span>&lt;span class="p">{}{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;a&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;123&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;b&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s">&amp;#34;456&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>发现报错了：&lt;/p>
&lt;blockquote>
&lt;p>Const initializer &amp;lsquo;map[string]interface{}{&amp;hellip;}&amp;rsquo; is not a constant&lt;/p>
&lt;/blockquote>
&lt;p>而当我这样定义时：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="nx">Len&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;qwe&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="nx">Len2&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nf">length&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;qwe&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//length(&amp;#34;qwe&amp;#34;) (value of type int) is not constant
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">length&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>发现 &lt;code>Len&lt;/code> 不会报错，而 &lt;code>Len2&lt;/code> 却会报错。那 Golang 中什么才可以定义为常量呢？&lt;/p>
&lt;p>原来 Golang 中的常量是编译期常量，在编译时就会完全确定取值，并且只能是&lt;strong>布尔型&lt;/strong>、&lt;strong>数字型（整数型、浮点型和复数）&lt;strong>和&lt;/strong>字符串型&lt;/strong>&lt;/p>
&lt;p>所以不能将函数的返回值赋给常量(函数调用发生在运行时期)，文章开头的 &lt;code>map&lt;/code> 也不能定义为常量&lt;/p>
&lt;p>相比之下，&lt;strong>Java&lt;/strong> 中声明为 &lt;code>final&lt;/code> 类型的基本类型或声明为 &lt;code>String&lt;/code> 类型并直接赋值(非运算)的变量和 &lt;strong>JavaScript&lt;/strong> 中的 &lt;code>const&lt;/code> 代表的是一次性赋值的变量，本质上还是变量，只是不允许再做修改&lt;/p>
&lt;p>{% note tip tip %}
这里可以用锁
{% endnote %}&lt;/p>
&lt;p>可是 &lt;code>len()&lt;/code> 为什么可以呢，难道这个函数就不是函数了吗？&lt;/p>
&lt;p>一番搜索后我看到了一个词：&lt;strong>内联函数&lt;/strong>&lt;/p>
&lt;h2 id="内联函数">内联函数&lt;/h2>
&lt;p>什么是内联函数&lt;/p>
&lt;p>{% note info 内联函数 %}&lt;/p>
&lt;p>在计算机科学中，&lt;strong>内联函数&lt;/strong>（有时称作&lt;strong>在线函数&lt;/strong>或&lt;strong>编译时期展开函数&lt;/strong>）是一种编程语言结构，用来建议编译器对一些特殊函数进行内联扩展（有时称作&lt;strong>在线扩展&lt;/strong>）。&lt;/p>
&lt;blockquote>
&lt;p>引自&lt;a class="link" href="https://baike.baidu.com/item/%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0/9567625" target="_blank" rel="noopener"
>内联函数_百度百科&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;p>{% endnote %}&lt;/p>
&lt;p>原来 &lt;code>len()&lt;/code> 是一个内联函数，既然他是&lt;strong>编译时期展开函数&lt;/strong>，那就没问题了&lt;/p>
&lt;p>学过 C 语言的应该对内联函数不陌生，在 C 语言中有一个关键字 &lt;strong>&lt;code>inline&lt;/code>&lt;/strong> ， 使用 &lt;strong>&lt;code>inline&lt;/code>&lt;/strong> 修饰的函数就是内联函数。比如：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c++" data-lang="c++">&lt;span class="line">&lt;span class="cl">&lt;span class="cp">#include&lt;/span> &lt;span class="cpf">&amp;lt;stdio.h&amp;gt;&lt;/span>&lt;span class="cp">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="cp">&lt;/span>&lt;span class="kr">inline&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="nf">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="kt">int&lt;/span> &lt;span class="n">a&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="p">{&lt;/span> &lt;span class="k">return&lt;/span> &lt;span class="n">a&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="n">b&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kt">int&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="n">add&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="mi">1&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">));&lt;/span> &lt;span class="c1">// 3
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这段代码中 &lt;code>int add(int a, int b)&lt;/code> 使用了 &lt;code>inline&lt;/code> 进行修饰，那代码在执行的时候就会变成下面这样：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-c++" data-lang="c++">&lt;span class="line">&lt;span class="cl">&lt;span class="n">printf&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;%d&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="mi">1&lt;/span> &lt;span class="o">+&lt;/span> &lt;span class="mi">2&lt;/span>&lt;span class="p">);&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>这样可以避免频繁调用函数时栈内存重复开辟所带来的消耗，一般用于这种能够快速执行的短小的函数，因为在这种情况下函数调用的时间消耗显得更为突出&lt;/p>
&lt;hr>
&lt;p>我们再来运行一下这段代码&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">package&lt;/span> &lt;span class="nx">main&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="nx">Len&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;qwe&amp;#34;&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="nx">hello&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Hello World&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">length&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span> &lt;span class="kt">string&lt;/span>&lt;span class="p">)&lt;/span> &lt;span class="kt">int&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="k">return&lt;/span> &lt;span class="nb">len&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">a&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="kd">func&lt;/span> &lt;span class="nf">main&lt;/span>&lt;span class="p">()&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nf">length&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="s">&amp;#34;qwe&amp;#34;&lt;/span>&lt;span class="p">))&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nx">fmt&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nf">Println&lt;/span>&lt;span class="p">(&lt;/span>&lt;span class="nx">hello&lt;/span>&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>执行 &lt;code>go run --gcflags=-m .\main.go&lt;/code> ，输出如下：&lt;/p>
&lt;blockquote>
&lt;p>&lt;code># command-line-arguments&lt;/code>
.\main.go:8:6: can inline length
.\main.go:13:20: inlining call to length &lt;br>
.\main.go:13:13: inlining call to fmt.Println
.\main.go:14:13: inlining call to fmt.Println
.\main.go:8:13: a does not escape
.\main.go:13:20: length(&amp;ldquo;qwe&amp;rdquo;) escapes to heap
.\main.go:13:13: []interface {}{&amp;hellip;} does not escape
.\main.go:14:13: hello escapes to heap
.\main.go:14:13: []interface {}{&amp;hellip;} does not escape
&lt;!-- raw HTML omitted -->:1: .this does not escape
&lt;!-- raw HTML omitted -->:1: .this does not escape
3
Hello World&lt;/p>
&lt;/blockquote>
&lt;p>可以看到，&lt;code>length&lt;/code> 可以作为内联函数，&lt;code>main&lt;/code> 不可以，而 &lt;code>fmt.Println&lt;/code> 也是一个内联函数。我们再来这样跑一下：&lt;code>go run --gcflags=&amp;quot;-m -m&amp;quot; .\main.go&lt;/code> ，注意中间加了一个 &lt;code>-m&lt;/code> ，得到输出如下，可以看到更详细地信息，也可以看到 &lt;code>fmt.Println&lt;/code> 与 &lt;code>length&lt;/code> 都被展开为了怎样的形式：&lt;/p>
&lt;p>{% fold %}&lt;/p>
&lt;blockquote>
&lt;p>&lt;code>#command-line-arguments&lt;/code>
.\main.go:8:6: can inline length with cost 3 as: func(string) int { return len(a) }
.\main.go:12:6: cannot inline main: function too complex: cost 157 exceeds budget 80
.\main.go:13:20: inlining call to length func(string) int { return len(a) }
.\main.go:13:13: inlining call to fmt.Println func(&amp;hellip;interface {}) (int, error) { var fmt..autotmp_3 int; fmt..autotmp_3 = &lt;!-- raw HTML omitted -->; var fmt..autotmp_4 error; fmt..autotmp_4 = &lt;!-- raw HTML omitted -->; fmt..autotmp_3, fmt..autotmp_4 = fmt.Fprintln(io.Writer(os.Stdout), fmt.a&amp;hellip;); return fmt..autotmp_3, fmt..autotmp_4 }
.\main.go:14:13: inlining call to fmt.Println func(&amp;hellip;interface {}) (int, error) { var fmt..autotmp_3 int; fmt..autotmp_3 = &lt;!-- raw HTML omitted -->; var fmt..autotmp_4 error; fmt..autotmp_4 = &lt;!-- raw HTML omitted -->; fmt..autotmp_3, fmt..autotmp_4 = fmt.Fprintln(io.Writer(os.Stdout), fmt.a&amp;hellip;); return fmt..autotmp_3, fmt..autotmp_4 }
.\main.go:8:13: a does not escape
.\main.go:14:13: hello escapes to heap:
.\main.go:14:13: flow: ~arg0 = &amp;amp;{storage for hello}:
.\main.go:14:13: from hello (spill) at .\main.go:14:13
.\main.go:14:13: from ~arg0 := hello (assign-pair) at .\main.go:14:13
.\main.go:14:13: flow: {storage for []interface {}{&amp;hellip;}} = ~arg0:
.\main.go:14:13: from []interface {}{&amp;hellip;} (slice-literal-element) at .\main.go:14:13
.\main.go:14:13: flow: fmt.a = &amp;amp;{storage for []interface {}{&amp;hellip;}}:
.\main.go:14:13: from []interface {}{&amp;hellip;} (spill) at .\main.go:14:13
.\main.go:14:13: from fmt.a = []interface {}{&amp;hellip;} (assign) at .\main.go:14:13
.\main.go:14:13: flow: {heap} = *fmt.a:
.\main.go:14:13: from fmt.Fprintln(io.Writer(os.Stdout), fmt.a&amp;hellip;) (call parameter) at .\main.go:14:13
.\main.go:13:20: length(&amp;ldquo;qwe&amp;rdquo;) escapes to heap:
.\main.go:13:20: flow: ~arg0 = &amp;amp;{storage for length(&amp;ldquo;qwe&amp;rdquo;)}:
.\main.go:13:20: from length(&amp;ldquo;qwe&amp;rdquo;) (spill) at .\main.go:13:20
.\main.go:13:20: from ~arg0 := length(&amp;ldquo;qwe&amp;rdquo;) (assign-pair) at .\main.go:13:13
.\main.go:13:20: flow: {storage for []interface {}{&amp;hellip;}} = ~arg0:
.\main.go:13:20: from []interface {}{&amp;hellip;} (slice-literal-element) at .\main.go:13:13
.\main.go:13:20: flow: fmt.a = &amp;amp;{storage for []interface {}{&amp;hellip;}}:
.\main.go:13:20: from []interface {}{&amp;hellip;} (spill) at .\main.go:13:13
.\main.go:13:20: from fmt.a = []interface {}{&amp;hellip;} (assign) at .\main.go:13:13
.\main.go:13:20: flow: {heap} = *fmt.a:
.\main.go:13:20: from fmt.Fprintln(io.Writer(os.Stdout), fmt.a&amp;hellip;) (call parameter) at .\main.go:13:13
.\main.go:13:20: length(&amp;ldquo;qwe&amp;rdquo;) escapes to heap
.\main.go:13:13: []interface {}{&amp;hellip;} does not escape
.\main.go:14:13: hello escapes to heap
.\main.go:14:13: []interface {}{&amp;hellip;} does not escape
&lt;!-- raw HTML omitted -->:1: .this does not escape
&lt;!-- raw HTML omitted -->:1: .this does not escape
3
Hello World&lt;/p>
&lt;/blockquote>
&lt;p>{% endfold %}&lt;/p>
&lt;h2 id="无类型常量">无类型常量&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-golang" data-lang="golang">&lt;span class="line">&lt;span class="cl">&lt;span class="kd">const&lt;/span> &lt;span class="nx">hello&lt;/span> &lt;span class="p">=&lt;/span> &lt;span class="s">&amp;#34;Hello World&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">//const hello untyped string = &amp;#34;Hello World&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>我们发现，当我们这样定义一个字符串常量时，它的类型是 &lt;code>untyped string&lt;/code>&lt;/p>
&lt;p>原来 Go 中有六种未明确类型的常量类型，分别是&lt;/p>
&lt;ul>
&lt;li>无类型的布尔型&lt;/li>
&lt;li>无类型的整形&lt;/li>
&lt;li>无类型的字符型&lt;/li>
&lt;li>无类型的浮点型&lt;/li>
&lt;li>无类型的复数&lt;/li>
&lt;li>无类型的字符串&lt;/li>
&lt;/ul>
&lt;p>编译器会为这些没有明确基础类型的常量提供比基础类型更高精度的算术运算，赋值给特定类型时会有影响&lt;/p></description></item><item><title>正则表达式(regular expression)</title><link>https://petrichor.net.cn/p/regexp/</link><pubDate>Sun, 31 Oct 2021 15:56:48 +0800</pubDate><guid>https://petrichor.net.cn/p/regexp/</guid><description>&lt;blockquote>
&lt;p>本文摘自&lt;a class="link" href="https://www.runoob.com/regexp/regexp-syntax.html" target="_blank" rel="noopener"
>正则表达式-语法|菜鸟教程&lt;/a>&lt;/p>
&lt;/blockquote>
&lt;h3 id="普通字符">普通字符&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>字符&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>[ABC]&lt;/code>&lt;/td>
&lt;td>匹配所有[]中的字符&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>[^ABC]&lt;/code>&lt;/td>
&lt;td>匹配除了[]中字符的所有字符&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>[A-Z]&lt;/code>&lt;/td>
&lt;td>匹配一个区间中的所有字符，例子表示匹配所有大写字母&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>.&lt;/code>&lt;/td>
&lt;td>匹配除换行符(\n、\r)之外的任何单个字符，相当于&lt;code>[^\n\r]&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>[\s\S]&lt;/code>&lt;/td>
&lt;td>匹配所有，\s是所有空白符，包括换行；\S是所有非空白符，不包括换行&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>\w&lt;/code>&lt;/td>
&lt;td>匹配字母、数字、下划线，等价于[A-Za-z0-9_]&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="非打印字符">非打印字符&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th>字符&lt;/th>
&lt;th>描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td>&lt;code>\cx&lt;/code>&lt;/td>
&lt;td>匹配由 x 指明的控制字符。例如，\cM匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 &amp;lsquo;c&amp;rsquo; 字符&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>\f&lt;/code>&lt;/td>
&lt;td>匹配一个换页符，等价于 &lt;code>\x0c&lt;/code> 和 &lt;code>\cL&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>\n&lt;/code>&lt;/td>
&lt;td>匹配一个换行符。等价于 &lt;code>\x0a&lt;/code> 和 &lt;code>\cJ&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>\r&lt;/code>&lt;/td>
&lt;td>匹配一个回车符。等价于 &lt;code>\x0d&lt;/code> 和 &lt;code>\cM&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>\s&lt;/code>&lt;/td>
&lt;td>匹配任何空白字符，包括空格、制表符、换页符等等。等价于 &lt;code>[ \f\n\r\t\v]&lt;/code>。注意 Unicode 正则表达式会匹配全角空格符&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>\S&lt;/code>&lt;/td>
&lt;td>匹配任何非空白字符。等价于 &lt;code>[^ \f\n\r\t\v]&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>\t&lt;/code>&lt;/td>
&lt;td>匹配一个制表符。等价于 &lt;code>\x09&lt;/code> 和 &lt;code>\cI&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td>&lt;code>\v&lt;/code>&lt;/td>
&lt;td>匹配一个垂直制表符。等价于 &lt;code>\x0b&lt;/code> 和 &lt;code>\cK&lt;/code>&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="特殊字符">特殊字符&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">特别字符&lt;/th>
&lt;th style="text-align:left">描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">$&lt;/td>
&lt;td style="text-align:left">匹配输入字符串的结尾位置。如果设置了 RegExp 对象的 Multiline 属性，则 $ 也匹配 &lt;code>\n&lt;/code> 或 &lt;code>\r&lt;/code>。要匹配 $ 字符本身，请使用 &lt;code>\$&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">( )&lt;/td>
&lt;td style="text-align:left">标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，请使用 &lt;code>\(&lt;/code> 和 &lt;code>\)&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">*&lt;/td>
&lt;td style="text-align:left">匹配前面的子表达式零次或多次。要匹配 &lt;code>*&lt;/code> 字符，请使用 &lt;code>\*&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">+&lt;/td>
&lt;td style="text-align:left">匹配前面的子表达式一次或多次。要匹配 &lt;code>+&lt;/code> 字符，请使用 &lt;code>\+&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">.&lt;/td>
&lt;td style="text-align:left">匹配除换行符 &lt;code>\n&lt;/code> 之外的任何单字符。要匹配 &lt;code>.&lt;/code> ，请使用 &lt;code>\. &lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">[&lt;/td>
&lt;td style="text-align:left">标记一个中括号表达式的开始。要匹配 &lt;code>[&lt;/code>，请使用 &lt;code>\[&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">?&lt;/td>
&lt;td style="text-align:left">匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。要匹配 &lt;code>?&lt;/code> 字符，请使用 &lt;code>\?&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">\&lt;/td>
&lt;td style="text-align:left">将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， &lt;code>n&lt;/code> 匹配字符 &lt;code>n&lt;/code>。&lt;code>\n&lt;/code> 匹配换行符。序列 &lt;code>\\&lt;/code> 匹配 &lt;code>\&lt;/code>，而 &lt;code>\(&lt;/code> 则匹配 &lt;code>(&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">^&lt;/td>
&lt;td style="text-align:left">匹配输入字符串的开始位置，除非在方括号表达式中使用，当该符号在方括号表达式中使用时，表示不接受该方括号表达式中的字符集合。要匹配 &lt;code>^&lt;/code> 字符本身，请使用 &lt;code>\^&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">{&lt;/td>
&lt;td style="text-align:left">标记限定符表达式的开始。要匹配 &lt;code>{&lt;/code>，请使用 &lt;code>\{&lt;/code>&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">竖线&lt;/td>
&lt;td style="text-align:left">指明两项之间的一个选择。要匹配 &amp;lsquo;竖线&amp;rsquo;，请使用 &lt;code>\&lt;/code> + &lt;code>竖线&lt;/code>（竖线是 markdown 中表格的一部分，会导致表格错位，暂时没找到解决办法，用汉语取代）&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="限定符">限定符&lt;/h3>
&lt;p>限定符用来指定正则表达式的一个给定组件必须要出现多少次才能满足匹配。有 ***** 或 &lt;strong>+&lt;/strong> 或 &lt;strong>?&lt;/strong> 或 &lt;strong>{n}&lt;/strong> 或 &lt;strong>{n,}&lt;/strong> 或 &lt;strong>{n,m}&lt;/strong> 共6种。&lt;/p>
&lt;p>正则表达式的限定符有：&lt;/p>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">字符&lt;/th>
&lt;th style="text-align:left">描述&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">&lt;code>*&lt;/code>&lt;/td>
&lt;td style="text-align:left">匹配前面的子表达式零次或多次。例如，zo* 能匹配 &amp;ldquo;z&amp;rdquo; 以及 &amp;ldquo;zoo&amp;rdquo;。* 等价于{0,}&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>+&lt;/code>&lt;/td>
&lt;td style="text-align:left">匹配前面的子表达式一次或多次。例如，&amp;lsquo;zo+&amp;rsquo; 能匹配 &amp;ldquo;zo&amp;rdquo; 以及 &amp;ldquo;zoo&amp;rdquo;，但不能匹配 &amp;ldquo;z&amp;rdquo;。+ 等价于 {1,}&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>?&lt;/code>&lt;/td>
&lt;td style="text-align:left">匹配前面的子表达式零次或一次。例如，&amp;ldquo;do(es)?&amp;rdquo; 可以匹配 &amp;ldquo;do&amp;rdquo; 、 &amp;ldquo;does&amp;rdquo; 中的 &amp;ldquo;does&amp;rdquo; 、 &amp;ldquo;doxy&amp;rdquo; 中的 &amp;ldquo;do&amp;rdquo; 。? 等价于 {0,1}&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>{n}&lt;/code>&lt;/td>
&lt;td style="text-align:left">n 是一个非负整数。匹配确定的 n 次。例如，&amp;lsquo;o{2}&amp;rsquo; 不能匹配 &amp;ldquo;Bob&amp;rdquo; 中的 &amp;lsquo;o&amp;rsquo;，但是能匹配 &amp;ldquo;food&amp;rdquo; 中的两个 o&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>{n,}&lt;/code>&lt;/td>
&lt;td style="text-align:left">n 是一个非负整数。至少匹配n 次。例如，&amp;lsquo;o{2,}&amp;rsquo; 不能匹配 &amp;ldquo;Bob&amp;rdquo; 中的 &amp;lsquo;o&amp;rsquo;，但能匹配 &amp;ldquo;foooood&amp;rdquo; 中的所有 o。&amp;lsquo;o{1,}&amp;rsquo; 等价于 &amp;lsquo;o+&amp;rsquo;。&amp;lsquo;o{0,}&amp;rsquo; 则等价于 &amp;lsquo;o*&amp;rsquo;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&lt;code>{n,m}&lt;/code>&lt;/td>
&lt;td style="text-align:left">m 和 n 均为非负整数，其中n &amp;lt;= m。最少匹配 n 次且最多匹配 m 次。例如，&amp;ldquo;o{1,3}&amp;rdquo; 将匹配 &amp;ldquo;fooooood&amp;rdquo; 中的前三个 o。&amp;lsquo;o{0,1}&amp;rsquo; 等价于 &amp;lsquo;o?&amp;rsquo;。请注意在逗号和两个数之间不能有空格&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table></description></item><item><title>Docker</title><link>https://petrichor.net.cn/p/docker/</link><pubDate>Fri, 08 Oct 2021 11:24:42 +0800</pubDate><guid>https://petrichor.net.cn/p/docker/</guid><description>&lt;!-- raw HTML omitted -->
&lt;h2 id="docker">Docker&lt;/h2>
&lt;h3 id="什么是-docker">什么是 Docker&lt;/h3>
&lt;p>Docker 是一个开源的应用容器引擎，让开发者可以打包他们的应用以及依赖包到一个可移植的容器中，然后发布到任何流行的 Linux 或 Windows 操作系统的机器上，也可以实现虚拟化，容器是完全使用沙箱机制，相互之间不会有任何接口。&lt;/p>
&lt;h2 id="安装">安装&lt;/h2>
&lt;p>&lt;a class="link" href="https://docs.docker.com/engine/install/ubuntu/" target="_blank" rel="noopener"
>官方文档 - Install Docker Engine on Ubuntu&lt;/a>&lt;/p>
&lt;h3 id="删除旧版本">删除旧版本&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="k">for&lt;/span> pkg in docker.io docker-doc docker-compose podman-docker containerd runc&lt;span class="p">;&lt;/span> &lt;span class="k">do&lt;/span> sudo apt-get remove &lt;span class="nv">$pkg&lt;/span>&lt;span class="p">;&lt;/span> &lt;span class="k">done&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="apt-安装">apt 安装&lt;/h3>
&lt;p>设置 Docker 的 apt 存储库&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 添加 Docker 官方 GPG key:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get update
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get install ca-certificates curl gnupg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo install -m &lt;span class="m">0755&lt;/span> -d /etc/apt/keyrings
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">curl -fsSL https://download.docker.com/linux/ubuntu/gpg &lt;span class="p">|&lt;/span> sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo chmod a+r /etc/apt/keyrings/docker.gpg
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 添加 apt 源:&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> &lt;span class="s2">&amp;#34;deb [arch=&amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>dpkg --print-architecture&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34; signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="s2"> &amp;#34;&lt;/span>&lt;span class="k">$(&lt;/span>. /etc/os-release &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> &lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="nv">$VERSION_CODENAME&lt;/span>&lt;span class="s2">&amp;#34;&lt;/span>&lt;span class="k">)&lt;/span>&lt;span class="s2">&amp;#34; stable&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> sudo tee /etc/apt/sources.list.d/docker.list &amp;gt; /dev/null
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 更新&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo apt-get update
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>安装&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>下载 hello-world 镜像验证&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo docker run hello-world
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="脚本一键安装">脚本一键安装&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">curl -fsSL https://get.docker.com -o get-docker.sh
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo sh get-docker.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>将当前用户加入 docker 组： &lt;a class="link" href="#got-permission-denied" >#Got permission denied&lt;/a>&lt;/p>
&lt;h2 id="使用">使用&lt;/h2>
&lt;h3 id="基本命令">基本命令&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;span class="lnt">7
&lt;/span>&lt;span class="lnt">8
&lt;/span>&lt;span class="lnt">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 显示 Docker 版本信息&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo docker version
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 显示整个系统的信息&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo docker info
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 命令帮助&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo docker &lt;span class="nb">help&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo docker COMMAND --help
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;details>
&lt;summary>
&lt;strong>
docker 命令帮助
&lt;/strong>
&lt;/summary>
```
Usage: docker [OPTIONS] COMMAND
A self-sufficient runtime for containers
Options:
​ --config string Location of client config files (default "/home/ubuntu/.docker")
-c, --context string Name of the context to use to connect to the daemon (overrides DOCKER_HOST env var and default context set with "docker context use")
-D, --debug Enable debug mode
-H, --host list Daemon socket(s) to connect to
-l, --log-level string Set the logging level ("debug"|"info"|"warn"|"error"|"fatal") (default "info")
​ --tls Use TLS; implied by --tlsverify
​ --tlscacert string Trust certs signed only by this CA (default "/home/ubuntu/.docker/ca.pem")
​ --tlscert string Path to TLS certificate file (default "/home/ubuntu/.docker/cert.pem")
​ --tlskey string Path to TLS key file (default "/home/ubuntu/.docker/key.pem")
​ --tlsverify Use TLS and verify the remote
​ -v, --version Print version information and quit
Management Commands:
app* Docker App (Docker Inc., v0.9.1-beta3)
builder Manage builds
buildx* Build with BuildKit (Docker Inc., v0.5.1-docker)
config Manage Docker configs
container Manage containers
context Manage contexts
image Manage images
manifest Manage Docker image manifests and manifest lists
network Manage networks
node Manage Swarm nodes
plugin Manage plugins
scan* Docker Scan (Docker Inc., v0.7.0)
secret Manage Docker secrets
service Manage services
stack Manage Docker stacks
swarm Manage Swarm
system Manage Docker
trust Manage trust on Docker images
volume Manage volumes
Commands:
attach Attach local standard input, output, and error streams to a running container
build Build an image from a Dockerfile
commit Create a new image from a container's changes
cp Copy files/folders between a container and the local filesystem
create Create a new container
diff Inspect changes to files or directories on a container's filesystem
events Get real time events from the server
exec Run a command in a running container
export Export a container's filesystem as a tar archive
history Show the history of an image
images List images
import Import the contents from a tarball to create a filesystem image
info Display system-wide information
inspect Return low-level information on Docker objects
kill Kill one or more running containers
load Load an image from a tar archive or STDIN
login Log in to a Docker registry
logout Log out from a Docker registry
logs Fetch the logs of a container
pause Pause all processes within one or more containers
port List port mappings or a specific mapping for the container
ps List containers
pull Pull an image or a repository from a registry
push Push an image or a repository to a registry
rename Rename a container
restart Restart one or more containers
rm Remove one or more containers
rmi Remove one or more images
run Run a command in a new container
save Save one or more images to a tar archive (streamed to STDOUT by default)
search Search the Docker Hub for images
start Start one or more stopped containers
stats Display a live stream of container(s) resource usage statistics
stop Stop one or more running containers
tag Create a tag TARGET_IMAGE that refers to SOURCE_IMAGE
top Display the running processes of a container
unpause Unpause all processes within one or more containers
update Update configuration of one or more containers
version Show the Docker version information
wait Block until one or more containers stop, then print their exit codes
Run 'docker COMMAND --help' for more information on a command.
To get more help with docker, check out our guides at https://docs.docker.com/go/guides/
```
&lt;/details>
&lt;h3 id="镜像相关">镜像相关&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker images --help
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;details>
&lt;summary>
&lt;strong>
docker images 命令帮助
&lt;/strong>
&lt;/summary>
```
Usage: docker images [OPTIONS] [REPOSITORY[:TAG]]
List images
Options:
-a, --all Show all images (default hides intermediate images)
--digests Show digests
-f, --filter filter Filter output based on conditions provided
--format string Pretty-print images using a Go template
--no-trunc Don't truncate output
-q, --quiet Only show image IDs
```
&lt;/details>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查找镜像&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker search golang
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 拉取镜像&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker pull golang
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker pull golang:latest &lt;span class="c1"># 指定版本&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 查看已安装镜像&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker images
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 删除镜像&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker rmi golang &lt;span class="c1"># 通过镜像名&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker rmi 0ac33e5f5afa &lt;span class="c1"># 通过镜像 ID&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 删除全部镜像&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker rmi &lt;span class="k">$(&lt;/span>docker images -qa&lt;span class="k">)&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 参数 q(quiet)：只显示镜像 ID&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 参数 a(all)：显示所有镜像(包括中间镜像)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="容器相关">容器相关&lt;/h3>
&lt;p>&lt;strong>docker run - 在新容器中运行&lt;/strong>&lt;/p>
&lt;p>以交互模式在后台启动一个名为 &lt;code>grafana&lt;/code> 的容器，并分配 tty，使用宿主机网络，永远会重启。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker run -itd --net&lt;span class="o">=&lt;/span>host --restart&lt;span class="o">=&lt;/span>always --name&lt;span class="o">=&lt;/span>grafana grafana/grafana
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;details>
&lt;summary>
&lt;strong>
docker run 具体选项
&lt;/strong>
&lt;/summary>
| 选项 | 说明 |
| ----------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| -d, --detach=false | 指定容器运行于前台还是后台，默认为 false。 |
| -i, --interactive=false | 打开 STDIN，用于控制台交互。 |
| -t, --tty=false | 分配 tty 设备，可以支持终端登录，默认为 false。 |
| -u, --user="" | 指定容器的用户。 |
| -a, --attach=[] | 登录容器（必须是以 docker run -d 启动的容器）。 |
| -w, --workdir="" | 指定容器的工作目录。 |
| -c, --cpu-shares=0 | 设置容器 CPU 权重，在 CPU 共享场景使用。 |
| -e, --env=[] | 指定环境变量，容器中可以使用该环境变量。 |
| -m, --memory="" | 指定容器的内存上限。 |
| -P, --publish-all=false | 指定容器暴露的端口。 |
| -p, --publish=[] | 指定容器暴露的端口。 |
| -h, --hostname="" | 指定容器的主机名。 |
| -v, --volume=[] | 给容器挂载存储卷，挂载到容器的某个目录。 |
| –volumes-from=[] | 给容器挂载其他容器上的卷，挂载到容器的某个目录。 |
| –cap-add=[] | 添加权限。 |
| –cap-drop=[] | 删除权限。 |
| –cidfile="" | 运行容器后，在指定文件中写入容器 PID 值，一种典型的监控系统用法。 |
| –cpuset="" | 设置容器可以使用哪些 CPU，此参数可以用来容器独占 CPU。 |
| –device=[] | 添加主机设备给容器，相当于设备直通。 |
| –dns=[] | 指定容器的 dns 服务器。 |
| –dns-search=[] | 指定容器的 dns 搜索域名，写入到容器的 /etc/resolv.conf 文件。 |
| –entrypoint="" | 覆盖 image 的入口点。 |
| –env-file=[] | 指定环境变量文件，文件格式为每行一个环境变量。 |
| –expose=[] | 指定容器暴露的端口，即修改镜像的暴露端口。 |
| –link=[] | 指定容器间的关联，使用其他容器的 IP、env 等信息。 |
| –lxc-conf=[] | 指定容器的配置文件，只有在指定 --exec-driver=lxc 时使用。 |
| –name="" | 指定容器名字，后续可以通过名字进行容器管理，links 特性需要使用名字。 |
| –net=“bridge” | 器网络设置： 1. bridge 使用 docker daemon 指定的网桥。 2. host //容器使用主机的网络。 3. container:NAME_or_ID >//使用其他容器的网路，共享 IP 和 PORT 等网络资源。 4. none 容器使用自己的网络（类似–net=bridge），但是不进行配置。 |
| –privileged=false | 指定容器是否为特权容器，特权容器拥有所有的 capabilities。 |
| –restart=“no” | 指定容器停止后的重启策略: (1) no，容器退出时不重启 (2) on-failure，容器故障退出（返回值非零）时重启 (3) on-failure:3，同上，最多重启 3 次 (4) always，容器退出时总是重启 |
| –rm=false | 指定容器停止后自动删除容器(不支持以 docker run -d 启动的容器)。 |
| –sig-proxy=true | 设置由代理接受并处理信号，但是 SIGCHLD、SIGSTOP 和 SIGKILL 不能被代理。 |
&lt;/details>
&lt;h2 id="dockerfile">Dockerfile&lt;/h2>
&lt;p>&lt;strong>什么是 Dockerfile？&lt;/strong>&lt;/p>
&lt;p>{% cq %}Dockerfile 是一个用来构建镜像的文本文件，文本内容包含了一条条构建镜像所需的指令和说明。{% endcq %}&lt;/p>
&lt;p>{% note caution caution %}
Dockerfile 的指令每执行一次都会在 docker 上新建一层。所以过多无意义的层，会造成镜像膨胀过大。
{% endnote %}&lt;/p>
&lt;h2 id="docker-compose">Docker Compose&lt;/h2>
&lt;blockquote>
&lt;p>Compose 是用于定义和运行多容器 Docker 应用程序的工具。通过 Compose，您可以使用 YML 文件来配置应用程序需要的所有服务。然后，使用一个命令，就可以从 YML 文件配置中创建并启动所有服务。&lt;/p>
&lt;/blockquote>
&lt;p>Compose 使用有三个步骤：&lt;/p>
&lt;ul>
&lt;li>使用 &lt;code>Dockerfile&lt;/code> 定义应用程序的环境&lt;/li>
&lt;li>使用 &lt;code>docker-compose.yml&lt;/code> 定义构成应用程序的服务，这样他们可以在隔离环境中一起运行&lt;/li>
&lt;li>最后，执行 &lt;code>docker-compose up &lt;/code> 命令来启动并运行整个应用程序&lt;/li>
&lt;/ul>
&lt;p>看一个 &lt;code>docker-compose.yml&lt;/code> 文件示例&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;span class="lnt">17
&lt;/span>&lt;span class="lnt">18
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-yaml" data-lang="yaml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;3&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">web&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">container_name&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">dockerdev&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 容器名&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">build&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">.&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 在本目录构建&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;15000:5000&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 将容器内的 5000 端口映射到宿主机的 15000 端口&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 环境变量&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ACCESS_KEY&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">admin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 挂载数据卷（冒号前为宿主机目录，后为容器内目录）&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">.:/code&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">logvolume01:/var/log&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">links&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 链接其他容器&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">redis&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">redis&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">redis&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 数据卷&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">logvolume01&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>{}&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker-compose up
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-compose up -d &lt;span class="c1"># 后台启动&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="容器备份">容器备份&lt;/h2>
&lt;h3 id="备份">备份&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker ps -a
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;!-- raw HTML omitted -->
&lt;p>备份 grafana 容器，容器名为 grafana，容器 id 为 ab8adb9ae93d，执行如下命令：&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker commit -p ab8adb9ae93d grafana-backup
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker images
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>此时已经有了一个名为 grafana-backup 的镜像。&lt;/p>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker save grafana-backup &amp;gt; /home/ubuntu/Download/grafana-backup.tar
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="恢复">恢复&lt;/h3>
&lt;ul>
&lt;li>
&lt;p>将备份文件上传到需要使用的服务器&lt;/p>
&lt;/li>
&lt;li>
&lt;p>导入&lt;/p>
&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker load &amp;lt; /home/ubuntu/Download/grafana-backup.tar
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker images
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;p>可以看到一个名为 grafana-backup 的镜像，导入成功。&lt;/p>
&lt;h2 id="portainer-可视化">portainer 可视化&lt;/h2>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker pull portainer/portainer-ce
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker volume create portainer_data
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">docker run -d -p 8000:8000 -p 9000:9000 &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> --name&lt;span class="o">=&lt;/span>portainer --restart&lt;span class="o">=&lt;/span>always &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v /var/run/docker.sock:/var/run/docker.sock &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> -v portainer_data:/data &lt;span class="se">\
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="se">&lt;/span> portainer/portainer-ce
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="注意">注意&lt;/h2>
&lt;h3 id="got-permission-denied">Got permission denied&lt;/h3>
&lt;blockquote>
&lt;p>Got permission denied while trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get &lt;a class="link" href="http://%2Fvar%2Frun%2Fdocker.sock/v1.24/containers/json" target="_blank" rel="noopener"
>http://%2Fvar%2Frun%2Fdocker.sock/v1.24/containers/json&lt;/a>: dial unix /var/run/docker.sock: connect: permission denied&lt;/p>
&lt;/blockquote>
&lt;p>docker 进程使用 Unix Socket 而不是 TCP 端口。而默认情况下，Unix socket 属于 root 用户，需要 root 权限才能访问。&lt;/p>
&lt;blockquote>
&lt;p>&lt;p>Manage Docker as a non-root user&lt;/p>
&lt;p>The Docker daemon binds to a Unix socket, not a TCP port. By default it&amp;rsquo;s the root user that owns the Unix socket, and other users can only access it using sudo. The Docker daemon always runs as the root user.&lt;/p>
&lt;p>If you don&amp;rsquo;t want to preface the docker command with sudo, create a Unix group called docker and add users to it. When the Docker daemon starts, it creates a Unix socket accessible by members of the docker group. On some Linux distributions, the system automatically creates this group when installing Docker Engine using a package manager. In that case, there is no need for you to manually create the group.&lt;/p>
&lt;/p>&lt;span class="cite">&lt;span>― &lt;/span>&lt;span>docker docs, &lt;/span>&lt;a href="https://docs.docker.com/engine/install/linux-postinstall/#manage-docker-as-a-non-root-user">&lt;cite>Linux post-installation steps for Docker Engine&lt;/cite>&lt;/a>&lt;/span>&lt;/blockquote>
&lt;p>通过下面几步操作，可以将当前用户加入 docker 组，以后再使用 docker 就不需要输入 sudo 了。&lt;/p>
&lt;!-- raw HTML omitted -->
&lt;!-- raw HTML omitted -->
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 将当前用户加入 docker 组&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo gpasswd -a &lt;span class="si">${&lt;/span>&lt;span class="nv">USER&lt;/span>&lt;span class="si">}&lt;/span> docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 更新 docker 组&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">newgrp docker
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1"># 重启 docker 服务&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo systemctl restart docker
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="reference">Reference&lt;/h2>
&lt;ul>
&lt;li>
&lt;p>Got permission denied | &lt;a class="link" href="https://www.cnblogs.com/Li-JT/p/13994704.html" target="_blank" rel="noopener"
>https://www.cnblogs.com/Li-JT/p/13994704.html&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a class="link" href="https://www.runoob.com/docker" target="_blank" rel="noopener"
>https://www.runoob.com/docker&lt;/a>&lt;/p>
&lt;/li>
&lt;li>
&lt;p>docker备份容器到本地（以及恢复） | &lt;a class="link" href="https://blog.csdn.net/qq_20042935/article/details/106495071" target="_blank" rel="noopener"
>https://blog.csdn.net/qq_20042935/article/details/106495071&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul></description></item><item><title>Go Test 单元测试简明教程</title><link>https://petrichor.net.cn/p/go-test/</link><pubDate>Sat, 07 Aug 2021 22:06:42 +0800</pubDate><guid>https://petrichor.net.cn/p/go-test/</guid><description>&lt;h2 id="特征">特征&lt;/h2>
&lt;p>Golang 单元测试对文件名和方法名，参数都有很严格的要求。例如：&lt;/p>
&lt;ul>
&lt;li>文件名必须以 _test.go 结尾&lt;/li>
&lt;li>方法名必须是 Test 开头&lt;/li>
&lt;li>方法参数必须是 t *testing.T 或 b *testing.B&lt;/li>
&lt;/ul>
&lt;h2 id="命令详解">命令详解&lt;/h2>
&lt;p>go test 是 go 语言自带的测试工具，其中包含的是两类，单元测试(即 功能测试) 和 性能测试&lt;/p>
&lt;p>通过 &lt;code>go help test&lt;/code> 可以看到 go test 的使用说明：&lt;/p>
&lt;h3 id="格式">格式：&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-mysql" data-lang="mysql">&lt;span class="line">&lt;span class="cl">&lt;span class="n">go&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">test&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">c&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="o">-&lt;/span>&lt;span class="n">i&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">build&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="n">flags&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">packages&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="p">[&lt;/span>&lt;span class="n">flags&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">``&lt;/span>&lt;span class="k">for&lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="o">`&lt;/span>&lt;span class="n">test&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="k">binary&lt;/span>&lt;span class="p">]&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="参数">参数：&lt;/h3>
&lt;p>-c : 编译 go test 成为可执行的二进制文件，但是不运行测试。&lt;/p>
&lt;p>-i : 安装测试包依赖的 package，但是不运行测试。&lt;/p>
&lt;p>关于 build flags，调用 &lt;code>go help build&lt;/code>，这些是编译运行过程中需要使用到的参数，一般设置为空&lt;/p>
&lt;p>关于 packages，调用 &lt;code>go help packages&lt;/code>，这些是关于包的管理，一般设置为空&lt;/p>
&lt;p>关于 flags for test binary，调用 &lt;code>go help testflag&lt;/code>，这些是 go test 过程中经常使用到的参数：&lt;/p>
&lt;p>-test.v : 是否输出全部的单元测试用例（不管成功或者失败），默认没有加上，所以只输出失败的单元测试用例&lt;/p>
&lt;p>-test.run pattern : 只跑哪些单元测试用例&lt;/p>
&lt;p>-test.bench patten : 只跑那些性能测试用例&lt;/p>
&lt;p>-test.benchmem : 是否在性能测试的时候输出内存情况&lt;/p>
&lt;p>-test.benchtime t : 性能测试运行的时间，默认是1s&lt;/p>
&lt;p>-test.cpuprofile cpu.out : 是否输出cpu性能分析文件&lt;/p>
&lt;p>-test.memprofile mem.out : 是否输出内存性能分析文件&lt;/p>
&lt;p>-test.blockprofile block.out : 是否输出内部goroutine阻塞的性能分析文件&lt;/p>
&lt;p>-test.memprofilerate n : 内存性能分析的时候有一个分配了多少的时候才打点记录的问题。这个参数就是设置打点的内存分配间隔，也就是 profile 中一个 sample 代表的内存大小。默认是设置为 512 * 1024 的。如果你将它设置为 1，则每分配一个内存块就会在 profile 中有个打点，那么生成的 profile 的 sample 就会非常多。如果你设置为 0，那就是不做打点了&lt;/p>
&lt;p>你可以通过设置 memprofilerate=1 和 GOGC=off 来关闭内存回收，并且对每个内存块的分配进行观察&lt;/p>
&lt;p>-test.blockprofilerate n : 基本同上，控制的是 goroutine 阻塞时候打点的纳秒数。默认不设置就相当于 -test.blockprofilerate=1，每一纳秒都打点记录一下&lt;/p>
&lt;p>-test.parallel n : 性能测试的程序并行 cpu 数，默认等于 GOMAXPROCS&lt;/p>
&lt;p>-test.timeout t : 如果测试用例运行时间超过 t，则抛出 panic&lt;/p>
&lt;p>-test.cpu 1,2,4 : 程序运行在哪些 CPU 上面，使用二进制的 1 所在位代表，和 nginx 的 nginx_worker_cpu_affinity 是一个道理&lt;/p>
&lt;p>-test.short : 将那些运行时间较长的测试用例运行时间缩短&lt;/p></description></item><item><title>『Go』语言基础</title><link>https://petrichor.net.cn/p/go/</link><pubDate>Sat, 07 Aug 2021 22:06:41 +0800</pubDate><guid>https://petrichor.net.cn/p/go/</guid><description>&lt;img src="https://petrichor.net.cn/go.png" alt="Featured image of post 『Go』语言基础" />&lt;h2 id="语言基础">语言基础&lt;/h2>
&lt;h3 id="main函数">main函数&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>main函数不能带参数&lt;/p>
&lt;/li>
&lt;li>
&lt;p>main函数不能定义返回值&lt;/p>
&lt;/li>
&lt;li>
&lt;p>main函数所在的包必须为main&lt;/p>
&lt;/li>
&lt;li>
&lt;p>main函数中可以使用flag包来获取和解析命令行参数&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h3 id="go程序的执行启动顺序">Go程序的执行（启动）顺序&lt;/h3>
&lt;ol>
&lt;li>
&lt;p>按顺序导入所有被 main 包引用的其它包，然后在每个包中执行如下流程：&lt;/p>
&lt;/li>
&lt;li>
&lt;p>如果该包又导入了其它的包，则从第一步开始递归执行，但是每个包只会被导入一次。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>然后以相反的顺序在每个包中初始化常量和变量，如果该包含有 init 函数的话，则调用该函数。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>在完成这一切之后，main 也执行同样的过程，最后调用 main 函数开始执行程序。
包/package&lt;/p>
&lt;p>注意包级别的常量名和函数等都是以大写字母开头,它们才可以像tempconv.AbZeroC这样被外部代码访问。&lt;/p>
&lt;p>除了包的导入路径,每个包还有一个包名,包名一般是短小的名字(并不要求包名是唯一的),包名在包的声明处指定。按照惯例,一个包的名字和包的导入路径的最后一个字段相同，故这里是tempconv。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2 id="命名规范">命名规范&lt;/h2>
&lt;h3 id="package名字">package名字&lt;/h3>
&lt;ul>
&lt;li>保持package的名字和目录保持一致&lt;/li>
&lt;li>尽量采取有意义的包名，简短，有意义&lt;/li>
&lt;li>尽量和标准库不要冲突。&lt;/li>
&lt;/ul>
&lt;h3 id="文件命名">文件命名&lt;/h3>
&lt;h3 id="import规范">import规范&lt;/h3>
&lt;ul>
&lt;li>单包引入&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="s">&amp;#34;fmt&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;ul>
&lt;li>多包引入，每个包独占一行，按首字母排序（一般由ide来完成）&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt">1
&lt;/span>&lt;span class="lnt">2
&lt;/span>&lt;span class="lnt">3
&lt;/span>&lt;span class="lnt">4
&lt;/span>&lt;span class="lnt">5
&lt;/span>&lt;span class="lnt">6
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="kn">import&lt;/span> &lt;span class="p">(&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;context&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;log&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;net/http&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="s">&amp;#34;time&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="常量声明">常量声明&lt;/h3>
&lt;h3 id="变量声明">变量声明&lt;/h3>
&lt;h3 id="函数声明">函数声明&lt;/h3>
&lt;h3 id="结构体声明">结构体声明&lt;/h3>
&lt;h3 id="接口命名">接口命名&lt;/h3>
&lt;h2 id="占位符">占位符&lt;/h2>
&lt;h3 id="普通占位符">普通占位符&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">占位符&lt;/th>
&lt;th style="text-align:center">说明&lt;/th>
&lt;th style="text-align:center">举例&lt;/th>
&lt;th style="text-align:center">输出&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">%v&lt;/td>
&lt;td style="text-align:center">相应值的默认格式。&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%v&amp;quot;, people)&lt;/td>
&lt;td style="text-align:center">{zhangsan}&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%+v&lt;/td>
&lt;td style="text-align:center">打印结构体时，会添加字段名&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%+v&amp;quot;, people)&lt;/td>
&lt;td style="text-align:center">{Name:zhangsan}&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%#v&lt;/td>
&lt;td style="text-align:center">相应值的Go语法表示&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;#v&amp;quot;, people)&lt;/td>
&lt;td style="text-align:center">main.Human{Name:&amp;ldquo;zhangsan&amp;rdquo;}&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%T&lt;/td>
&lt;td style="text-align:center">相应值的类型的Go语法表示&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%T&amp;quot;, people)&lt;/td>
&lt;td style="text-align:center">main.Human&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%%&lt;/td>
&lt;td style="text-align:center">字面上的百分号，并非值的占位符&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%%&amp;quot;)&lt;/td>
&lt;td style="text-align:center">%&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="布尔占位符">布尔占位符&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">占位符&lt;/th>
&lt;th style="text-align:center">说明&lt;/th>
&lt;th style="text-align:center">举例&lt;/th>
&lt;th style="text-align:center">输出&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">%t&lt;/td>
&lt;td style="text-align:center">true 或 false&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%t&amp;quot;, true)&lt;/td>
&lt;td style="text-align:center">true&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="整数占位符">整数占位符&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">占位符&lt;/th>
&lt;th style="text-align:center">说明&lt;/th>
&lt;th style="text-align:center">举例&lt;/th>
&lt;th style="text-align:center">输出&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">%b&lt;/td>
&lt;td style="text-align:center">二进制表示&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%b&amp;quot;, 5)&lt;/td>
&lt;td style="text-align:center">101&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%c&lt;/td>
&lt;td style="text-align:center">相应Unicode码点所表示的字符&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%c&amp;quot;, 0x4E2D)&lt;/td>
&lt;td style="text-align:center">中&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%d&lt;/td>
&lt;td style="text-align:center">十进制表示&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%d&amp;quot;, 0x12)&lt;/td>
&lt;td style="text-align:center">18&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%o&lt;/td>
&lt;td style="text-align:center">八进制表示&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%d&amp;quot;, 10)&lt;/td>
&lt;td style="text-align:center">12&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%q&lt;/td>
&lt;td style="text-align:center">单引号围绕的字符字面值，由Go语法安全地转义&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%q&amp;quot;, 0x4E2D)&lt;/td>
&lt;td style="text-align:center">&amp;lsquo;中&amp;rsquo;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%x&lt;/td>
&lt;td style="text-align:center">十六进制表示，字母形式为小写 a-f&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%x&amp;quot;, 13)&lt;/td>
&lt;td style="text-align:center">d&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%X&lt;/td>
&lt;td style="text-align:center">十六进制表示，字母形式为大写 A-F&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%x&amp;quot;, 13)&lt;/td>
&lt;td style="text-align:center">D&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%U&lt;/td>
&lt;td style="text-align:center">Unicode格式：U+1234，等同于 &amp;ldquo;U+%04X&amp;rdquo;&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%U&amp;quot;, 0x4E2D)&lt;/td>
&lt;td style="text-align:center">U+4E2D&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="浮点数和复数的组成部分实部和虚部">浮点数和复数的组成部分（实部和虚部）&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">占位符&lt;/th>
&lt;th style="text-align:center">说明&lt;/th>
&lt;th style="text-align:center">举例&lt;/th>
&lt;th style="text-align:center">输出&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">%b&lt;/td>
&lt;td style="text-align:center">无小数部分的，指数为二的幂的科学计数法， 与 strconv.FormatFloat 的 &amp;lsquo;b&amp;rsquo; 转换格式一致。例如 -123456p-78&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%e&lt;/td>
&lt;td style="text-align:center">科学计数法，例如 -1234.456e+78&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%e&amp;quot;, 10.2)&lt;/td>
&lt;td style="text-align:center">1.020000e+01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%E&lt;/td>
&lt;td style="text-align:center">科学计数法，例如 -1234.456E+78&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%e&amp;quot;, 10.2)&lt;/td>
&lt;td style="text-align:center">1.020000E+01&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%f&lt;/td>
&lt;td style="text-align:center">有小数点而无指数，例如 123.456&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%f&amp;quot;, 10.2)&lt;/td>
&lt;td style="text-align:center">10.200000&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%g&lt;/td>
&lt;td style="text-align:center">根据情况选择 %e 或 %f 以产生更紧凑的（无末尾的0）输出&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%g&amp;quot;, 10.20)&lt;/td>
&lt;td style="text-align:center">10.2&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%G&lt;/td>
&lt;td style="text-align:center">根据情况选择 %E 或 %f 以产生更紧凑的（无末尾的0）输出&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%G&amp;quot;, 10.20+2i)&lt;/td>
&lt;td style="text-align:center">(10.2+2i)&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="字符串与字节切片">字符串与字节切片&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">占位符&lt;/th>
&lt;th style="text-align:center">说明&lt;/th>
&lt;th style="text-align:center">举例&lt;/th>
&lt;th style="text-align:center">输出&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">%s&lt;/td>
&lt;td style="text-align:center">输出字符串表示（string类型或[]byte)&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%s&amp;quot;, []byte(&amp;ldquo;Go语言&amp;rdquo;))&lt;/td>
&lt;td style="text-align:center">Go语言&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%q&lt;/td>
&lt;td style="text-align:center">双引号围绕的字符串，由Go语法安全地转义&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%q&amp;quot;, &amp;ldquo;Go语言&amp;rdquo;)&lt;/td>
&lt;td style="text-align:center">&amp;ldquo;Go语言&amp;rdquo;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%x&lt;/td>
&lt;td style="text-align:center">十六进制，小写字母，每字节两个字符&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%x&amp;quot;, &amp;ldquo;golang&amp;rdquo;)&lt;/td>
&lt;td style="text-align:center">676f6c616e67&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">%X&lt;/td>
&lt;td style="text-align:center">十六进制，大写字母，每字节两个字符&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%X&amp;quot;, &amp;ldquo;golang&amp;rdquo;)&lt;/td>
&lt;td style="text-align:center">676F6C616E67&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="指针">指针&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">占位符&lt;/th>
&lt;th style="text-align:center">说明&lt;/th>
&lt;th style="text-align:center">举例&lt;/th>
&lt;th style="text-align:center">输出&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">%p&lt;/td>
&lt;td style="text-align:center">十六进制表示，前缀 0x&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%p&amp;quot;, &amp;amp;people)&lt;/td>
&lt;td style="text-align:center">0x4f57f0&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="其它标记">其它标记&lt;/h3>
&lt;table>
&lt;thead>
&lt;tr>
&lt;th style="text-align:left">占位符&lt;/th>
&lt;th style="text-align:center">说明&lt;/th>
&lt;th style="text-align:center">举例&lt;/th>
&lt;th style="text-align:center">输出&lt;/th>
&lt;/tr>
&lt;/thead>
&lt;tbody>
&lt;tr>
&lt;td style="text-align:left">+&lt;/td>
&lt;td style="text-align:center">总打印数值的正负号；对于%q（%+q）保证只输出ASCII编码的字符。&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%+q&amp;quot;, &amp;ldquo;中文&amp;rdquo;)&lt;/td>
&lt;td style="text-align:center">&amp;ldquo;\u4e2d\u6587&amp;rdquo;&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">-&lt;/td>
&lt;td style="text-align:center">在右侧而非左侧填充空格（左对齐该区域）&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;td style="text-align:center">&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">#&lt;/td>
&lt;td style="text-align:center">备用格式：为八进制添加前导 0（%#o） 为十六进制添加前导 0x（%#x）或 0X（%#X），为 %p（%#p）去掉前导 0x； 如果可能的话，%q（%#q）会打印原始 （即反引号围绕的）字符串； 如果是可打印字符，%U（%#U）会写出该字符的 Unicode 编码形式（如字符 x 会被打印成 U+0078 &amp;lsquo;x&amp;rsquo;）。&lt;/td>
&lt;td style="text-align:center">Printf(&amp;quot;%#U&amp;quot;, &amp;lsquo;中&amp;rsquo;)&lt;/td>
&lt;td style="text-align:center">U+4E2D&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">&amp;rsquo; '&lt;/td>
&lt;td style="text-align:center">(空格)为数值中省略的正负号留出空白（% d）； 以十六进制（% x, % X）打印字符串或切片时，在字节之间用空格隔开&lt;/td>
&lt;td style="text-align:center">无&lt;/td>
&lt;td style="text-align:center">无&lt;/td>
&lt;/tr>
&lt;tr>
&lt;td style="text-align:left">0&lt;/td>
&lt;td style="text-align:center">填充前导的0而非空格；对于数字，这会将填充移到正负号之后&lt;/td>
&lt;td style="text-align:center">无&lt;/td>
&lt;td style="text-align:center">无&lt;/td>
&lt;/tr>
&lt;/tbody>
&lt;/table>
&lt;h3 id="其他">其他&lt;/h3>
&lt;p>golang没有 &amp;lsquo;%u&amp;rsquo; 点位符，若整数为无符号类型，默认就会被打印成无符号的。&lt;/p>
&lt;p>宽度与精度的控制格式以Unicode码点为单位。宽度为该数值占用区域的最小宽度；精度为小数点之后的位数。
操作数的类型为int时，宽度与精度都可用字符 &amp;lsquo;*&amp;rsquo; 表示。&lt;/p>
&lt;p>对于 %g/%G 而言，精度为所有数字的总数，例如：123.45，%.4g 会打印123.5，（而 %6.2f 会打印123.45）。&lt;/p>
&lt;p>%e 和 %f 的默认精度为6&lt;/p>
&lt;p>对大多数的数值类型而言，宽度为输出的最小字符数，如果必要的话会为已格式化的形式填充空格。&lt;/p>
&lt;p>而以字符串类型，精度为输出的最大字符数，如果必要的话会直接截断。&lt;/p>
&lt;blockquote>
&lt;p>作者：Juha
链接：https://www.jianshu.com/p/66aaf908045e
来源：简书
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。&lt;/p>
&lt;/blockquote>
&lt;h2 id="注释">注释&lt;/h2>
&lt;h2 id="readme">README&lt;/h2>
&lt;h2 id="其他-1">其他&lt;/h2>
&lt;h3 id="断言">断言&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-fallback" data-lang="fallback">&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="go基本命令">Go基本命令&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;span class="lnt">11
&lt;/span>&lt;span class="lnt">12
&lt;/span>&lt;span class="lnt">13
&lt;/span>&lt;span class="lnt">14
&lt;/span>&lt;span class="lnt">15
&lt;/span>&lt;span class="lnt">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="k">go&lt;/span> &lt;span class="nx">build&lt;/span> &lt;span class="c1">// 用于打包编译代码
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">clean&lt;/span> &lt;span class="c1">// 来移除当前源码包和关联源码包里面编译生成的文件
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">fmt&lt;/span> &lt;span class="c1">// 格式化代码文件
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">get&lt;/span> &lt;span class="c1">// 下载安装包
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">install&lt;/span> &lt;span class="c1">// 这里就是先生成结果文件，然后把这个文件放到我们的包里面去
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">test&lt;/span> &lt;span class="c1">// 测试文件自动读取源码目录下面名为*_test.go的文件，生成并运行测试用的可执行文件
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// go提供的一些工具
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">tool&lt;/span> &lt;span class="nx">fix&lt;/span> &lt;span class="c1">//用来修复以前老版本的代码到新版本
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">tool&lt;/span> &lt;span class="nx">vet&lt;/span> &lt;span class="nx">directory&lt;/span>&lt;span class="p">|&lt;/span>&lt;span class="nx">files&lt;/span> &lt;span class="c1">//用来分析当前目录的代码是否都是正确的代码
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">// 用于在编译前自动化生成某类代码。go generate和go build是完全不一样的命令，通过分析源码中特殊的注释，然后执行相应的命令。这些命令都是很明确的，没有任何的依赖在里面。而且大家在用这个之前心里面一定要有一个理念，这个go generate是给你用的，不是给使用你这个包的人用的，是方便你来生成一些代码的。
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">generate&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="k">go&lt;/span> &lt;span class="nx">doc&lt;/span> &lt;span class="c1">// 生成文档
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">version&lt;/span> &lt;span class="c1">//查看go当前的版本
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">env&lt;/span> &lt;span class="c1">//查看当前go的环境变量
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">list&lt;/span> &lt;span class="c1">//列出当前全部安装的package
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">run&lt;/span> &lt;span class="c1">//编译并运行Go程序
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h3 id="go-mod-相关命令">Go mod 相关命令&lt;/h3>
&lt;div class="highlight">&lt;div class="chroma">
&lt;table class="lntable">&lt;tr>&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code>&lt;span class="lnt"> 1
&lt;/span>&lt;span class="lnt"> 2
&lt;/span>&lt;span class="lnt"> 3
&lt;/span>&lt;span class="lnt"> 4
&lt;/span>&lt;span class="lnt"> 5
&lt;/span>&lt;span class="lnt"> 6
&lt;/span>&lt;span class="lnt"> 7
&lt;/span>&lt;span class="lnt"> 8
&lt;/span>&lt;span class="lnt"> 9
&lt;/span>&lt;span class="lnt">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td class="lntd">
&lt;pre tabindex="0" class="chroma">&lt;code class="language-go" data-lang="go">&lt;span class="line">&lt;span class="cl">&lt;span class="k">go&lt;/span> &lt;span class="nx">mod&lt;/span> &lt;span class="nx">init&lt;/span> &lt;span class="nx">example&lt;/span>&lt;span class="p">.&lt;/span>&lt;span class="nx">com&lt;/span> &lt;span class="c1">//生成go.mod文件
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">mod&lt;/span> &lt;span class="nx">download&lt;/span> &lt;span class="c1">//下载go.mod文件中知名的所有依赖
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">mod&lt;/span> &lt;span class="nx">tidy&lt;/span> &lt;span class="c1">//整理现有的依赖，删除未使用的依赖
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">mod&lt;/span> &lt;span class="nx">graph&lt;/span> &lt;span class="c1">//查看现有的依赖结构
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">mod&lt;/span> &lt;span class="nx">edit&lt;/span> &lt;span class="c1">// 编辑go.mod文件
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">mod&lt;/span> &lt;span class="nx">vendor&lt;/span> &lt;span class="c1">//到处现有的所有依赖 (事实上 Go modules 正在淡化 Vendor 的概念)
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">mod&lt;/span> &lt;span class="nx">verify&lt;/span> &lt;span class="c1">//校验一个模块是否被篡改过
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">clean&lt;/span> &lt;span class="o">-&lt;/span>&lt;span class="nx">modcache&lt;/span> &lt;span class="c1">//清理所有已缓存的模块版本数据
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">mod&lt;/span> &lt;span class="c1">//查看所有go mod的使用命令
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span>&lt;span class="k">go&lt;/span> &lt;span class="nx">mod&lt;/span> &lt;span class="nx">why&lt;/span> &lt;span class="c1">//explain why packages or modules are needed
&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>&lt;h2 id="未完待续">未完待续。。。&lt;/h2>
&lt;h2 id="参考文献">参考文献&lt;/h2>
&lt;ul>
&lt;li>&lt;a class="link" href="https://www.jianshu.com/p/66aaf908045e" target="_blank" rel="noopener"
>https://www.jianshu.com/p/66aaf908045e&lt;/a>&lt;/li>
&lt;/ul></description></item><item><title>Links</title><link>https://petrichor.net.cn/links/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://petrichor.net.cn/links/</guid><description>&lt;p>你好&lt;/p></description></item><item><title>Search</title><link>https://petrichor.net.cn/search/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://petrichor.net.cn/search/</guid><description/></item><item><title>Tags</title><link>https://petrichor.net.cn/tags/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://petrichor.net.cn/tags/</guid><description/></item></channel></rss>